<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z2ZY6ZE84")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/all.min.css><link disabled id=dark-mode-theme rel=stylesheet href=/css/dark.css><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/my_style.css><title>万众一芯开放验证 | AI 算子验证第一期：RISC-V 向量计算验证实战 (进行中)</title>
<meta name=description content="挑战RISC-V向量算子验证"></head><body style=width:100%;max-width:100%;margin:0;padding:0><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class="d-flex justify-content-between align-items-center" style=width:100%><div class="d-flex align-items-center"><a class="navbar-brand navbar-brand-content" href=https://open-verify.cc/cn><img src=/images/logo.png></a><div class="collapse navbar-collapse" id=navbarNavDropdown><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class=nav-link href=/registration_portal/>报名入口汇总</a></li><li class=nav-item><a class=nav-link href=/learningresource/>学习资源</a></li><li class=nav-item><a class=nav-link href=/about/>关于我们</a></li></ul></div></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavDropdown aria-controls=navbarNavDropdown aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" style=flex:1><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class="btn fas fa-moon" id=dark-mode-toggle></a></li></ul></div></div></nav><div id=content><div class=container><div class="py-4 rounded-3"><div class="container-fluid py-2"><h1 class="display-2 mb-4 text-center">AI 算子验证第一期：RISC-V 向量计算验证实战 (进行中)</h1></div><p class="text-center fs-4 fst-italic serif">挑战RISC-V向量算子验证</p><div class="text-center pt-4"></div></div><div class="row justify-content-center mb-5"><div class=col-12><p class="card-date m-0">Created Nov 26, 2025 -
Last updated: Nov 26, 2025</p><hr class=dropdown-divider><div class="row justify-content-between"><div class=col-sm-4></div><div class=col-sm-8 style=text-align:right></div></div></div></div><div class="container-fluid py-2 content"><div class="serif main-content"><h1 id=任务介绍>任务介绍</h1><p>本期验证任务要求参与者完成基于 RISC-V “V” 扩展的向量计算编译验证流程，通过端到端的实战测试，深入理解从高级算子到RISC-V汇编的完整编译链及其功能验证方法。</p><p>RISC-V “V” (Vector) 扩展旨在通过单指令多数据（SIMD）并行处理模式，显著提升处理器在科学计算、机器学习、多媒体处理等领域的性能。
向量处理器的核心思想是使用一条指令，对一组数据（即“向量”）中的所有元素执行相同的操作。它通过引入一组专门的向量寄存器和丰富的向量指令，使处理器能够高效地并行处理大量数据。</p><p>本次验证的核心是构建完整的Triton算子→MLIR→LLVM→RISC-V汇编→Spike模拟验证闭环。
参与者将使用Triton编写的高性能算子，经过MLIR编译框架进行多层中间表示转换，最终降级至LLVM IR并生成包含向量指令的RISC-V汇编代码。
通过在Spike模拟器中编写C测试程序、设置输入数据并执行结果比对，验证编译生成向量kernel的功能正确性。</p><p>本次任务将提供完整的编译工具链和必要的链接文件，包括算子kernel的LLVM IR文件、RISC-V汇编文件以及交叉编译环境。</p><p>欢迎各位报名参加，请填写<a href=https://www.wjx.top/vm/rXgAN7v.aspx>报名问卷</a>并加入交流群：</p><ul><li>万众一芯验证交流群(QQ)：600480230</li><li>向量计算验证交流群(QQ)：946483102</li></ul><h1 id=risc-v-向量计算验证流程文档>RISC-V 向量计算验证流程文档</h1><h2 id=1-验证对象>1 验证对象</h2><h3 id=11-risc-vv扩展简介>1.1 RISC-V“V”扩展简介</h3><p>RISC-V &ldquo;V&rdquo; (Vector) 扩展旨在通过单指令多数据（SIMD）并行处理模式，显著提升处理器在科学计算、机器学习、多媒体处理等领域的性能。向量处理器的核心思想是使用一条指令，对一组数据（即“向量”）中的所有元素执行相同的操作。它通过引入一组专门的向量寄存器和丰富的向量指令，使处理器能够高效地并行处理大量数据，特别适用于高性能计算、人工智能、信号处理等数据密集型应用场景。</p><h3 id=12-spike模拟器简介>1.2 Spike模拟器简介</h3><p>Spike 是由 RISC-V 官方开发的一款功能模拟器（functional simulator），常被用作 RISC-V 软件栈的“黄金参考模型”。它可以模拟包括 RV32 和 RV64 在内的多种 RISC-V 架构变体，并支持包括“V”向量扩展在内的多个标准扩展（需编译时启用）。Spike 能够运行完整的操作系统（如 Linux）或裸机程序，为开发者提供调试、验证和教学的理想环境。由于其开源、轻量且行为规范，Spike 广泛应用于 RISC-V 生态系统的开发与教育场景中，是学习和测试 RISC-V 指令（包括向量指令）的重要工具。</p><h2 id=2-测试功能与任务要求>2 测试功能与任务要求</h2><p>你将参与一个端到端的 RISC-V 向量计算验证流程。具体而言，一个使用 Triton 编写的高性能算子（kernel）会首先通过 MLIR 编译框架进行多层中间表示（IR）转换，最终被 lowering（降级）至 LLVM Dialect，并生成标准的 LLVM IR（.ll 文件）。当编译目标启用 RISC-V 的 “V” 向量扩展后，LLVM 后端会进一步将该 IR 编译为包含向量指令的 RISC-V 汇编代码（.s 文件）。</p><p>为了验证这一编译链所生成的向量 kernel 是否功能正确，你需要在 Spike 模拟器环境下编写一段 C 语言测试程序：该程序应能调用并执行上述生成的汇编 kernel，通过设置合理的输入数据、调用约定和结果比对机制，确认其输出与预期行为一致。这项任务不仅要求你理解 RISC-V 向量扩展的基本使用方式，还需掌握如何在 Spike 中构建完整的测试环境，从而打通从高级算子到底层硬件模拟的验证闭环。</p><h3 id=21-测试流程1-提供环境及流程说明>2.1 测试流程1: 提供环境及流程说明</h3><p><strong>RISC-V 交叉编译工具链</strong></p><p>该工具链用于在宿主机（如 x86 Linux 或 macOS）上为 RISC-V 目标平台编译代码。在本任务中，你需要使用它分别处理两个源文件，并最终链接生成一个可在模拟器中运行的可执行文件（接下来全部流程都以add算子举例，请注意命名规则）：</p><ul><li>将提供的 算子 kernel 的 .s 汇编文件编译为 kernel.o（如提供 add.s 则编译命名为 add.o）；</li><li>将你自己编写的 C 测试主程序（命名为 test_add.c）编译为 .o 文件（命名为 test_add.o）;</li><li>最后，使用同一工具链的链接器将这两个 .o 文件与所提供的四个文件链接成一个完整的 ELF 可执行文件。（命名为 test_add.elf）。</li></ul><p>所需链接文件：</p><ul><li>add.o</li><li>test_add.o</li><li>crt.o</li><li>syscalls.o</li><li>mlir_memrefcopy_spike.o</li><li>test_compact.ld</li></ul><p><strong>Spike RISC-V 模拟器</strong></p><p>你将把上述生成的 test_add.elf 文件作为输入加载到 Spike 中运行。Spike 会逐条执行其中的指令（包括向量指令），并输出程序的运行结果（如打印信息、返回值等）。你可以通过比对实际输出与预期结果，判断 Triton 算子经 MLIR → LLVM → RISC-V 汇编这一完整编译链后生成的 kernel 是否功能正确。</p><h3 id=22-测试流程2-提供文件说明>2.2 测试流程2: 提供文件说明</h3><h4 id=算子-kernel-的-llvm-ir-文件addll>算子 kernel 的 LLVM IR 文件(add.ll)</h4><p>该文件是 Triton 算子经过 MLIR 编译流程后生成的 LLVM 中间表示（Intermediate Representation）。它以可读的文本形式描述了算子的完整计算逻辑、控制流结构以及函数签名。通过阅读此文件，你可以明确以下关键信息：</p><ul><li>算子函数的名称及其参数列表（包括参数类型、数量和顺序）；</li><li>每个参数在计算中的语义角色（例如：输入张量指针、输出缓冲区、维度大小、步长等）；</li><li>算子内部的核心操作逻辑（如循环、访存、向量运算等）。这些信息对于编写正确的 C 测试代码至关重要——你需要据此构造符合调用约定的输入数据，并设计预期输出用于结果比对，从而验证 kernel 功能的正确性。</li></ul><h4 id=算子-kernel-的-risc-v-汇编文件adds>算子 kernel 的 RISC-V 汇编文件（add.s）</h4><p>该文件是在启用 RISC-V “V” 向量扩展的前提下，由 LLVM 后端将上述 .ll 文件进一步编译生成的 RISC-V 汇编代码。它包含了实际将在目标硬件（或模拟器）上执行的指令序列，其中可能包含 vsetvli、vle32.v、vadd.vv 等向量指令。</p><p>你的任务是使用 RISC-V 交叉编译工具链（riscv64-unknown-elf-gcc）将该 .s 文件编译为可重定位的目标文件（.o），然后与你编写的 C 测试主程序链接，生成可在 Spike 模拟器中运行的完整可执行文件。通过这种方式，你可以真实运行并验证向量化 kernel 在 RISC-V 架构下的行为是否符合预期。</p><h3 id=四个必需编译文件>四个必需编译文件</h3><ul><li>crt.o</li><li>syscalls.o</li><li>mlir_memrefcopy_spike.o</li><li>test_compact.ld</li></ul><p>作为必需编译文件，在生成 test_add.elf 时需与 add.o 和 test_add.o 共同编译链接，具体可参考流程示例文档。</p><h2 id=3-验收要求>3 验收要求</h2><p>为了全面验证算子 kernel 的功能正确性，测试代码需覆盖多种典型和边界输入情况，并能清晰反映 kernel 在不同场景下的输出行为。我们不要求穷尽所有组合，但期望测试能够体现对 kernel 核心逻辑的理解，包括对关键参数变化（如向量长度、数据类型、内存布局等）的响应。所有测试均应包含与理论预期结果的比对，并通过可读的输出展示验证结论。如同参考设计中所述，只要测试能系统性地反映“结果与参照模型一致”这一基本正确性要求，并体现出对不同运行情形的考量，即视为满足验收标准。</p><p>下图皆以 add 算子为例，请根据具体情况替换算子名称，并将全部提交文件打包命名为 <strong>姓名_算子名称.zip</strong> <code>(xxx_add.zip)</code>。</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>提交文件</td><td>文件说明与具体要求</td></tr><tr><td><strong>test_add.elf</strong></td><td>按照作业流程说明和样例文档，使用 RISC-V 交叉编译工具链将以下目标文件正确链接生成的可执行 ELF 文件：<ul><li>add.o (由 add.s 编译生成)</li><li>crt.o ; syscalls.o ; mlir_memrefcopy_spike.o ; test_compact.ld (由任务包内提供)</li><li>test_add.o （由自行编写的 test_add.c 编译生成）</li></ul></td></tr><tr><td><strong>测试代码</strong> (test_add.c)</td><td>用于验证算子 kernel 正确性的 C 源代码，需满足：<ul><li>正确声明并调用 kernel 函数，参数传递符合 .ll 文件定义，并附注释说明各参数语义；</li><li>包含与理论预期结果的比对逻辑；</li><li>根据算子类型提供充分测试：</li><ul><li>若为<strong>计算类算子</strong>（如加法、乘法等），需使用 <strong>至少 500 个输入数据</strong> 并输出对应计算结果；</li><li>若为<strong>数据操作类算子</strong>（如 transpose、repeat 等），需覆盖 <strong>2–3 种典型情形</strong>（如不同维度、步长、对齐方式等），若存在特殊边界情况（如空输入、单元素、非对齐访问等），也必须包含相应测试。</li></ul></ul></td></tr><tr><td><strong>运行截图</strong></td><td>在终端中使用 Spike 模拟器运行 test_add.elf 后输出截图，需清晰显示：<ul><li>Spike 启动命令；</li><li>程序打印的输入摘要、实际输出、预期结果及最终验证结论（如 “PASS” / “FAIL”）；</li></ul>（可参考流程示例文档）</td></tr></tbody></table></div></div></div></div><script src=/js/bootstrap.min.js></script><script src=/js/jquery.min.js></script><script src=/js/isotope.pkgd.min.js></script><script src=/js/masonry.pkgd.min.js async></script><script src=/js/dark.js></script><script>var savedTheme=localStorage.getItem("dark-mode-storage")||"light";setTheme(savedTheme)</script><script src=/js/isotope.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></body></html>