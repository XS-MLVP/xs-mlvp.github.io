<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z2ZY6ZE84")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/all.min.css><link disabled id=dark-mode-theme rel=stylesheet href=/css/dark.css><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/my_style.css><title>万众一芯开放验证 | 验证对象: 同步 FIFO 的设计规范和代码</title>
<meta name=description content="新手任务的验证对象"></head><body style=width:100%;max-width:100%;margin:0;padding:0><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class="d-flex justify-content-between align-items-center" style=width:100%><div class="d-flex align-items-center"><a class="navbar-brand navbar-brand-content" href=https://open-verify.cc/cn><img src=/images/logo.png></a><div class="collapse navbar-collapse" id=navbarNavDropdown><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class=nav-link href=/registration_portal/>报名入口汇总</a></li><li class=nav-item><a class=nav-link href=/learningresource/>学习资源</a></li><li class=nav-item><a class=nav-link href=/about/>关于我们</a></li></ul></div></div><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavDropdown aria-controls=navbarNavDropdown aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" style=flex:1><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class="btn fas fa-moon" id=dark-mode-toggle></a></li></ul></div></div></nav><div id=content><div class=container><div class="py-4 rounded-3"><div class="container-fluid py-2"><h1 class="display-2 mb-4 text-center">验证对象: 同步 FIFO 的设计规范和代码</h1></div><p class="text-center fs-4 fst-italic serif">新手任务的验证对象</p><div class="text-center pt-4"></div></div><div class="row justify-content-center mb-5"><div class=col-12><p class="card-date m-0">Created Jul 22, 2025 -
Last updated: Jul 22, 2025</p><hr class=dropdown-divider><div class="row justify-content-between"><div class=col-sm-4></div><div class=col-sm-8 style=text-align:right></div></div></div></div><div class="container-fluid py-2 content"><div class="serif main-content"><h2 id=设计规范>设计规范</h2><h3 id=模块名称>模块名称</h3><p><code>SyncFIFO</code></p><h3 id=描述>描述</h3><p>此模块实现一个 32 位宽、容量为 16 个元素的同步 FIFO（先入先出）缓冲区。FIFO 用于暂存数据，提供写入和读取操作，并支持满/空状态指示。它具有时钟同步行为，适用于数据流处理、接口缓冲等场景。该设计遵循同步操作，使用单一时钟信号进行读写。</p><h3 id=端口说明>端口说明</h3><table><thead><tr><th>端口名称</th><th>方向</th><th>宽度（bit）</th><th>描述</th></tr></thead><tbody><tr><td>clk</td><td>input</td><td>1</td><td>时钟信号</td></tr><tr><td>rst_n</td><td>input</td><td>1</td><td>低电平时初始化 FIFO</td></tr><tr><td>we_i</td><td>input</td><td>1</td><td>写使能信号，高有效，当为 1 时，允许向 FIFO 写入数据。</td></tr><tr><td>re_i</td><td>input</td><td>1</td><td>读使能信号，高有效，当为 1 时，允许从 FIFO 读取数据。</td></tr><tr><td>data_i</td><td>input</td><td>32</td><td>写入 FIFO 的数据</td></tr><tr><td>data_o</td><td>output</td><td>32</td><td>读取 FIFO 的数据</td></tr><tr><td>full_o</td><td>output</td><td>1</td><td>表明 FIFO 是否为满</td></tr><tr><td>empty_o</td><td>output</td><td>1</td><td>表明 FIFO 是否为空</td></tr></tbody></table><h3 id=功能描述>功能描述</h3><ul><li><p><strong>写入操作</strong>：</p><ul><li><p>当<code>we_i</code>为 1 时，FIFO 可以接收数据并存储到内部缓冲区<code>ram</code>中。</p></li><li><p>写指针<code>wptr</code>指示下一个写入位置，随着每次写入操作递增。</p></li><li><p>当 FIFO 已满时，<code>full_o</code>为 1，写入无效。</p></li></ul></li><li><p><strong>读取操作</strong>：</p><ul><li><p>当<code>re_i</code>为 1 时，FIFO 将根据读取指针<code>rptr</code>从<code>ram</code>中输出数据。</p></li><li><p>读取指针<code>rptr</code>指示下一个读取位置，随着每次读取操作递增。</p></li><li><p>当 FIFO 为空时，<code>empty_o</code>为 1，读取无效。</p></li></ul></li><li><p><strong>指针更新</strong>：</p><ul><li><p><code>wptr</code>（写指针）和<code>rptr</code>（读指针）在时钟上升沿更新。<code>rptr</code>仅在<code>re_i</code>有效并且 FIFO 非空时更新，<code>wptr</code>仅在<code>we_i</code>有效并且 FIFO 非满时更新。</p></li><li><p>FIFO 操作时，通过比较<code>wptr</code>和<code>rptr</code>的位置，FIFO 会自动调整数据的读写位置。</p></li></ul></li><li><p><strong>计数器</strong>：</p><ul><li><p><code>counter</code>用于跟踪 FIFO 中的数据量（从 0 到 16）。每次写入数据时，<code>counter</code>加 1，每次读取数据时，<code>counter</code>减 1。</p></li><li><p>当<code>counter</code>值为 0 时，<code>empty_o</code>信号为 1，表示 FIFO 为空；当<code>counter</code>值为 16 时，<code>full_o</code>信号为 1，表示 FIFO 已满。</p></li></ul></li></ul><h3 id=时序与复位>时序与复位</h3><ul><li><p><strong>同步时序</strong>： 所有的操作（写入、读取、指针更新、计数器更新）都在时钟信号的上升沿同步。</p></li><li><p><strong>复位</strong>： 在<code>rst_n</code>为低时，FIFO 内部所有指针（<code>wptr</code>、<code>rptr</code>）和数据输出（<code>data_o</code>）都将被清零，并且计数器<code>counter</code>会被复位为 0。</p></li></ul><h3 id=功能块说明>功能块说明</h3><ol><li><p><strong>指针更新：</strong></p><ul><li><p>负责同步更新写入和读取指针。</p></li><li><p>在每个时钟周期内，如果<code>we_i</code>为 1 并且 FIFO 不满，则数据会被写入 FIFO，且<code>wptr</code>自增。</p></li><li><p>如果<code>re_i</code>为 1 并且 FIFO 不空，则会读取数据并将其输出，<code>rptr</code>自增。</p></li></ul></li><li><p><strong>计数器更新：</strong></p><ul><li><p>计数器<code>counter</code>用于追踪 FIFO 的当前数据量。</p></li><li><p>每次写入时，<code>counter</code>自增；每次读取时，<code>counter</code>自减。</p></li><li><p>FIFO 满时，<code>counter</code>达到 16，<code>full_o</code>为 1；FIFO 空时，<code>counter</code>为 0，<code>empty_o</code>为 1。</p></li></ul></li></ol><h3 id=设计约束与假设>设计约束与假设</h3><ol><li><p><strong>数据宽度与深度</strong>： 本设计采用 32 位宽度，16 深度的 FIFO，适用于较小规模的数据缓存需求。</p></li><li><p><strong>时钟域</strong>： FIFO 模块假设在单一时钟域内工作，且时钟信号与复位信号是同步的。</p></li><li><p><strong>数据保持</strong>： FIFO 的数据存储在一个 16 个元素的 RAM 数组中，每个元素为 32 位。</p></li><li><p><strong>读写并行</strong>：FIFO 未满且不为空时，允许同时进行读、写操作。</p></li></ol><h3 id=边界条件>边界条件</h3><ol><li><p>当 FIFO 已满且<code>we_i</code>信号为高时，写入操作将被阻塞。</p></li><li><p>当 FIFO 为空且<code>re_i</code>信号为高时，读取操作将被阻塞。</p></li></ol><h2 id=设计代码>设计代码</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-verilog data-lang=verilog><span style=display:flex><span><span style=color:#00a8c8>module</span> <span style=color:#111>SyncFIFO</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>input</span>  <span style=color:#00a8c8>wire</span>        <span style=color:#111>clk</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>input</span>  <span style=color:#00a8c8>wire</span>        <span style=color:#111>rst_n</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>input</span>  <span style=color:#00a8c8>wire</span>        <span style=color:#111>we_i</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>input</span>  <span style=color:#00a8c8>wire</span>        <span style=color:#111>re_i</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>input</span>  <span style=color:#00a8c8>wire</span> <span style=color:#111>[</span><span style=color:#ae81ff>31</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>data_i</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>output</span> <span style=color:#00a8c8>reg</span>  <span style=color:#111>[</span><span style=color:#ae81ff>31</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>data_o</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>output</span> <span style=color:#00a8c8>wire</span>        <span style=color:#111>full_o</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>output</span> <span style=color:#00a8c8>wire</span>        <span style=color:#111>empty_o</span>
</span></span><span style=display:flex><span><span style=color:#111>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>reg</span> <span style=color:#111>[</span><span style=color:#ae81ff>31</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>ram</span><span style=color:#111>[</span><span style=color:#ae81ff>16</span><span style=color:#111>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>reg</span> <span style=color:#111>[</span><span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>wptr</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>reg</span> <span style=color:#111>[</span><span style=color:#ae81ff>3</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>rptr</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>reg</span> <span style=color:#111>[</span><span style=color:#ae81ff>4</span><span style=color:#f92672>:</span><span style=color:#ae81ff>0</span><span style=color:#111>]</span> <span style=color:#111>counter</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>wire</span> <span style=color:#111>rvalid</span><span style=color:#111>,</span> <span style=color:#111>wvalid</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>assign</span> <span style=color:#111>rvalid</span> <span style=color:#f92672>=</span> <span style=color:#111>re_i</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span><span style=color:#111>empty_o</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>assign</span> <span style=color:#111>wvalid</span> <span style=color:#f92672>=</span> <span style=color:#111>we_i</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span><span style=color:#111>full_o</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>always</span> <span style=color:#111>@(</span><span style=color:#00a8c8>posedge</span> <span style=color:#111>clk</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span> <span style=color:#f92672>:</span> <span style=color:#111>PTR_UPDATE</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#f92672>!</span><span style=color:#111>rst_n</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span>
</span></span><span style=display:flex><span>      <span style=color:#111>wptr</span>   <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>      <span style=color:#111>rptr</span>   <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>      <span style=color:#111>data_o</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span> <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>begin</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>rvalid</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#111>rptr</span>   <span style=color:#f92672>&lt;=</span> <span style=color:#111>rptr</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>data_o</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>ram</span><span style=color:#111>[</span><span style=color:#111>rptr</span><span style=color:#111>];</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>wvalid</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span>
</span></span><span style=display:flex><span>        <span style=color:#111>wptr</span>      <span style=color:#f92672>&lt;=</span> <span style=color:#111>wptr</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>        <span style=color:#111>ram</span><span style=color:#111>[</span><span style=color:#111>wptr</span><span style=color:#111>]</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>data_i</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>always</span> <span style=color:#111>@(</span><span style=color:#00a8c8>posedge</span> <span style=color:#111>clk</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span> <span style=color:#f92672>:</span> <span style=color:#111>COUNTER_UPDATE</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#f92672>!</span><span style=color:#111>rst_n</span><span style=color:#111>)</span> <span style=color:#111>counter</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>rvalid</span> <span style=color:#f92672>^</span> <span style=color:#111>wvalid</span><span style=color:#111>)</span> <span style=color:#00a8c8>begin</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>rvalid</span><span style=color:#111>)</span> <span style=color:#111>counter</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>counter</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>      <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>wvalid</span><span style=color:#111>)</span> <span style=color:#111>counter</span> <span style=color:#f92672>&lt;=</span> <span style=color:#111>counter</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>    <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>assign</span> <span style=color:#111>full_o</span>  <span style=color:#f92672>=</span> <span style=color:#111>counter</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span><span style=color:#ae81ff>&#39;d16</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>  <span style=color:#00a8c8>assign</span> <span style=color:#111>empty_o</span> <span style=color:#f92672>=</span> <span style=color:#111>counter</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>endmodule</span>
</span></span></code></pre></div></div></div></div></div><script src=/js/bootstrap.min.js></script><script src=/js/jquery.min.js></script><script src=/js/isotope.pkgd.min.js></script><script src=/js/masonry.pkgd.min.js async></script><script src=/js/dark.js></script><script>var savedTheme=localStorage.getItem("dark-mode-storage")||"light";setTheme(savedTheme)</script><script src=/js/isotope.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></body></html>