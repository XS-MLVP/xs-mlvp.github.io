<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="https://open-verify.cc/mlvp/docs/ucagent/usage/">
<link rel="alternate" type="application/rss&#43;xml" href="https://open-verify.cc/mlvp/docs/ucagent/usage/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/mlvp/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/mlvp/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/mlvp/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/mlvp/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/mlvp/favicons/android-192x192.png" sizes="192x192">

<title>使用 | 开放验证平台学习资源</title>
<meta name="description" content="两种使用方式、各个选项参数、TUI界面和FAQ说明。">
<meta property="og:url" content="https://open-verify.cc/mlvp/docs/ucagent/usage/">
  <meta property="og:site_name" content="开放验证平台学习资源">
  <meta property="og:title" content="使用">
  <meta property="og:description" content="两种使用方式、各个选项参数、TUI界面和FAQ说明。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="使用">
  <meta itemprop="description" content="两种使用方式、各个选项参数、TUI界面和FAQ说明。">
  <meta itemprop="dateModified" content="2025-10-21T16:01:04+08:00">
  <meta itemprop="keywords" content="Examples,Docs">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="使用">
  <meta name="twitter:description" content="两种使用方式、各个选项参数、TUI界面和FAQ说明。">
<link rel="preload" href="/mlvp/scss/main.min.3bb6570761fbbb25e6691001febc67f331f0953db4e4e1cfb79172c2e6a5819e.css" as="style" integrity="sha256-O7ZXB2H7uyXmaRAB/rxn8zHwlT205OHPt5FywualgZ4=" crossorigin="anonymous">
<link href="/mlvp/scss/main.min.3bb6570761fbbb25e6691001febc67f331f0953db4e4e1cfb79172c2e6a5819e.css" rel="stylesheet" integrity="sha256-O7ZXB2H7uyXmaRAB/rxn8zHwlT205OHPt5FywualgZ4=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/mlvp/css/prism.css"/>

    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-4Z2ZY6ZE84');
    </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />

<script>
    $(document).ready(function() {
        $('a[name="multi-lang-toggle"]').on('click', function(event) {
            var language = $(this).attr('lang');
            var codeDiv = $(this).closest('.highlight');
            var preNodes = codeDiv.find('pre');
            preNodes.each(function(index, preNode) {
                if ($(preNode).attr("name").toLowerCase().indexOf(language.toLowerCase()) !== -1) {
                    preNode.style.display = 'block';
                } else {
                    preNode.style.display = 'none';
                }
            });
            var alist = codeDiv.find('a[name="multi-lang-toggle"]');
            alist.each(function(index, aNode) {
                if ($(aNode).attr('lang').toLowerCase() === language.toLowerCase()) {
                    aNode.style.fontWeight = 'bold';
                } else {
                    aNode.style.fontWeight = 'normal';
                }
            });
        })
        $(this).find('pre[name^="group-lang-code-"]').each(function(index, preNode) {
            if (preNode.style.display !== 'none') {
                var language = $(preNode).attr("name").replace('group-lang-code-', '');
                var alist = $(this).closest('.highlight').find('a[name="multi-lang-toggle"]');
                alist.each(function(index, aNode) {
                    if ($(aNode).attr('lang').toLowerCase() === language.toLowerCase()) {
                        aNode.style.fontWeight = 'bold';
                    } else {
                        aNode.style.fontWeight = 'normal';
                    }
                });
            }
        });
    });
</script>
    
  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/mlvp/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">开放验证平台学习资源</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/mlvp/en/">English</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/mlvp/offline-search-index.150d213acf7d336f0624c4848e463fcd.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href="#" onclick="print();return false;">点击此处打印</a>.
</p><p>
<a href="/mlvp/docs/ucagent/usage/">返回本页常规视图</a>.
</p>
</div>



<h1 class="title">使用</h1>
<div class="lead">两种使用方式、各个选项参数、TUI界面和FAQ说明。</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-4c2f0764b1448b4485db5bdc8abbc971">MCP集成模式（推荐）</a></li>


    
  
    
    
	
<li>2: <a href="#pg-7735a0965a81b3fff45d8f9c0238a813">直接使用模式</a></li>


    
  
    
    
	
<li>3: <a href="#pg-fbd7beae096d8cd3a81879ce0d6d9759">人机协同验证</a></li>


    
  
    
    
	
<li>4: <a href="#pg-56fd437efd30e85d1af55e127ea86585">参数说明</a></li>


    
  
    
    
	
<li>5: <a href="#pg-5fdb5ae128eebcc1e92c02708d6ec432">TUI</a></li>


    
  
    
    
	
<li>6: <a href="#pg-496947e48f69f9f9e929fe92771d84e0">FAQ</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-4c2f0764b1448b4485db5bdc8abbc971">1 - MCP集成模式（推荐）</h1>
    <div class="lead">如何使用MCP集成模式来使用UCAgent。</div>
	<h2 id="mcp-集成推荐集成code-agent">MCP 集成（推荐）集成Code Agent</h2>
<p>基于 MCP 的外部编程 CLI 协作方式。该模式能与所有支持 MCP-Server 调用的 LLM 客户端进行协同验证，例如：Cherry Studio、Claude Code、 Gemini-CLI、VS Code Copilot、Qwen-Code等。
平常使用是直接使用<code>make</code>命令的，要看详细命令可参考<a href="../ucagent/introduce.md/#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a>，也可以直接查看项目根目录的<code>Makefile</code>文件。</p>
<ul>
<li>
<p>准备RTL和对应的SPEC文档放入<code>examples/{dut}</code>文件夹。<code>{dut}</code>是模块的名称，比如<code>Adder</code>，如果是<code>Adder</code>，目录则为<code>examples/Adder</code>。</p>
</li>
<li>
<p>打包RTL，将文档放入工作目录并且启动 MCP server：<code>make mcp_{dut}</code>，<code>{dut}</code>为对应的模块。此处如果使用的<code>Adder</code>，则命令为<code>make mcp_Adder</code></p>
</li>
<li>
<p>在支持 MCP client 的应用中配置 JSON：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#204a87;font-weight:bold">&#34;mcpServers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#204a87;font-weight:bold">&#34;unitytest&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>			<span style="color:#204a87;font-weight:bold">&#34;httpUrl&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;http://localhost:5000/mcp&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>			<span style="color:#204a87;font-weight:bold">&#34;timeout&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">10000</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div></li>
<li>
<p>启动应用：此处使用的Qwen Code，在<code>UCAgent/output</code>启动qwen,然后输入提示词。</p>
</li>
<li>
<p>输入提示词：</p>
</li>
</ul>
<blockquote>
<p>请通过工具<code>RoleInfo</code>获取你的角色信息和基本指导，然后完成任务。工具<code>ReadTextFile</code>读取文件。你需要在当前工作目录进行文件操作，不要超出该目录。</p></blockquote>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7735a0965a81b3fff45d8f9c0238a813">2 - 直接使用模式</h1>
    <div class="lead">直接使用方式、各个选项参数、TUI界面和FAQ说明。</div>
	<h2 id="直接使用">直接使用</h2>
<p>基于本地 CLI 和大模型的使用方式。需要准备好 OpenAI 兼容的 API 和嵌入模型 API。</p>
<h3 id="使用环境变量配置推荐">使用环境变量配置（推荐）</h3>
<p>配置文件内容：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># OpenAI兼容的API配置</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">openai</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">model_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(OPENAI_MODEL: Qwen/Qwen3-Coder-30B-A3B-Instruct)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 模型名称</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(OPENAI_API_KEY: YOUR_API_KEY)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># API密钥</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_base</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(OPENAI_API_BASE: http://10.156.154.242:8000/v1)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># API基础URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># 向量嵌入模型配置</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># 用于文档搜索和记忆功能，不需要可通过 --no-embed-tools 关闭</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">embed</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">model_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(EMBED_MODEL: Qwen/Qwen3-Embedding-0.6B)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型名称</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(EMBED_OPENAI_API_KEY: YOUR_API_KEY)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型API密钥</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_base</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;$(EMBED_OPENAI_API_BASE: http://10.156.154.242:8001/v1)&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型API URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dims</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">4096</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入维度</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>UCAgent 的配置文件支持 Bash 风格的环境变量占位：<code>$(VAR: default)</code>。加载时会用当前环境变量 <code>VAR</code> 的值替换；若未设置，则使用 <code>default</code>。</p>
<ul>
<li>例如在内置配置 <code>vagent/setting.yaml</code> 中：
<ul>
<li><code>openai.model_name: &quot;$(OPENAI_MODEL: &lt;your_chat_model_name&gt;)&quot;</code></li>
<li><code>openai.openai_api_key: &quot;$(OPENAI_API_KEY: [your_api_key])&quot;</code></li>
<li><code>openai.openai_api_base: &quot;$(OPENAI_API_BASE: http://&lt;your_chat_model_url&gt;/v1)&quot;</code></li>
<li><code>embed.model_name: &quot;$(EMBED_MODEL: &lt;your_embedding_model_name&gt;)&quot;</code></li>
<li>也支持其他提供商：<code>model_type</code> 可选 <code>openai</code>、<code>anthropic</code>、<code>google_genai</code>（详见 <code>vagent/setting.yaml</code>）。</li>
</ul>
</li>
</ul>
<p>你可以仅通过导出环境变量完成模型与端点切换，而无需改动配置文件。</p>
<p>示例：设置聊天模型与端点</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 指定聊天模型（OpenAI 兼容）</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">OPENAI_MODEL</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Qwen/Qwen3-Coder-30B-A3B-Instruct&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 指定 API Key 与 Base（按你的服务商填写）</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">OPENAI_API_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;你的API密钥&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">OPENAI_API_BASE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;https://你的-openai-兼容端点/v1&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 可选：嵌入模型（若使用检索/记忆等功能）</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">EMBED_MODEL</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;text-embedding-3-large&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">EMBED_OPENAI_API_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#000">$OPENAI_API_KEY</span><span style="color:#4e9a06">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">export</span> <span style="color:#000">EMBED_OPENAI_API_BASE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#000">$OPENAI_API_BASE</span><span style="color:#4e9a06">&#34;</span>
</span></span></code></pre></div><p>然后按前述命令启动 UCAgent 即可。若要长期生效，可将上述 export 追加到你的默认 shell 启动文件（例如 bash: <code>~/.bashrc</code>，zsh: <code>~/.zshrc</code>，fish: <code>~/.config/fish/config.fish</code>），保存后重新打开终端或手动加载。</p>
<h3 id="使用-configyaml-来配置">使用 config.yaml 来配置</h3>
<ul>
<li>在项目根目录创建并编辑 <code>config.yaml</code> 文件，配置 AI 模型和嵌入模型：</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># OpenAI兼容的API配置</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">openai</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_base</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_openai_api_base_url&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># API基础URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">model_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_model_name&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 模型名称，如 gpt-4o-mini</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_openai_api_key&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># API密钥</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># 向量嵌入模型配置</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># 用于文档搜索和记忆功能，不需要可通过 --no-embed-tools 关闭</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">embed</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">model_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_embed_model_name&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型名称</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_base</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_openai_api_base_url&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型API URL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">openai_api_key</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_api_key&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入模型API密钥</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dims</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;your_embed_model_dims&gt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 嵌入维度，如 1536</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h3 id="开始使用">开始使用</h3>
<ul>
<li>第一步和 MCP 模式相同，准备 RTL 和对应的 SPEC 文档放入<code>examples/{dut}</code>文件夹。<code>{dut}</code>是模块的名称，如果是<code>Adder</code>，目录则为<code>examples/Adder</code>。</li>
<li>第二步开始就不同了，打包 RTL，将文档放入工作目录并启动 UCAgent TUI：<code>make test_{dut}</code>，<code>{dut}</code>为对应的模块。若使用 <code>Adder</code>，命令为 <code>make test_Adder</code>（可在 <code>Makefile</code> 查看全部目标）。该命令会：
<ul>
<li>将 <code>examples/{dut}</code> 下文件拷贝到 <code>output/{dut}</code>（含 .v/.sv/.md/.py 等）</li>
<li>执行 <code>python3 ucagent.py output/ {dut} --config config.yaml -s -hm --tui -l</code></li>
<li>启动带 TUI 的 UCAgent，并自动进入任务循环（loop）</li>
</ul>
</li>
</ul>
<p>提示：验证产物默认写入 <code>output/unity_test/</code>，若需更改可通过 CLI 的 <code>--output</code> 参数指定目录名。</p>
<h3 id="直接用-cli-启动不经-makefile">直接用 CLI 启动（不经 Makefile）</h3>
<ul>
<li>未安装命令时（项目内运行）：
<ul>
<li><code>python3 ucagent.py output/ Adder --config config.yaml -s -hm --tui -l</code></li>
</ul>
</li>
<li>安装为命令后：
<ul>
<li><code>ucagent output/ Adder --config config.yaml -s -hm --tui -l</code></li>
</ul>
</li>
</ul>
<p>参数对齐 <code>vagent/cli.py</code>：</p>
<ul>
<li><code>workspace</code>：工作区目录（此处为 <code>output/</code>）</li>
<li><code>dut</code>：DUT 名称（工作区子目录名，如 <code>Adder</code>）</li>
<li>常用可选项：
<ul>
<li><code>--tui</code> 启动终端界面</li>
<li><code>-l/--loop --loop-msg &quot;...&quot;</code> 启动后立即进入循环并注入提示</li>
<li><code>-s/--stream-output</code> 实时输出</li>
<li><code>-hm/--human</code> 进入人工可干预模式（在阶段间可暂停）</li>
<li><code>--no-embed-tools</code> 如不需要检索/记忆工具</li>
<li><code>--skip/--unskip</code> 跳过/取消跳过阶段（可多次传入）</li>
</ul>
</li>
</ul>
<h3 id="常用-tui-命令速查直接使用模式">常用 TUI 命令速查（直接使用模式）</h3>
<ul>
<li>列出工具：<code>tool_list</code></li>
<li>阶段检查：<code>tool_invoke Check timeout=0</code></li>
<li>查看日志：<code>tool_invoke StdCheck lines=-1</code>（-1 表示所有行）</li>
<li>终止检查：<code>tool_invoke KillCheck</code></li>
<li>阶段完成：<code>tool_invoke Complete timeout=0</code></li>
<li>运行用例：
<ul>
<li>全量：<code>tool_invoke RunTestCases target='' timeout=0</code></li>
<li>单测函数：<code>tool_invoke RunTestCases target='tests/test_checker.py::test_run' timeout=120 return_line_coverage=True</code></li>
<li>过滤：<code>tool_invoke RunTestCases target='-k add or mul'</code></li>
</ul>
</li>
<li>阶段跳转：<code>tool_invoke GoToStage index=2</code>（索引从 0 开始）</li>
<li>继续执行：<code>loop 继续修复 ALU754 的未命中分支并重试用例</code></li>
</ul>
<p>建议的最小可写权限（只允许生成验证产物处可写）：</p>
<ul>
<li>仅允许 <code>unity_test/</code> 与 <code>unity_test/tests/</code> 可写：
<ul>
<li><code>add_un_write_path *</code></li>
<li><code>del_un_write_path unity_test</code></li>
<li><code>del_un_write_path unity_test/tests</code></li>
</ul>
</li>
</ul>
<h3 id="常见问题与提示">常见问题与提示</h3>
<ul>
<li>检查卡住/无输出：
<ul>
<li>先 <code>tool_invoke StdCheck lines=-1</code> 查看全部日志；必要时 <code>tool_invoke KillCheck</code>；修复后重试 <code>tool_invoke Check</code>。</li>
</ul>
</li>
<li>没找到工具名：
<ul>
<li>先执行 <code>tool_list</code> 确认可用工具；若缺失，检查是否在 TUI 模式、是否禁用了嵌入工具（通常无关）。</li>
</ul>
</li>
<li>产物位置：
<ul>
<li>默认在 <code>workspace/output_dir</code>，即本页示例为 <code>output/unity_test/</code>。</li>
</ul>
</li>
</ul>
<h3 id="相关文档">相关文档</h3>
<ul>
<li>人机协同的完整流程与示例，见<a href="/mlvp/docs/ucagent/usage/assit/">人机协同验证</a></li>
<li>MCP 集成（如 gemini-cli / qwen code），见<a href="/mlvp/docs/ucagent/usage/mcp/">MCP集成模式</a></li>
<li>TUI 界面与操作详解，见<a href="/mlvp/docs/ucagent/usage/tui/">TUI</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fbd7beae096d8cd3a81879ce0d6d9759">3 - 人机协同验证</h1>
    <div class="lead">如何与AI配合来验证模块。</div>
	<p>UCAgent 支持在验证过程中进行人机协同，允许用户暂停 AI 执行，人工干预验证过程，然后继续 AI 执行。这种模式适用于需要精细控制或复杂决策的场景。</p>
<p><strong>协同流程：</strong></p>
<ol>
<li>
<p>暂停 AI 执行：</p>
<ul>
<li>在直接接入 LLM 模式下：按 <code>Ctrl+C</code> 暂停。</li>
<li>在 Code Agent 协同模式下：根据 Agent 的暂停方式（如 Gemini-cli 使用 <code>Esc</code>）暂停。</li>
</ul>
</li>
<li>
<p>人工干预：</p>
<ul>
<li>手动编辑文件、测试用例或配置。</li>
<li>使用交互命令进行调试或调整。</li>
</ul>
</li>
<li>
<p>阶段控制：</p>
<ul>
<li>使用 <code>tool_invoke Check</code> 检查当前阶段状态。</li>
<li>使用 <code>tool_invoke Complete</code> 标记阶段完成并进入下一阶段。</li>
</ul>
</li>
<li>
<p>继续执行：</p>
<ul>
<li>使用 <code>loop [prompt]</code> 命令继续 AI 执行，并可提供额外的提示信息。</li>
<li>在 Code Agent 模式下，通过 Agent 的控制台输入提示。</li>
</ul>
</li>
<li>
<p>权限管理：</p>
<ul>
<li>可使用 <code>add_un_write_path</code>，<code>del_un_write_path</code> 等命令设置文件写权限，控制 AI 是否可以编辑特定文件。</li>
<li>适用于直接接入 LLM 或强制使用 UCAgent 文件工具。</li>
</ul>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-56fd437efd30e85d1af55e127ea86585">4 - 参数说明</h1>
    <div class="lead">各个选项参数说明。</div>
	<h2 id="参数与选项">参数与选项</h2>
<p>UCAgent 的使用方式为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ucagent &lt;workspace&gt; &lt;dut_name&gt; <span style="color:#ce5c00;font-weight:bold">{</span>参数与选项<span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="输入">输入</h3>
<ul>
<li>workspace：工作目录：
<ul>
<li>workspace/&lt;DUT_DIR&gt;: 待测设计（DUT），即由 picker 导出的 DUT 对应的 Python 包 &lt;DUT_DIR&gt;，例如：Adder</li>
<li>workspace/&lt;DUT_DIR&gt;/README.md: 以自然语言描述的该 DUT 验证需求与目标</li>
<li>workspace/&lt;DUT_DIR&gt;/*.md: 其他参考文件</li>
<li>workspace/&lt;DUT_DIR&gt;/*.v/sv/scala: 源文件，用于进行 bug 分析</li>
<li>其他与验证相关的文件（例如：提供的测试实例、需求说明等）</li>
</ul>
</li>
<li>dut_name: 待测设计的名称，即 &lt;DUT_DIR&gt;，例如：Adder</li>
</ul>
<h3 id="输出">输出</h3>
<ul>
<li>workspace：工作目录：
<ul>
<li>workspace/Guide_Doc：验证过程中所遵循的各项要求与指导文档</li>
<li>workspace/uc_test_report： 生成的 Toffee-test 测试报告</li>
<li>workspace/unity_test/tests： 自动生成的测试用例</li>
<li>workspace/*.md： 生成的各类文档，包括 Bug 分析、检查点记录、验证计划、验证结论等</li>
</ul>
</li>
</ul>
<blockquote>
<p>对输出的详细解释可以参考<a href="/mlvp/docs/ucagent/introduce/#%e8%af%a6%e7%bb%86%e8%be%93%e5%87%ba">快速开始的9</a></p></blockquote>
<h3 id="位置参数">位置参数</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">参数</th>
          <th style="text-align: center">必填</th>
          <th style="text-align: left">说明</th>
          <th style="text-align: left">示例</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">workspace</td>
          <td style="text-align: center">是</td>
          <td style="text-align: left">运行代理的工作目录</td>
          <td style="text-align: left">./output</td>
      </tr>
      <tr>
          <td style="text-align: left">dut</td>
          <td style="text-align: center">是</td>
          <td style="text-align: left">DUT 名称（工作目录下的子目录名）</td>
          <td style="text-align: left">Adder</td>
      </tr>
  </tbody>
</table>
<h3 id="执行与交互">执行与交互</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--stream-output</td>
          <td style="text-align: left">-s</td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">关闭</td>
          <td style="text-align: left">流式输出到控制台</td>
      </tr>
      <tr>
          <td style="text-align: left">--human</td>
          <td style="text-align: left">-hm</td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">关闭</td>
          <td style="text-align: left">启动时进入人工输入/断点模式</td>
      </tr>
      <tr>
          <td style="text-align: left">--interaction-mode</td>
          <td style="text-align: left">-im</td>
          <td style="text-align: left">standard/enhanced/advanced</td>
          <td style="text-align: left">standard</td>
          <td style="text-align: left">交互模式；enhanced 含规划与记忆管理，advanced 含自适应策略</td>
      </tr>
      <tr>
          <td style="text-align: left">--tui</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">关闭</td>
          <td style="text-align: left">启用终端 TUI 界面</td>
      </tr>
      <tr>
          <td style="text-align: left">--loop</td>
          <td style="text-align: left">-l</td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">关闭</td>
          <td style="text-align: left">启动后立即进入主循环（可配合 --loop-msg），适用于直接使用模式</td>
      </tr>
      <tr>
          <td style="text-align: left">--loop-msg</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">str</td>
          <td style="text-align: left">空</td>
          <td style="text-align: left">进入循环时注入的首条消息</td>
      </tr>
      <tr>
          <td style="text-align: left">--seed</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">int</td>
          <td style="text-align: left">随机</td>
          <td style="text-align: left">随机种子（未指定则自动随机）</td>
      </tr>
      <tr>
          <td style="text-align: left">--sys-tips</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">str</td>
          <td style="text-align: left">空</td>
          <td style="text-align: left">覆盖系统提示词</td>
      </tr>
  </tbody>
</table>
<h3 id="配置与模板">配置与模板</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--config</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">配置文件路，如&ndash;config config.yaml径</td>
      </tr>
      <tr>
          <td style="text-align: left">--template-dir</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">自定义模板目录</td>
      </tr>
      <tr>
          <td style="text-align: left">--template-overwrite</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">渲染模板到 workspace 时允许覆盖已存在内容</td>
      </tr>
      <tr>
          <td style="text-align: left">--output</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">dir</td>
          <td style="text-align: left">unity_test</td>
          <td style="text-align: left">输出目录名</td>
      </tr>
      <tr>
          <td style="text-align: left">--override</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">A.B.C=VALUE[,X.Y=VAL2,&hellip;]</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">以“点号路径=值”覆盖配置；字符串需引号，其它按 Python 字面量解析</td>
      </tr>
      <tr>
          <td style="text-align: left">--gen-instruct-file</td>
          <td style="text-align: left">-gif</td>
          <td style="text-align: left">file</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">在 workspace 下生成外部 Agent 的引导文件（存在则覆盖）</td>
      </tr>
      <tr>
          <td style="text-align: left">--guid-doc-path</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">使用自定义 Guide_Doc 目录（默认使用内置拷贝）</td>
      </tr>
  </tbody>
</table>
<h3 id="计划与-todo">计划与 ToDo</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--force-todo</td>
          <td style="text-align: left">-fp</td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">在 standard 模式下也启用 ToDo 工具，并在每轮提示中附带 ToDo 信息</td>
      </tr>
      <tr>
          <td style="text-align: left">--use-todo-tools</td>
          <td style="text-align: left">-utt</td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">启用 ToDo 相关工具（不限于 standard 模式）</td>
      </tr>
  </tbody>
</table>
<h3 id="todo-工具概览与示例--给模型规划的小模型关闭大模型自行打开">ToDo 工具概览与示例  给模型规划的，小模型关闭，大模型自行打开</h3>
<p>说明：ToDo 工具是用于提升模型规划能力的工具，用户可以利用它来自定义模型的ToDo列表。目前该功能对模型能力要求较高，默认处于关闭状态。</p>
<p>启用条件：任意模式下使用 <code>--use-todo-tools</code>；或在 standard 模式用 <code>--force-todo</code> 强制启用并在每轮提示中附带 ToDo 信息。</p>
<p>约定与限制：步骤索引为 1-based；steps 数量需在 2~20；notes 与每个 step 文本长度 ≤ 100；超限会拒绝并返回错误字符串。</p>
<p>工具总览</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">工具类</th>
          <th style="text-align: left">调用名</th>
          <th style="text-align: left">主要功能</th>
          <th style="text-align: left">参数</th>
          <th style="text-align: left">返回</th>
          <th style="text-align: left">关键约束/行为</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">CreateToDo</td>
          <td style="text-align: left">CreateToDo</td>
          <td style="text-align: left">新建当前 ToDo（覆盖旧 ToDo）</td>
          <td style="text-align: left">task_description: str; steps: List[str]</td>
          <td style="text-align: left">成功提示 + 摘要字符串</td>
          <td style="text-align: left">校验步数与长度；成功后写入并返回摘要</td>
      </tr>
      <tr>
          <td style="text-align: left">CompleteToDoSteps</td>
          <td style="text-align: left">CompleteToDoSteps</td>
          <td style="text-align: left">将指定步骤标记为完成，可附加备注</td>
          <td style="text-align: left">completed_steps: List[int]=[]; notes: str=&quot;&quot;</td>
          <td style="text-align: left">成功提示（完成数）+ 摘要</td>
          <td style="text-align: left">仅未完成步骤生效；无 ToDo 时提示先创建；索引越界忽略</td>
      </tr>
      <tr>
          <td style="text-align: left">UndoToDoSteps</td>
          <td style="text-align: left">UndoToDoSteps</td>
          <td style="text-align: left">撤销步骤完成状态，可附加备注</td>
          <td style="text-align: left">steps: List[int]=[]; notes: str=&quot;&quot;</td>
          <td style="text-align: left">成功提示（撤销数）+ 摘要</td>
          <td style="text-align: left">仅已完成步骤生效；无 ToDo 时提示先创建；索引越界忽略</td>
      </tr>
      <tr>
          <td style="text-align: left">ResetToDo</td>
          <td style="text-align: left">ResetToDo</td>
          <td style="text-align: left">重置/清空当前 ToDo</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">重置成功提示</td>
          <td style="text-align: left">清空步骤与备注，随后可重新创建</td>
      </tr>
      <tr>
          <td style="text-align: left">GetToDoSummary</td>
          <td style="text-align: left">GetToDoSummary</td>
          <td style="text-align: left">获取当前 ToDo 摘要</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">摘要字符串 / 无 ToDo 提示</td>
          <td style="text-align: left">只读，不修改状态</td>
      </tr>
      <tr>
          <td style="text-align: left">ToDoState</td>
          <td style="text-align: left">ToDoState</td>
          <td style="text-align: left">获取状态短语（看板/状态栏）</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">状态描述字符串</td>
          <td style="text-align: left">动态显示：无 ToDo/已完成/进度统计等</td>
      </tr>
  </tbody>
</table>
<p>调用示例（以 MCP/内部工具调用为例，参数为 JSON 格式）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CreateToDo&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>		<span style="color:#204a87;font-weight:bold">&#34;task_description&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;为 Adder 核心功能完成验证闭环&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>		<span style="color:#204a87;font-weight:bold">&#34;steps&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>			<span style="color:#4e9a06">&#34;阅读 README 与规格，整理功能点&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>			<span style="color:#4e9a06">&#34;定义检查点与通过标准&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>			<span style="color:#4e9a06">&#34;生成首批单元测试&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>			<span style="color:#4e9a06">&#34;运行并修复失败用例&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>			<span style="color:#4e9a06">&#34;补齐覆盖率并输出报告&#34;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>	<span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;CompleteToDoSteps&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>	<span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;completed_steps&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">],</span> <span style="color:#204a87;font-weight:bold">&#34;notes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;初始问题排查完成，准备补充用例&#34;</span> <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;UndoToDoSteps&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;steps&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">],</span> <span style="color:#204a87;font-weight:bold">&#34;notes&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;第二步需要微调检查点&#34;</span> <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ResetToDo&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{}</span> <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;GetToDoSummary&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{}</span> <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">&#34;tool&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;ToDoState&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">&#34;args&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{}</span> <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="外部与嵌入工具">外部与嵌入工具</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--ex-tools</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">name1[,name2&hellip;]</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">逗号分隔的外部工具类名列表（如：SqThink）</td>
      </tr>
      <tr>
          <td style="text-align: left">--no-embed-tools</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">禁用内置的检索/记忆类嵌入工具</td>
      </tr>
  </tbody>
</table>
<h3 id="日志">日志</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--log</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">启用日志</td>
      </tr>
      <tr>
          <td style="text-align: left">--log-file</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">自动</td>
          <td style="text-align: left">日志输出文件（未指定则使用默认）</td>
      </tr>
      <tr>
          <td style="text-align: left">--msg-file</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path</td>
          <td style="text-align: left">自动</td>
          <td style="text-align: left">消息日志文件（未指定则使用默认）</td>
      </tr>
  </tbody>
</table>
<h3 id="mcp-server">MCP Server</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--mcp-server</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">启动 MCP Server（含文件工具）</td>
      </tr>
      <tr>
          <td style="text-align: left">--mcp-server-no-file-tools</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">启动 MCP Server（无文件操作工具）</td>
      </tr>
      <tr>
          <td style="text-align: left">--mcp-server-host</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">host</td>
          <td style="text-align: left">127.0.0.1</td>
          <td style="text-align: left">Server 监听地址</td>
      </tr>
      <tr>
          <td style="text-align: left">--mcp-server-port</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">int</td>
          <td style="text-align: left">5000</td>
          <td style="text-align: left">Server 端口</td>
      </tr>
  </tbody>
</table>
<h3 id="阶段控制与安全">阶段控制与安全</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--force-stage-index</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">int</td>
          <td style="text-align: left">0</td>
          <td style="text-align: left">强制从指定阶段索引开始</td>
      </tr>
      <tr>
          <td style="text-align: left">--skip</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">int（可多次）</td>
          <td style="text-align: left">[]</td>
          <td style="text-align: left">跳过指定阶段索引，可重复提供</td>
      </tr>
      <tr>
          <td style="text-align: left">--unskip</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">int（可多次）</td>
          <td style="text-align: left">[]</td>
          <td style="text-align: left">取消跳过指定阶段索引，可重复提供</td>
      </tr>
      <tr>
          <td style="text-align: left">--no-write / &ndash;nw</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">path1 path2 &hellip;</td>
          <td style="text-align: left">无</td>
          <td style="text-align: left">限制写入目标列表；必须位于 workspace 内且存在</td>
      </tr>
  </tbody>
</table>
<h3 id="版本与检查">版本与检查</h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left">选项</th>
          <th style="text-align: left">简写</th>
          <th style="text-align: left">取值/类型</th>
          <th style="text-align: left">默认值</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">--check</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left">否</td>
          <td style="text-align: left">检查默认配置、语言目录、模板与 Guide_Doc 是否存在后退出</td>
      </tr>
      <tr>
          <td style="text-align: left">--version</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">flag</td>
          <td style="text-align: left"></td>
          <td style="text-align: left">输出版本并退出</td>
      </tr>
  </tbody>
</table>
<h3 id="示例">示例</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python3 ucagent.py ./output Adder <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  -s <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  -hm <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  -im enhanced <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --tui <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  -l <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --loop-msg <span style="color:#4e9a06">&#39;start verification&#39;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --seed <span style="color:#0000cf;font-weight:bold">12345</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --sys-tips <span style="color:#4e9a06">&#39;按规范完成Adder的验证&#39;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --config config.yaml <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --template-dir ./templates <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --template-overwrite <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --output unity_test <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --override <span style="color:#4e9a06">&#39;conversation_summary.max_tokens=16384,...&#39;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --use-todo-tools <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --ex-tools <span style="color:#4e9a06">&#39;SqThink,AnotherTool&#39;</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --no-embed-tools <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --log <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --log-file ./output/ucagent.log <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --msg-file ./output/ucagent.msg <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --mcp-server-no-file-tools <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --mcp-server-host 127.0.0.1 <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --mcp-server-port <span style="color:#0000cf;font-weight:bold">5000</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --force-stage-index <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --skip <span style="color:#0000cf;font-weight:bold">5</span> --skip <span style="color:#0000cf;font-weight:bold">7</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --unskip <span style="color:#0000cf;font-weight:bold">6</span> <span style="color:#4e9a06">\
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06"></span>  --nw ./output/Adder ./output/unity_test
</span></span></code></pre></div><ul>
<li>位置参数
<ul>
<li>./output：workspace 工作目录</li>
<li>Adder：dut 子目录名</li>
</ul>
</li>
<li>执行与交互
<ul>
<li>-s：流式输出</li>
<li>-hm：启动即人工可介入</li>
<li>-im enhanced：交互模式为增强（含规划与记忆）</li>
<li>--tui：启用 TUI</li>
<li>--loop/&ndash;loop-msg：启动后立即进入循环并注入首条消息</li>
<li>--seed 12345：固定随机种子</li>
<li>--sys-tips：自定义系统提示</li>
</ul>
</li>
<li>配置与模板
<ul>
<li>--config config.yaml：从<code>config.yaml</code>加载项目配置</li>
<li>--template-dir ./templates：指定模板目录为<code>./templates</code></li>
<li>--template-overwrite：渲染模板时允许覆盖</li>
<li>--output unity_test：输出目录名<code>unity_test</code></li>
<li>--override &lsquo;&hellip;&rsquo;: 覆盖配置键值（点号路径=值，多项用逗号分隔；字符串需内层引号，整体用单引号包裹以保留引号），示例里设置了会话摘要上限、启用裁剪、文档语言为“中文”、模型名为 gpt-4o-mini</li>
<li>-gif/--gen-instruct-file GEMINI.md：在 <code>&lt;workspace&gt;/GEMINI.md</code> 下生成外部协作引导文件</li>
<li>--guid-doc-path ./output/Guide_Doc：自定义 Guide_Doc 目录为<code>./output/Guide_Doc</code></li>
</ul>
</li>
<li>计划与 ToDo
<ul>
<li>--use-todo-tools：启用 ToDo 工具及强制附带 ToDo 信息</li>
</ul>
</li>
<li>外部与嵌入工具
<ul>
<li>--ex-tools &lsquo;SqThink,AnotherTool&rsquo;：启用外部工具<code>SqThink,AnotherTool</code></li>
<li>--no-embed-tools：禁用内置嵌入检索/记忆工具</li>
</ul>
</li>
<li>日志
<ul>
<li>--log：开启日志文件</li>
<li>--log-file ./output/ucagent.log：指定日志输出文件为<code>./output/ucagent.log</code></li>
<li>--msg-file ./output/ucagent.msg：指定消息日志文件为<code>./output/ucagent.msg</code></li>
</ul>
</li>
<li>MCP Server
<ul>
<li>--mcp-server-no-file-tools：启动 MCP（无文件操作工具）</li>
<li>--mcp-server-host：Server 监听地址为<code>127.0.0.1</code></li>
<li>--mcp-server-port：Server 监听端口为<code>5000</code></li>
</ul>
</li>
<li>阶段控制与安全
<ul>
<li>--force-stage-index 2：从阶段索引 2 开始</li>
<li>--skip 5 --skip 7：跳过阶段5和阶段7</li>
<li>--unskip 7：取消跳过阶段7</li>
<li>--nw ./output/Adder ./output/unity_test：限制仅<code>./output/Adder</code>和<code>./output/unity_test</code>路径可写</li>
</ul>
</li>
<li>说明
<ul>
<li>--check 与 --version 会直接退出，未与运行组合使用</li>
<li>--mcp-server 与 --mcp-server-no-file-tools 二选一；此处选了后者带路径参数（如 --template-dir/--guid-doc-path/&ndash;nw 的路径）需实际存在，否则会报错</li>
<li>--override 字符串值务必带引号，并整体用单引号包住以避免 shell 吃掉引号（示例写法已处理）</li>
</ul>
</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5fdb5ae128eebcc1e92c02708d6ec432">5 - TUI</h1>
    <div class="lead">tui界面的组成与操作说明。</div>
	<h2 id="tui界面与操作">TUI（界面与操作）</h2>
<p>UCAgent 自带基于 urwid 的终端界面（TUI），用于在本地交互式观察任务进度、消息流与控制台输出，并直接输入命令（如进入/退出循环、切换模式、执行调试命令等）。</p>
<h3 id="界面组成">界面组成</h3>
<p><img src="tui-part.png" alt="tui界面组成"></p>
<ul>
<li>
<p>Mission 面板（左侧）</p>
<ul>
<li>阶段列表：显示当前任务的阶段（索引、标题、失败数、耗时）。颜色含义：
<ul>
<li>绿色：已完成阶段</li>
<li>红色：当前进行阶段</li>
<li>黄色：被跳过的阶段（显示“skipped”）</li>
</ul>
</li>
<li>Changed Files：近期修改文件（含修改时间与相对时间，如“3m ago”）。较新的文件以绿色显示。</li>
<li>Tools Call：工具调用状态与计数。忙碌中的工具会以黄色高亮（如 SqThink(2)）。</li>
<li>Deamon Commands：后台运行的 demo 命令列表（带开始时间与已运行时长）。</li>
</ul>
</li>
<li>
<p>Status 面板（右上）</p>
<ul>
<li>显示 API 与代理状态摘要，以及当前面板尺寸参数（便于调节布局时参考）。</li>
</ul>
</li>
<li>
<p>Messages 面板（右上中）</p>
<ul>
<li>实时消息流（模型回复、工具输出、系统提示）。</li>
<li>支持焦点与滚动控制，标题会显示“当前/总计”的消息定位。例如：Messages (123/456)。</li>
</ul>
</li>
<li>
<p>Console（底部）</p>
<ul>
<li>Output：命令与系统输出区域，支持分页浏览。</li>
<li>Input：命令输入行（默认提示符 “(UnityChip) ”）。提供历史、补全、忙碌提示等。</li>
</ul>
</li>
</ul>
<p>提示：界面每秒自动刷新一次（不影响输入）。当消息或输出过长时，会进入分页或手动滚动模式。</p>
<h3 id="操作与快捷键">操作与快捷键</h3>
<ul>
<li>Enter：执行当前输入命令；若输入为空会重复上一次命令；输入 q/Q/exit/quit 退出 TUI。</li>
<li>Esc：
<ul>
<li>若正在浏览 Messages 的历史，退出滚动并返回末尾；</li>
<li>若 Output 正在分页查看，退出分页；</li>
<li>否则聚焦到底部输入框。</li>
</ul>
</li>
<li>Tab：命令补全；再次按 Tab 可分批显示更多可选项。</li>
<li>Shift+Right：清空 Console Output。</li>
<li>Shift+Up / Shift+Down：在 Messages 中向上/向下移动焦点（浏览历史）。</li>
<li>Ctrl+Up / Ctrl+Down：增/减 Console 输出区域高度。</li>
<li>Ctrl+Left / Ctrl+Right：减/增 Mission 面板宽度。</li>
<li>Shift+Up / Shift+Down（另一路径）：调整 Status 面板高度（最小 3，最大 100）。</li>
<li>Up / Down：
<ul>
<li>若 Output 在分页模式，Up/Down 用于翻页；</li>
<li>否则用于命令历史导航（将历史命令放入输入行，可编辑后回车执行）。</li>
</ul>
</li>
</ul>
<p>分页模式提示：当 Output 进入分页浏览时，底部标题会提示 “Up/Down: scroll, Esc: exit”，Esc 退出分页并返回输入状态。</p>
<h3 id="命令与用法">命令与用法</h3>
<ul>
<li>普通命令：直接输入并回车，例如 loop、tui、help 等（由内部调试器处理）。</li>
<li>历史命令：在输入行为空时按 Enter，将重复执行上一条命令。</li>
<li>清屏：输入 clear 并回车，仅清空 Output（不影响消息记录）。</li>
<li>演示/后台命令：命令末尾添加 &amp; 将在后台运行，完成后会在 Output 区域提示结束；当前后台命令可通过 list_demo_cmds 查看。</li>
<li>直接执行系统/危险命令：以 ! 前缀执行（例如 !loop），该模式执行后优先滚动到最新输出。</li>
<li>列出后台命令：list_demo_cmds 显示正在运行的 demo 命令列表与开始时间。</li>
</ul>
<h4 id="消息配置message_config">消息配置（message_config）</h4>
<ul>
<li>作用：在运行中查看/调整消息裁剪策略，控制历史保留与 LLM 输入 token 上限。</li>
<li>命令：
<ul>
<li>message_config 查看当前配置</li>
<li>message_config <key> <value> 设置配置项</li>
</ul>
</li>
<li>可配置项：
<ul>
<li>max_keep_msgs：保留的历史消息条数（影响会话记忆窗口）</li>
<li>max_token：进入模型前的消息裁剪 token 上限（影响开销/截断）</li>
</ul>
</li>
<li>示例：
<ul>
<li>message_config</li>
<li>message_config max_keep_msgs 8</li>
<li>message_config max_token 4096</li>
</ul>
</li>
</ul>
<p>其他说明</p>
<ul>
<li>自动补全：支持命令名与部分参数的补全；候选项过多时分批显示，可多次按 Tab 查看剩余项。</li>
<li>忙碌提示：命令执行期间，输入框标题会轮转显示 (wait.), (wait..), (wait&hellip;)，表示正在处理。</li>
<li>消息焦点：当未手动滚动时，消息焦点自动跟随最新消息；进入手动滚动后，会保持当前位置，直至按 Esc 或滚动至末尾。</li>
<li>错误容错：若某些 UI 操作异常（如终端不支持某些控制序列），TUI 会尽量回退到安全状态继续运行。</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-496947e48f69f9f9e929fe92771d84e0">6 - FAQ</h1>
    <div class="lead">常见问题与解答。</div>
	<h2 id="faq">FAQ</h2>
<ul>
<li>模型切换：在 <code>config.yaml</code> 改 <code>openai.model_name</code></li>
<li>验证过程中出现错误怎么办：使用 <code>Ctrl+C</code> 进入交互模式，通过 <code>status</code> 查看当前状态，使用 <code>help</code> 获取调试命令。</li>
<li>Check 失败：先 <code>ReadTextFile</code> 阅读 reference_files；再按返回信息修复，循环 RunTestCases → Check</li>
<li>自定义阶段：修改 <code>vagent/lang/zh/config/default.yaml</code> 的 <code>stage</code>；或用 <code>--override</code> 临时覆盖</li>
<li>添加工具：<code>vagent/tools/</code> 下新建类，继承 <code>UCTool</code>，运行时 <code>--ex-tools YourTool</code></li>
<li>MCP 连接失败：检查端口/防火墙，改 <code>--mcp-server-port</code>；无嵌入可加 <code>--no-embed-tools</code></li>
<li>只读保护：通过 <code>--no-write/--nw</code> 指定路径限制写入（必须位于 workspace 内）</li>
</ul>
<h3 id="为什么快速启动找不到configyaml定制流程时找不到configyaml">为什么快速启动找不到config.yaml/定制流程时找不到config.yaml?</h3>
<ul>
<li>使用pip 安装后并没有<code>config.yaml</code>那个文件，所以在快速启动的<a href="/mlvp/docs/ucagent/introduce/#%e5%91%bd%e4%bb%a4">启动 MCP Server</a>没有加<code>--config config.yaml</code>这个选项。</li>
<li>可以通过在工作目录添加<code>config.yaml</code>文件并且加上<code>--config config.yaml</code>参数来启动；也可以使用克隆仓库来使用UCAgent的方式来解决。</li>
</ul>
<h3 id="运行中如何调整消息窗口与-token-上限">运行中如何调整消息窗口与 token 上限？</h3>
<ul>
<li>在 TUI 输入：<code>message_config</code> 查看当前配置；</li>
<li>设置：<code>message_config max_keep_msgs 8</code> 或 <code>message_config max_token 4096</code>；</li>
<li>作用范围：影响会话历史裁剪与送入 LLM 的最大 token 上限（通过 Summarization/Trim 节点生效）。</li>
</ul>
<h3 id="文档中的-ck-bug-要改吗">文档中的 “CK bug” 要改吗？</h3>
<ul>
<li>是。术语统一为 “TC bug”。同时确保 bug 文档里的 <code>&lt;TC-*&gt;</code> 能匹配失败用例（文件/类/用例名）。</li>
</ul>
<h3 id="为什么找不到-writetextfile-工具">为什么找不到 WriteTextFile 工具？</h3>
<ul>
<li>该工具已移除。请改用 <code>EditTextFile</code>（支持 overwrite/append/replace 三种模式）或其他文件工具（Copy/Move/Delete 等）。</li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">BOSC</span></span><span class="td-footer__all_rights_reserved">保留所有权利</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/mlvp/js/main.min.8bdc707530d61dee3a6fd659f8a422c05d2e2319377a8710175451ca21fa83b0.js" integrity="sha256-i9xwdTDWHe46b9ZZ&#43;KQiwF0uIxk3eocQF1RRyiH6g7A=" crossorigin="anonymous"></script>
<script src='/mlvp/js/prism.js'></script>
<script src='/mlvp/js/tabpane-persist.js'></script>

  </body>
</html>
