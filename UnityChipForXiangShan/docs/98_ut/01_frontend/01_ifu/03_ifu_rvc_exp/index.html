<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/UnityChipForXiangShan/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/UnityChipForXiangShan/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/UnityChipForXiangShan/favicons/android-192x192.png" sizes="192x192">

<title>RVCExpander | 万众一芯之香山处理器</title>
<meta name="description" content="子模块：RVCExpander简介 RVCExpander是IFU的子模块，负责对传入的指令进行指令扩展，并解码计算非法信息。
该模块接收的输入量是两个：一条RVC指令或者RVI指令；CSR对fs.status的使能情况。
输出量也是两个：输入指令对应的RVI指令；RVC指令是否非法。
指令扩展 如果是RVI指令，则无需扩展。
否则对RVC指令，按照手册的约定进行扩展。
非法指令判断 RVI指令永远判断为合法。
对于RVC指令的判定，详细内容参阅20240411的RISCV手册的26.8节表格列出的指令条件。
功能点和测试点 功能点1 指令扩展 RVCExpander负责接收预译码器拼接的指令码，并进行指令扩展，如果是16位RVC指令，需要按照RISCV手册的约定完成扩展
对此，我们需要随机生成RVI指令和RVC指令，送入预译码器：
序号 名称 描述 1.1 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 功能点2 非法指令判断 RVCExpander在解析指令时，如发现指令违反了手册的约定，则需要判定该指令非法
对此，我们需要随机生成非法指令送入RVI中，并检测RVCExpander对合法位的校验；同时，我们还需要校验合法指令是否会被误判为非法指令：
此外，需要判定C.fp指令在CSR未使能fs.status的情况下，能否将这类指令判定为非法。
序号 名称 描述 2.1 常规非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 测试点汇总 序号 功能 名称 描述 1.1 指令扩展 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 指令扩展 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 2.1 非法指令判断 非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 非法指令判断 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 RVC扩展辅助阅读材料 为方便参考模型的书写，在这里根据20240411版本的手册内容整理了部分指令扩展的思路。
对于RVC指令来说，op = instr(1, 0)；funct = instr(15, 13)">
<meta property="og:title" content="RVCExpander" />
<meta property="og:description" content="子模块：RVCExpander简介 RVCExpander是IFU的子模块，负责对传入的指令进行指令扩展，并解码计算非法信息。
该模块接收的输入量是两个：一条RVC指令或者RVI指令；CSR对fs.status的使能情况。
输出量也是两个：输入指令对应的RVI指令；RVC指令是否非法。
指令扩展 如果是RVI指令，则无需扩展。
否则对RVC指令，按照手册的约定进行扩展。
非法指令判断 RVI指令永远判断为合法。
对于RVC指令的判定，详细内容参阅20240411的RISCV手册的26.8节表格列出的指令条件。
功能点和测试点 功能点1 指令扩展 RVCExpander负责接收预译码器拼接的指令码，并进行指令扩展，如果是16位RVC指令，需要按照RISCV手册的约定完成扩展
对此，我们需要随机生成RVI指令和RVC指令，送入预译码器：
序号 名称 描述 1.1 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 功能点2 非法指令判断 RVCExpander在解析指令时，如发现指令违反了手册的约定，则需要判定该指令非法
对此，我们需要随机生成非法指令送入RVI中，并检测RVCExpander对合法位的校验；同时，我们还需要校验合法指令是否会被误判为非法指令：
此外，需要判定C.fp指令在CSR未使能fs.status的情况下，能否将这类指令判定为非法。
序号 名称 描述 2.1 常规非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 测试点汇总 序号 功能 名称 描述 1.1 指令扩展 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 指令扩展 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 2.1 非法指令判断 非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 非法指令判断 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 RVC扩展辅助阅读材料 为方便参考模型的书写，在这里根据20240411版本的手册内容整理了部分指令扩展的思路。
对于RVC指令来说，op = instr(1, 0)；funct = instr(15, 13)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xs-mlvp.github.io/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/03_ifu_rvc_exp/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-12-30T18:42:07+08:00" />
<meta itemprop="name" content="RVCExpander">
<meta itemprop="description" content="子模块：RVCExpander简介 RVCExpander是IFU的子模块，负责对传入的指令进行指令扩展，并解码计算非法信息。
该模块接收的输入量是两个：一条RVC指令或者RVI指令；CSR对fs.status的使能情况。
输出量也是两个：输入指令对应的RVI指令；RVC指令是否非法。
指令扩展 如果是RVI指令，则无需扩展。
否则对RVC指令，按照手册的约定进行扩展。
非法指令判断 RVI指令永远判断为合法。
对于RVC指令的判定，详细内容参阅20240411的RISCV手册的26.8节表格列出的指令条件。
功能点和测试点 功能点1 指令扩展 RVCExpander负责接收预译码器拼接的指令码，并进行指令扩展，如果是16位RVC指令，需要按照RISCV手册的约定完成扩展
对此，我们需要随机生成RVI指令和RVC指令，送入预译码器：
序号 名称 描述 1.1 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 功能点2 非法指令判断 RVCExpander在解析指令时，如发现指令违反了手册的约定，则需要判定该指令非法
对此，我们需要随机生成非法指令送入RVI中，并检测RVCExpander对合法位的校验；同时，我们还需要校验合法指令是否会被误判为非法指令：
此外，需要判定C.fp指令在CSR未使能fs.status的情况下，能否将这类指令判定为非法。
序号 名称 描述 2.1 常规非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 测试点汇总 序号 功能 名称 描述 1.1 指令扩展 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 指令扩展 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 2.1 非法指令判断 非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 非法指令判断 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 RVC扩展辅助阅读材料 为方便参考模型的书写，在这里根据20240411版本的手册内容整理了部分指令扩展的思路。
对于RVC指令来说，op = instr(1, 0)；funct = instr(15, 13)">
<meta itemprop="dateModified" content="2024-12-30T18:42:07+08:00" />
<meta itemprop="wordCount" content="908">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="RVCExpander"/>
<meta name="twitter:description" content="子模块：RVCExpander简介 RVCExpander是IFU的子模块，负责对传入的指令进行指令扩展，并解码计算非法信息。
该模块接收的输入量是两个：一条RVC指令或者RVI指令；CSR对fs.status的使能情况。
输出量也是两个：输入指令对应的RVI指令；RVC指令是否非法。
指令扩展 如果是RVI指令，则无需扩展。
否则对RVC指令，按照手册的约定进行扩展。
非法指令判断 RVI指令永远判断为合法。
对于RVC指令的判定，详细内容参阅20240411的RISCV手册的26.8节表格列出的指令条件。
功能点和测试点 功能点1 指令扩展 RVCExpander负责接收预译码器拼接的指令码，并进行指令扩展，如果是16位RVC指令，需要按照RISCV手册的约定完成扩展
对此，我们需要随机生成RVI指令和RVC指令，送入预译码器：
序号 名称 描述 1.1 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 功能点2 非法指令判断 RVCExpander在解析指令时，如发现指令违反了手册的约定，则需要判定该指令非法
对此，我们需要随机生成非法指令送入RVI中，并检测RVCExpander对合法位的校验；同时，我们还需要校验合法指令是否会被误判为非法指令：
此外，需要判定C.fp指令在CSR未使能fs.status的情况下，能否将这类指令判定为非法。
序号 名称 描述 2.1 常规非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 测试点汇总 序号 功能 名称 描述 1.1 指令扩展 RVI指令保留 构造RVI指令传入，检查保留情况 1.2 指令扩展 RVC指令扩展 构造RVC指令传入，按手册检查扩展结果 2.1 非法指令判断 非法指令测试 随机构造非法RVC指令传入，检查判断结果 2.2 非法指令判断 合法指令测试 随机构造合法RVC指令传入，检查判断结果 2.3 C.fp指令测试 CSR未使能fs.status的情况下，C.fp指令应该为非法 RVC扩展辅助阅读材料 为方便参考模型的书写，在这里根据20240411版本的手册内容整理了部分指令扩展的思路。
对于RVC指令来说，op = instr(1, 0)；funct = instr(15, 13)"/>
<link rel="preload" href="/UnityChipForXiangShan/scss/main.min.28dee116d76198cd41791ec8d9adf684b9621dd93c371caac3e05359925d5d62.css" as="style" integrity="sha256-KN7hFtdhmM1BeR7I2a32hLliHdk8Nxyqw&#43;BTWZJdXWI=" crossorigin="anonymous">
<link href="/UnityChipForXiangShan/scss/main.min.28dee116d76198cd41791ec8d9adf684b9621dd93c371caac3e05359925d5d62.css" rel="stylesheet" integrity="sha256-KN7hFtdhmM1BeR7I2a32hLliHdk8Nxyqw&#43;BTWZJdXWI=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/UnityChipForXiangShan/css/prism.css"/>

    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-4Z2ZY6ZE84');
    </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />

<script>
    $(document).ready(function() {
        $('a[name="multi-lang-toggle"]').on('click', function(event) {
            var language = $(this).attr('lang');
            var codeDiv = $(this).closest('.highlight');
            var preNodes = codeDiv.find('pre');
            preNodes.each(function(index, preNode) {
                if ($(preNode).attr("name").toLowerCase().indexOf(language.toLowerCase()) !== -1) {
                    preNode.style.display = 'block';
                } else {
                    preNode.style.display = 'none';
                }
            });
            var alist = codeDiv.find('a[name="multi-lang-toggle"]');
            alist.each(function(index, aNode) {
                if ($(aNode).attr('lang').toLowerCase() === language.toLowerCase()) {
                    aNode.style.fontWeight = 'bold';
                } else {
                    aNode.style.fontWeight = 'normal';
                }
            });
        })
        $(this).find('pre[name^="group-lang-code-"]').each(function(index, preNode) {
            if (preNode.style.display !== 'none') {
                var language = $(preNode).attr("name").replace('group-lang-code-', '');
                var alist = $(this).closest('.highlight').find('a[name="multi-lang-toggle"]');
                alist.each(function(index, aNode) {
                    if ($(aNode).attr('lang').toLowerCase() === language.toLowerCase()) {
                        aNode.style.fontWeight = 'bold';
                    } else {
                        aNode.style.fontWeight = 'normal';
                    }
                });
            }
        });
    });
</script>
    
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/UnityChipForXiangShan/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">万众一芯之香山处理器</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/UnityChipForXiangShan/en/">English</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/UnityChipForXiangShan/offline-search-index.32010ff8b939e68d3adb110ce1fe31ce.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/UnityChipForXiangShan/offline-search-index.32010ff8b939e68d3adb110ce1fe31ce.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/UnityChipForXiangShan/en/">English</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-unitychipforxiangshandocs-li">
  <a href="/UnityChipForXiangShan/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-unitychipforxiangshandocs"><span class="">进度概述</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs00_unitychip_for_xiangshan-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs00_unitychip_for_xiangshan-check"/>
  <label for="m-unitychipforxiangshandocs00_unitychip_for_xiangshan-check"><a href="/UnityChipForXiangShan/docs/00_unitychip_for_xiangshan/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs00_unitychip_for_xiangshan"><span class="">目标验证单元</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs01_verfiy_env-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs01_verfiy_env-check"/>
  <label for="m-unitychipforxiangshandocs01_verfiy_env-check"><a href="/UnityChipForXiangShan/docs/01_verfiy_env/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs01_verfiy_env"><span class="">准备验证环境</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs02_run_test-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs02_run_test-check"/>
  <label for="m-unitychipforxiangshandocs02_run_test-check"><a href="/UnityChipForXiangShan/docs/02_run_test/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs02_run_test"><span class="">运行测试</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-unitychipforxiangshandocs03_add_test-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test-check"><a href="/UnityChipForXiangShan/docs/03_add_test/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs03_add_test"><span class="">添加测试</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs03_add_test01_build_script-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test01_build_script-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test01_build_script-check"><a href="/UnityChipForXiangShan/docs/03_add_test/01_build_script/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs03_add_test01_build_script"><span class="">添加编译脚本</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs03_add_test02_build_env-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test02_build_env-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test02_build_env-check"><a href="/UnityChipForXiangShan/docs/03_add_test/02_build_env/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs03_add_test02_build_env"><span class="">构建测试环境</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs03_add_test03_add_test-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test03_add_test-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test03_add_test-check"><a href="/UnityChipForXiangShan/docs/03_add_test/03_add_test/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs03_add_test03_add_test"><span class="">添加测试用例</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs03_add_test04_cover_line-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test04_cover_line-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test04_cover_line-check"><a href="/UnityChipForXiangShan/docs/03_add_test/04_cover_line/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs03_add_test04_cover_line"><span class="">代码覆盖率</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs03_add_test05_cover_func-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs03_add_test05_cover_func-check"/>
  <label for="m-unitychipforxiangshandocs03_add_test05_cover_func-check"><a href="/UnityChipForXiangShan/docs/03_add_test/05_cover_func/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs03_add_test05_cover_func"><span class="">功能覆盖率</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs06_join_us-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs06_join_us-check"/>
  <label for="m-unitychipforxiangshandocs06_join_us-check"><a href="/UnityChipForXiangShan/docs/06_join_us/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs06_join_us"><span class="">如何参与本项目</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs08_template_pr-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs08_template_pr-check"/>
  <label for="m-unitychipforxiangshandocs08_template_pr-check"><a href="/UnityChipForXiangShan/docs/08_template_pr/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs08_template_pr"><span class="">模板-PR</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs09_template_issue-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs09_template_issue-check"/>
  <label for="m-unitychipforxiangshandocs09_template_issue-check"><a href="/UnityChipForXiangShan/docs/09_template_issue/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs09_template_issue"><span class="">模板-ISSUE</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs10_template_ut_readme-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs10_template_ut_readme-check"/>
  <label for="m-unitychipforxiangshandocs10_template_ut_readme-check"><a href="/UnityChipForXiangShan/docs/10_template_ut_readme/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs10_template_ut_readme"><span class="">模板-UT-README</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs95_api-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs95_api-check"/>
  <label for="m-unitychipforxiangshandocs95_api-check"><a href="/UnityChipForXiangShan/docs/95_api/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs95_api"><span class="">常用API</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs96_others-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs96_others-check"/>
  <label for="m-unitychipforxiangshandocs96_others-check"><a href="/UnityChipForXiangShan/docs/96_others/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs96_others"><span class="">其他</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs97_constraint-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs97_constraint-check"/>
  <label for="m-unitychipforxiangshandocs97_constraint-check"><a href="/UnityChipForXiangShan/docs/97_constraint/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs97_constraint"><span class="">必要规范</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-unitychipforxiangshandocs98_ut-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut-check" checked/>
  <label for="m-unitychipforxiangshandocs98_ut-check"><a href="/UnityChipForXiangShan/docs/98_ut/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut"><span class="">验证文档</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-unitychipforxiangshandocs98_ut01_frontend-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend-check" checked/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut01_frontend"><span class="">Frontend</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu-check" checked/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu"><span class="">IFU</span></a></label>
  
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu02_f3predecoder-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu02_f3predecoder-check"/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu02_f3predecoder-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/02_f3predecoder/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu02_f3predecoder"><span class="">F3PreDecoder</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu05_frontend_trigger-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu05_frontend_trigger-check"/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu05_frontend_trigger-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/05_frontend_trigger/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu05_frontend_trigger"><span class="">FrontendTrigger</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu04_pred_checker-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu04_pred_checker-check"/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu04_pred_checker-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/04_pred_checker/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu04_pred_checker"><span class="">PredChecker</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu01_predecode-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu01_predecode-check"/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu01_predecode-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/01_predecode/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu01_predecode"><span class="">PreDecode</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu03_ifu_rvc_exp-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu03_ifu_rvc_exp-check" checked/>
  <label for="m-unitychipforxiangshandocs98_ut01_frontend01_ifu03_ifu_rvc_exp-check"><a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/03_ifu_rvc_exp/" class="align-left ps-0  active td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs98_ut01_frontend01_ifu03_ifu_rvc_exp"><span class="td-sidebar-nav-active-item">RVCExpander</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut02_backend-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut02_backend-check"/>
  <label for="m-unitychipforxiangshandocs98_ut02_backend-check"><a href="/UnityChipForXiangShan/docs/98_ut/02_backend/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut02_backend"><span class="">Backend</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut03_memblock-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut03_memblock-check"/>
  <label for="m-unitychipforxiangshandocs98_ut03_memblock-check"><a href="/UnityChipForXiangShan/docs/98_ut/03_memblock/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut03_memblock"><span class="">Mem Block</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs98_ut04_misc-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs98_ut04_misc-check"/>
  <label for="m-unitychipforxiangshandocs98_ut04_misc-check"><a href="/UnityChipForXiangShan/docs/98_ut/04_misc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-unitychipforxiangshandocs98_ut04_misc"><span class="">Misc</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-unitychipforxiangshandocs99_maintain-li">
  <input type="checkbox" id="m-unitychipforxiangshandocs99_maintain-check"/>
  <label for="m-unitychipforxiangshandocs99_maintain-check"><a href="/UnityChipForXiangShan/docs/99_maintain/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-unitychipforxiangshandocs99_maintain"><span class="">维护者</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/XS-MLVP/UnityChipForXiangShan/documents/tree/main/content/zh-cn/docs/98_UT/01_frontend/01_ifu/03_ifu_rvc_exp.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
  <a href="https://github.com/XS-MLVP/UnityChipForXiangShan/documents/edit/main/content/zh-cn/docs/98_UT/01_frontend/01_ifu/03_ifu_rvc_exp.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
  <a href="https://github.com/XS-MLVP/UnityChipForXiangShan/documents/new/main/content/zh-cn/docs/98_UT/01_frontend/01_ifu?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
  <a href="https://github.com/XS-MLVP/UnityChipForXiangShan/documents/issues/new?title=RVCExpander" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
  <a href="https://github.com/XS-MLVP/UnityChipForXiangShan//issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交项目问题</a>
  <a id="print" href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/_print/"><i class="fa-solid fa-print fa-fw"></i> 整节打印</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#指令扩展">指令扩展</a></li>
    <li><a href="#非法指令判断">非法指令判断</a></li>
    <li><a href="#功能点和测试点">功能点和测试点</a>
      <ul>
        <li><a href="#功能点1-指令扩展">功能点1 指令扩展</a></li>
        <li><a href="#功能点2-非法指令判断">功能点2 非法指令判断</a></li>
      </ul>
    </li>
    <li><a href="#测试点汇总-a-idrvc_expander_functions-a">测试点汇总 <a id="rvc_expander_functions"> </a></a></li>
    <li><a href="#rvc扩展辅助阅读材料">RVC扩展辅助阅读材料</a>
      <ul>
        <li><a href="#op--b00">op = b'00'</a></li>
        <li><a href="#op--b01">op = b'01'</a></li>
        <li><a href="#op--b10">op = b'10'</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/UnityChipForXiangShan/docs/">进度概述</a></li>
  <li class="breadcrumb-item">
    <a href="/UnityChipForXiangShan/docs/98_ut/">验证文档</a></li>
  <li class="breadcrumb-item">
    <a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/">Frontend</a></li>
  <li class="breadcrumb-item">
    <a href="/UnityChipForXiangShan/docs/98_ut/01_frontend/01_ifu/">IFU</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    RVCExpander</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>RVCExpander</h1>
	
	<header class="article-meta">
		
  </header>
	<div class="ifu-ctx">
<h1 id="子模块rvcexpander简介">子模块：RVCExpander简介</h1>
<p>RVCExpander是IFU的子模块，负责对传入的指令进行指令扩展，并解码计算非法信息。</p>
<p>该模块接收的输入量是两个：一条RVC指令或者RVI指令；CSR对fs.status的使能情况。</p>
<p>输出量也是两个：输入指令对应的RVI指令；RVC指令是否非法。</p>
<h2 id="指令扩展">指令扩展</h2>
<p>如果是RVI指令，则无需扩展。</p>
<p>否则对RVC指令，按照手册的约定进行扩展。</p>
<h2 id="非法指令判断">非法指令判断</h2>
<p>RVI指令永远判断为合法。</p>
<p>对于RVC指令的判定，详细内容参阅20240411的RISCV手册的26.8节表格列出的指令条件。</p>
<h2 id="功能点和测试点">功能点和测试点</h2>
<h3 id="功能点1-指令扩展">功能点1 指令扩展</h3>
<p>RVCExpander负责接收预译码器拼接的指令码，并进行指令扩展，如果是16位RVC指令，需要按照RISCV手册的约定完成扩展</p>
<p>对此，我们需要随机生成RVI指令和RVC指令，送入预译码器：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.1</td>
<td>RVI指令保留</td>
<td>构造RVI指令传入，检查保留情况</td>
</tr>
<tr>
<td>1.2</td>
<td>RVC指令扩展</td>
<td>构造RVC指令传入，按手册检查扩展结果</td>
</tr>
</tbody>
</table>
<h3 id="功能点2-非法指令判断">功能点2 非法指令判断</h3>
<p>RVCExpander在解析指令时，如发现指令违反了手册的约定，则需要判定该指令非法</p>
<p>对此，我们需要随机生成非法指令送入RVI中，并检测RVCExpander对合法位的校验；同时，我们还需要校验合法指令是否会被误判为非法指令：</p>
<p>此外，需要判定C.fp指令在CSR未使能fs.status的情况下，能否将这类指令判定为非法。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.1</td>
<td>常规非法指令测试</td>
<td>随机构造非法RVC指令传入，检查判断结果</td>
</tr>
<tr>
<td>2.2</td>
<td>合法指令测试</td>
<td>随机构造合法RVC指令传入，检查判断结果</td>
</tr>
<tr>
<td>2.3</td>
<td>C.fp指令测试</td>
<td>CSR未使能fs.status的情况下，C.fp指令应该为非法</td>
</tr>
</tbody>
</table>
<h2 id="测试点汇总-a-idrvc_expander_functions-a">测试点汇总 <a id="rvc_expander_functions"> </a></h2>
<table>
<thead>
<tr>
<th>序号</th>
<th>功能</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.1</td>
<td>指令扩展</td>
<td>RVI指令保留</td>
<td>构造RVI指令传入，检查保留情况</td>
</tr>
<tr>
<td>1.2</td>
<td>指令扩展</td>
<td>RVC指令扩展</td>
<td>构造RVC指令传入，按手册检查扩展结果</td>
</tr>
<tr>
<td>2.1</td>
<td>非法指令判断</td>
<td>非法指令测试</td>
<td>随机构造非法RVC指令传入，检查判断结果</td>
</tr>
<tr>
<td>2.2</td>
<td>非法指令判断</td>
<td>合法指令测试</td>
<td>随机构造合法RVC指令传入，检查判断结果</td>
</tr>
<tr>
<td>2.3</td>
<td>C.fp指令测试</td>
<td>CSR未使能fs.status的情况下，C.fp指令应该为非法</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="rvc扩展辅助阅读材料">RVC扩展辅助阅读材料</h2>
<p>为方便参考模型的书写，在这里根据20240411版本的手册内容整理了部分指令扩展的思路。</p>
<p>对于RVC指令来说，op = instr(1, 0)；funct = instr(15, 13)</p>
<table>
<thead>
<tr>
<th>op\funct</th>
<th>000</th>
<th>001</th>
<th>010</th>
<th>011</th>
<th>100</th>
<th>101</th>
<th>110</th>
<th>111</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>addi4spn</td>
<td>fld</td>
<td>lw</td>
<td>ld</td>
<td>lbu<br>lhu;lh<br>sb;sh</td>
<td>fsd</td>
<td>sw</td>
<td>sd</td>
</tr>
<tr>
<td>01</td>
<td>addi</td>
<td>addiw</td>
<td>li</td>
<td>lui<br>addi16sp<br>zcmop</td>
<td>ARITHs<br>zcb</td>
<td>j</td>
<td>beqz</td>
<td>bnez</td>
</tr>
<tr>
<td>10</td>
<td>slli</td>
<td>fldsp</td>
<td>lwsp</td>
<td>ldsp</td>
<td>jr;mv<br>ebreak<br>jalr;add</td>
<td>fsdsp</td>
<td>fwsp</td>
<td>sdsp</td>
</tr>
</tbody>
</table>
<p>在开始阅读各指令的扩展规则时，需要了解一些RVC扩展的前置知识，比如：</p>
<p>rd&rsquo;, rs1&rsquo;和rs2&rsquo;寄存器：受限于16位指令的位宽限制，这几个寄存器只有3位来表示，他们对应到x8~x15寄存器。</p>
<h3 id="op--b00">op = b'00'</h3>
<h4 id="funct--b000-addi4spn">funct = b'000&rsquo;: ADDI4SPN</h4>
<image src="Caddi4spn.png" alter="addi4spn" width=600px />
<p>该指令将一个0扩展的非0立即数加到栈指针寄存器x2上，并将结果写入rd'</p>
<p>其中，nzuimm[5:4|9:6|2|3]的含义是：</p>
<p>这条指令的第12至11位是立即数的5至4位，第10至7位是立即数的9至6位，第6位是立即数的第2位，第7位是立即数的第3位。</p>
<p>这条指令最终扩展成为<strong>addi rd&rsquo;, x2, nzuimm[9:2]</strong></p>
<p>addi的格式形如：| imm[11:0] | rs1 | 000 | rd | 0010011 |</p>
<p>注意，该指令的立即数为0的时候，不合法。</p>
<h4 id="funct--b001-fld">funct = b'001&rsquo;: fld</h4>
<image src="Cfld.png" alter="fld" width=600px />
<p>该指令从内存加载一个双精度浮点数到rd&rsquo;寄存器。</p>
<p>offset的低三位是0，高位进行了0扩展。</p>
<p>这条指令最终扩展成为<strong>fld rd′,offset(rs1′)</strong></p>
<p>fld的格式形如： | imm[11:0] | rs1 | 011 | rd | 0000111 |</p>
<p>注意：在昆明湖环境下，该指令要求CSR使能fs.status，也即入参fsIsOff为假。</p>
<h4 id="funct--b010-lw">funct = b'010&rsquo;: lw</h4>
<image src="Cfld.png" alter="lw" width=600px />
<p>该指令从内存加载一个32位的值到rd&rsquo;寄存器。</p>
<p>offset的低两位是0，高位进行了0扩展。</p>
<p>这条指令最终扩展成为<strong>lw rd′,offset(rs1′)</strong></p>
<p>lw的格式形如： | imm[11:0] | rs1 | 010 | rd | 0000011 |</p>
<h4 id="funct--b011-ldsp">funct = b'011&rsquo;: ldsp</h4>
<image src="Cfld.png" alter="ld" width=600px />
<p>该指令从内存加载一个64位的值到rd&rsquo;寄存器。</p>
<p>offset的低两位是0，高位进行了0扩展。</p>
<p>这条指令最终扩展成为<strong>ld rd′,offset(rs1′)</strong></p>
<p>ld的格式形如： | imm[11:0] | rs1 | 011 | rd | 0000011 |</p>
<h4 id="funct--b100-zcb-extensions-1">funct = b'100&rsquo;: zcb extensions 1</h4>
<p>在RVC指令中，这部分对应的是zcb扩展中的5条指令：lbu,lhu,lh,sb,sh</p>
<p>在zcb扩展中，进一步地取instr[12:10]作为zcb扩展的指令码，我们记作funct_zcb</p>
<h5 id="funct_zcb--b000-lbu">funct_zcb = b'000&rsquo;: lbu</h5>
<p>| 100 | 000 | rs1&rsquo; | uimm[0|1] | rd&rsquo; | 00 |</p>
<p>这个指令从rs1&rsquo;+uimm的地址读取一字节，用0扩展并并加载到rd&rsquo;中。</p>
<p>最终翻译为 lb rd&rsquo;, uimm(rs1')</p>
<p>lb指令的格式形如：| imm[11:0] | rs1 | 000 | rd | 0000011 |</p>
<h5 id="funct_zcb--b001-instr6-0--lhu">funct_zcb = b'001&rsquo;, instr[6] =0 : lhu</h5>
<p>| 100 | 001 | rs1&rsquo; | 0 | uimm[1] | rd&rsquo; | 00 |</p>
<p>这个指令从地址rs1&rsquo; + uimm读取半word，用0扩展加载到rd&rsquo;中。</p>
<p>最终翻译为 lhu rd&rsquo;, uimm(rs1')</p>
<p>lhu指令的格式形如：| imm[11:0] | rs1 | 101 | rd | 0000011 |</p>
<h5 id="funct_zcb--b001-instr6-1--lh">funct_zcb = b'001&rsquo;, instr[6] =1 : lh</h5>
<p>| 100 | 001 | rs1&rsquo; | 1 | uimm[1] | rd&rsquo; | 00 |</p>
<p>这个指令从地址rs1&rsquo; + uimm读取半word，符号扩展并加载到rd&rsquo;中。</p>
<p>最终翻译为 lh rd&rsquo;, uimm(rs1')</p>
<p>lh指令的格式形如：| imm[11:0] | rs1 | 001 | rd | 0000011 |</p>
<h5 id="funct_zcb--b010-sb">funct_zcb = b'010&rsquo;： sb</h5>
<p>| 100 | 010 | rs1&rsquo; | uimm[0 | 1] | rd&rsquo; | 00 |</p>
<p>这个指令把rs2&rsquo;的低字节存储到地址rs1&rsquo; + uimm指示的内存地址中。</p>
<p>最终翻译为 sb rs2, uimm(rs1')</p>
<p>RVI中sb指令的格式形如：|imm[11:5] | rs2 | rs1 | 000 | imm[4:0] | 0100011 |</p>
<h5 id="funct_zcb--b011-sh">funct_zcb = b'011&rsquo;: sh</h5>
<p>| 100 | 011 | rs1&rsquo; | 0 | uimm[1] | rd&rsquo; | 00 |</p>
<p>这个指令把rs2&rsquo;的低半字存储到地址rs1&rsquo; + uimmz指示的内存地址中。</p>
<p>最终翻译为 sh rd&rsquo;, uimm(rs1')</p>
<p>sh指令的格式形如：|imm[11:5] | rs2 | rs1 | 001 | imm[4:0] | 0100011 |</p>
<h4 id="funct--b101-fsd">funct = b'101&rsquo;: fsd</h4>
<image src="Cfsd.png" alter="fsd" width=600px />
<p>fsd将rs2&rsquo;中的双精度浮点数存储到rs1&rsquo; + imm指示的内存区域</p>
<p>该指令的立即数低3位为0，同时进行了0符号扩展。</p>
<p>最终这个指令将被扩展为<strong>fsd rs2′, offset(rs1′)</strong></p>
<p>RVI的FSD格式形如：| imm[11:5]| rs2 | rs1 | 011 | imm[4:0] | 0100011 |</p>
<p>注意：在昆明湖环境下，该指令要求CSR使能fs.status，也即入参fsIsOff为假。</p>
<h4 id="funct--b110-sw">funct = b'110&rsquo;: sw</h4>
<image src="Cfsd.png" alter="sw" width=600px />
<p>sw将rs2&rsquo;中的一个字存储到rs1&rsquo; + imm指示的内存区域</p>
<p>该指令的立即数低2位为0，同时进行了0符号扩展。</p>
<p>最终这个指令将被扩展为<strong>sw rs2′, offset(rs1′)</strong></p>
<p>RVI的SW格式形如：| imm[11:5]| rs2 | rs1 | 010 | imm[4:0] | 0100011 |</p>
<h4 id="funct--b111-sd">funct = b'111&rsquo;: sd</h4>
<image src="Cfsd.png" alter="sd" width=600px />
<p>fsd将rs2&rsquo;中的双字存储到rs1&rsquo; + imm指示的内存区域</p>
<p>该指令的立即数低3位为0，同时进行了0符号扩展。</p>
<p>最终这个指令将被扩展为<strong>sd rs2′, offset(rs1′)</strong></p>
<p>RVI的SD格式形如：| imm[11:5]| rs2 | rs1 | 011 | imm[4:0] | 0100111 |</p>
<h3 id="op--b01">op = b'01'</h3>
<h4 id="funct--b000-addi">funct = b'000&rsquo;: addi</h4>
<image src="Caddi.png" alter="addi" width=600px />
<p>该指令将一个符号扩展的非0立即数加到rd存储的数字上，并将结果写入rd。</p>
<p>尽管手册规定立即数和rd不为0，但是立即数和rd为0的情况仍可视为合法。前者是HINT指令，而后者是NOP。</p>
<p>这条指令最终扩展成为<strong>addi rd, rd, imm</strong></p>
<p>addi的格式形如：| imm[11:0] | rs1 | 000 | rd | 0010011 |</p>
<h4 id="funct--b001-addiw">funct = b'001&rsquo;: addiw</h4>
<image src="Caddi.png" alter="addiw" width=600px />
<p>该指令的功能和addi类似，但是先计算得到32位数，然后再符号扩展至64位。</p>
<p>该指令的rd为0时非法。</p>
<p>当立即数不为0时，该指令最终扩展成为<strong>addiw, rd, rd, imm</strong></p>
<p>addiw的指令格式为| imm[11:0] | rs1 | 000 | rd | 0011011 |</p>
<p>如果立即数为0,该指令将会扩展成为sext.w rd，不过和addiw的格式是一样的，因此可以将他们归为一类。</p>
<h4 id="funct--b010-li">funct = b'010&rsquo;: li</h4>
<image src="Cli.png" alter="li" width=600px />
<p>该指令将符号扩展的立即数加载到rd中。</p>
<p>当立即数为0时，该指令为hint，可以看作合法。</p>
<p>这条指令最终扩展成为<strong>addi rd, x0, imm</strong></p>
<p>addi的格式形如：| imm[11:0] | rs1 | 000 | rd | 0010011 |</p>
<h4 id="funct--b011-luiaddi16spzcm">funct = b'011&rsquo;: lui/addi16sp/zcm</h4>
<image src="Cli.png" alter="lui" width=600px />
<p>当rd不为0且不为2时，为lui指令，可以扩展为<strong>lui rd, imm</strong></p>
<p>lui指令的格式形如： | imm[31:12] | rd | 0110111 |</p>
<p>当rd为0时，为hint，也可当作cli进行译码。</p>
<p>当rd为2时，为addi16sp指令：</p>
<image src="Caddi.png" alter="addi16sp" width=600px />
<p>扩展为<strong>addi x2, x2, nzimm[9:4]</strong></p>
<p>addi的格式形如：| imm[11:0] | rs1 | 000 | rd | 0010011 |</p>
<p>对addi16sp，立即数为0时非法。</p>
<p>此外，当第12至11位皆为0，第7位是1且第6至2位为0时，为zcmop，可以直接翻译为一个不起效的指令，比如与立即数0。</p>
<h4 id="funct--b100-arith--zcb-extension2">funct = b'100&rsquo;: arith &amp; zcb extension2</h4>
<p>在RVC指令中，这部分对应的是数学运算指令和zcb扩展中的另一部分指令，数学计算指令的对应如下：</p>
<image src="op01funct100.png" alter="arith" width=600px />
<p>其中SRLI64和SRAI64在昆明湖环境下可以不考虑。</p>
<h5 id="srli">srli</h5>
<image src="Csrli.png" alter="srli" width=600px />
<p>当funct2为00时，为srli。</p>
<p>最终可翻译为<strong>srli rd′, rd′, 64</strong></p>
<p>srli的格式形如：|0000000|shamt|rs1|101|rd|0010011|</p>
<h5 id="srai">srai</h5>
<image src="Csrli.png" alter="srai" width=600px />
<p>当funct2为01时，为srai。</p>
<p>最终可翻译为<strong>srai rd′, rd′, 64</strong></p>
<p>SRAI的格式形如：|0100000|shamt|rs1|101|rd|0010011|</p>
<h5 id="andi">andi</h5>
<image src="Candi.png" alter="andi" width=600px />
<p>该指令最终扩展为<strong>andi rd′, rd′, imm</strong></p>
<p>andi的格式形如|imm[11:0]|rs1|111|rd|0010011|</p>
<h5 id="sub">sub</h5>
<image src="Csub.png" alter="sub" width=600px />
<p>这条指令最终可以扩展为：<strong>sub rd′, rd′, rs2′</strong></p>
<p>sub指令的格式形如：|0100000|rs2|rs1|000|rd|0110011|</p>
<h5 id="xor">xor</h5>
<image src="Csub.png" alter="xor" width=600px />
<p>这条指令最终可以扩展为：<strong>xor rd′, rd′, rs2′</strong></p>
<p>xor指令的格式形如：|0000000|rs2|rs1|100|rd|0110011|</p>
<h5 id="or">or</h5>
<image src="Csub.png" alter="or" width=600px />
<p>这条指令最终可以扩展为：<strong>or rd′, rd′, rs2′</strong></p>
<p>or指令的格式形如：|0000000|rs2|rs1|110|rd|0110011|</p>
<h5 id="and">and</h5>
<image src="Csub.png" alter="and" width=600px />
<p>这条指令最终可以扩展为：<strong>and rd′, rd′, rs2′</strong></p>
<p>and指令的格式形如：|0000000|rs2|rs1|111|rd|0110011|</p>
<h5 id="subw">subw</h5>
<image src="Csub.png" alter="subw" width=600px />
<p>这条指令最终可以扩展为：<strong>subw rd′, rd′, rs2′</strong></p>
<p>subw指令的格式形如：|0100000|rs2|rs1|000|rd|0111011|</p>
<h5 id="addw">addw</h5>
<image src="Csub.png" alter="addw" width=600px />
<p>这条指令最终可以扩展为：<strong>addw rd′, rd′, rs2′</strong></p>
<p>addw指令的格式形如：|0000000|rs2|rs1|000|rd|0111011|</p>
<h5 id="mul">mul</h5>
<p>从mul开始的一部分指令属于zcb扩展。</p>
<p>zcb扩展中，当instr(12, 10) == &ldquo;111&rdquo;，且instr(6, 5)为&quot;10&quot;时，为mul指令。</p>
<p>zcb扩展中，当instr(12, 10) == &ldquo;111&rdquo;，且instr(6, 5)为&quot;11&quot;时，根据instr(4,2)，
共有000的zext.b，001的sext.b，010的zext.h，011的sext.h，100的zext.w和101的not。</p>
<image src="mul.png" alter="mul" width=600px />
<p>该指令可扩展为mul rd, rd, rs2</p>
<p>mul的格式为：|0000001|rs2|rs1|000|rd|0110011|</p>
<h5 id="zextb">zext.b</h5>
<image src="zextb.png" alter="mul" width=600px />
<p>这条指令可以翻译为：<strong>andi rd&rsquo;/rs1&rsquo;, rd&rsquo;/rs1&rsquo;, 0xff</strong></p>
<p>andi的格式形如|imm[11:0]|rs1|111|rd|0010011|</p>
<h5 id="sextb">sext.b</h5>
<image src="Csextb.png" alter="Csextb" width=600px />
<p>该指令翻译为<strong>sext.b rd, rd</strong></p>
<p>sext.b指令在RVI下形如:</p>
<image src="Isextb.png" alter="Isextb" width=600px />
<h5 id="zexth">zext.h</h5>
<image src="Czexth.png" alter="Czexth" width=600px />
<p>该指令翻译为<strong>zext.h rd, rd</strong></p>
<p>zext.h指令在RVI下形如:</p>
<image src="Izexth.png" alter="Izexth" width=600px />
<h5 id="sexth">sext.h</h5>
<image src="Csexth.png" alter="Csexth" width=600px />
<p>该指令翻译为<strong>sext.h rd, rd</strong></p>
<p>sext.h指令在RVI下形如:</p>
<image src="Isexth.png" alter="Isexth" width=600px />
<h5 id="zextw">zext.w</h5>
<image src="zextw.png" alter="zextw" width=600px />
<p>该指令等价为<strong>add.uw rd&rsquo;/rs1&rsquo;, rd&rsquo;/rs1&rsquo;, zero</strong></p>
<p>add.uw指令在RVI下形如:</p>
<image src="adduw.png" alter="adduw" width=600px />
<h5 id="not">not</h5>
<image src="not.png" alter="not" width=600px />
<p>该指令等价为<strong>xori rd&rsquo;/rs1&rsquo;, rd&rsquo;/rs1&rsquo;, -1</strong></p>
<p>xori指令在RVI下形如： | imm[11:0] | rs1| 100 | rd | 0010011 |</p>
<h4 id="funct--b101-j">funct = b'101&rsquo;: j</h4>
<image src="Cj.png" alter="j" width=600px />
<p>最终这个指令将被扩展为<strong>jal x0, offset</strong></p>
<p>jal的格式形如：| imm[20|10:1|11|19:12] | rd | 1101111 |</p>
<h4 id="funct--b110-beqz">funct = b'110&rsquo;: beqz</h4>
<image src="Cbnez.png" alter="beqz" width=600px />
<p>该指令可以扩展到<strong>beq rs1‘, x0, offset</strong></p>
<p>beq指令形如： |imm[12|10:5]|rs2|rs1|000|imm[4:1|11]|1100011|
imm[12|10:5]rs2rs1001imm[4:1|11]1100011BNE</p>
<h4 id="funct--b111-bnez">funct = b'111&rsquo;: bnez</h4>
<image src="Cbnez.png" alter="bnez" width=600px />
<p>最终这个指令将被扩展为<strong>bne rs1′, x0, offset</strong></p>
<p>bne指令形如：|imm[12|10:5]| rs2 | rs1 | 001 | imm[4:1|11] | 1100011|</p>
<h3 id="op--b10">op = b'10'</h3>
<h4 id="funct--b000-slli">funct = b'000&rsquo;: slli</h4>
<image src="Cslli.png" alter="slli" width=600px />
<p>该指令将一个符号扩展的非0立即数加到rd存储的数字上，并将结果写入rd。</p>
<p>尽管手册规定立即数和rd不为0，但是立即数和rd为0的情况仍可视为合法。前者是HINT指令，而后者是NOP。</p>
<p>这条指令最终扩展成为<strong>slli rd, rd, shamt[5:0]</strong></p>
<p>slli的格式形如：|000000|shamt|rs1|001|rd|0010011|</p>
<h4 id="funct--b001-fldsp">funct = b'001&rsquo;: fldsp</h4>
<image src="Cfldsp.png" alter="fldsp" width=600px />
<p>该指令最终扩展成为<strong>fld rd, offset(x2)</strong></p>
<p>fld的格式形如： | imm[11:0] | rs1 | 011 | rd | 0000111 |</p>
<p>该指令要求CSR使能fs.status</p>
<h4 id="funct--b010-lwsp">funct = b'010&rsquo;: lwsp</h4>
<image src="Cfldsp.png" alter="lwsp" width=600px />
<p>rd为0时非法。</p>
<p>这条指令最终扩展成为<strong>lw rd, offset(x2)</strong></p>
<p>lw的格式形如： | imm[11:0] | rs1 | 010 | rd | 0000011 |</p>
<h4 id="funct--b011-ldsp-1">funct = b'011&rsquo;: ldsp</h4>
<image src="Cfldsp.png" alter="ldsp" width=600px />
<p>rd为0时非法。</p>
<p>这条指令最终扩展成为<strong>ld rd, offset(x2)</strong></p>
<p>lw的格式形如： | imm[11:0] | rs1 | 011 | rd | 0000011 |</p>
<h4 id="funct--b100-jrmvebreakjalradd">funct = b'100&rsquo;: jr/mv/ebreak/jalr/add</h4>
<image src="op10funct100.png" alter="jrmvebreakjalradd" width=600px />
<h5 id="jr">jr</h5>
<image src="Cjr.png" alter="jr" width=600px />
<p>当rd为0时，非法。</p>
<p>该指令最终可以扩展为<strong>jalr x0, 0(rs1)</strong></p>
<p>jalr指令的格式为：|imm[11:0]|rs1|000|rd|1100111|</p>
<h5 id="mv">mv</h5>
<image src="Cmv.png" alter="mv" width=600px />
<p>rd为0时，是hint指令。</p>
<p>该指令最终可以扩展为<strong>add rd, x0, rs2</strong></p>
<p>add指令形如：|0000000|rs2|rs1|000|rd|0110011|</p>
<h5 id="ebreak">ebreak</h5>
<p>可以扩展为ebreak指令。</p>
<p>形如：|00000000000100000000000001110011|</p>
<h5 id="jalr">jalr</h5>
<image src="Cjr.png" alter="jalr" width=600px />
<p>该指令最终可以扩展为<strong>jalr x1, 0(rs1)</strong></p>
<p>jalr指令的格式为：|imm[11:0]|rs1|000|rd|1100111|</p>
<h5 id="add">add</h5>
<image src="Cmv.png" alter="mv" width=600px />
<p>该指令最终可以扩展为<strong>add rd, rd, rs2</strong></p>
<p>add指令形如：|0000000|rs2|rs1|000|rd|0110011|</p>
<h4 id="funct--b101-fsdsp">funct = b'101&rsquo;: fsdsp</h4>
<image src="Cfsdsp.png" alter="fsdsp" width=600px />
<p>这条指令最终扩展成为<strong>fsd rs2, offset(x2)</strong></p>
<p>RVI的FSD格式形如：| imm[11:5]| rs2 | rs1 | 011 | imm[4:0] | 0100011 |</p>
<p>该指令要求CSR使能fs.status</p>
<h4 id="funct--b110-swsp">funct = b'110&rsquo;: swsp</h4>
<image src="Cfsdsp.png" alter="swsp" width=600px />
<p>这条指令最终扩展成为<strong>sw rs2, offset(x2)</strong></p>
<p>RVI的SW格式形如：| imm[11:5]| rs2 | rs1 | 010 | imm[4:0] | 0100011 |</p>
<h4 id="funct--b111-sdsp">funct = b'111&rsquo;: sdsp</h4>
<image src="Cfsdsp.png" alter="sdsp" width=600px />
<p>该指令最终扩展成为<strong>sd rd, offset(x2)</strong></p>
<p>RVI的SD格式形如：| imm[11:5]| rs2 | rs1 | 011 | imm[4:0] | 0100111 |</p>
</div>
	<div class="td-page-meta__lastmod">
  最后修改 December 30, 2024: <a href="https://github.com/XS-MLVP/UnityChipForXiangShan/documents/commit/336affa8f4f05ce29cc66fb248c9d261622d553c">add checkpoint name (336affa)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">BOSC</span></span><span class="td-footer__all_rights_reserved">保留所有权利</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/UnityChipForXiangShan/js/main.min.37d14e870feb76f0f7a2a2422bae231efb0186c477999a4ab9ca7e9924ced592.js" integrity="sha256-N9FOhw/rdvD3oqJCK64jHvsBhsR3mZpKucp&#43;mSTO1ZI=" crossorigin="anonymous"></script>
<script src='/UnityChipForXiangShan/js/prism.js'></script>
<script src='/UnityChipForXiangShan/js/tabpane-persist.js'></script>

  </body>
</html>