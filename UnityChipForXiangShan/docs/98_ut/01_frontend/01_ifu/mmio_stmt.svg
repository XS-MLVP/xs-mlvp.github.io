<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1395px" preserveAspectRatio="none" style="width:837px;height:1395px;" version="1.1" viewBox="0 0 837 1395" width="837px" zoomAndPan="magnify"><defs><filter height="300%" id="fe2ez5ji93v3c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d1f3d0970d0a8cb75dd0cc01ce99c796]
class m_idle--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_idle" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="596" y="8"/><ellipse cx="611" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M611.2344,30.7031 C612.3906,30.7031 613.4844,30.2188 614.3125,29.1875 L612.8906,27.6719 C612.5,28.2188 612.0313,28.5313 611.4688,28.5313 C610.2813,28.5313 609.2656,27.3906 609.2656,24.1563 C609.2656,21 610.3281,19.8281 611.3594,19.8281 C611.9531,19.8281 612.3281,20.125 612.75,20.625 L614.1719,19.0625 C613.5,18.3125 612.5313,17.6719 611.25,17.6719 C608.8281,17.6719 606.6875,19.6406 606.6875,24.2656 C606.6875,28.9063 608.8281,30.7031 611.2344,30.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="38" x="625" y="29.232">m_idle</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="665" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="597" x2="665" y1="48" y2="48"/><!--MD5=[2f8c780d7d14b74a5c549760c8f012b4]
class m_waitLastCmt--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="63.9279" id="m_waitLastCmt" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="371.5" y="136"/><ellipse cx="390.55" cy="152" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M390.7844,158.7031 C391.9406,158.7031 393.0344,158.2188 393.8625,157.1875 L392.4406,155.6719 C392.05,156.2188 391.5813,156.5313 391.0188,156.5313 C389.8313,156.5313 388.8156,155.3906 388.8156,152.1563 C388.8156,149 389.8781,147.8281 390.9094,147.8281 C391.5031,147.8281 391.8781,148.125 392.3,148.625 L393.7219,147.0625 C393.05,146.3125 392.0813,145.6719 390.8,145.6719 C388.3781,145.6719 386.2375,147.6406 386.2375,152.2656 C386.2375,156.9063 388.3781,158.7031 390.7844,158.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="405.45" y="157.232">m_waitLastCmt</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="372.5" x2="503.5" y1="168" y2="168"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="377.5" y="184.7599">等待之前的指令提交完成</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="372.5" x2="503.5" y1="191.9279" y2="191.9279"/><!--MD5=[856b12d777f9b1f47289be21f34dcace]
class m_sendReq--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="63.9279" id="m_sendReq" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="359" y="280"/><ellipse cx="400.55" cy="296" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M400.7844,302.7031 C401.9406,302.7031 403.0344,302.2188 403.8625,301.1875 L402.4406,299.6719 C402.05,300.2188 401.5813,300.5313 401.0188,300.5313 C399.8313,300.5313 398.8156,299.3906 398.8156,296.1563 C398.8156,293 399.8781,291.8281 400.9094,291.8281 C401.5031,291.8281 401.8781,292.125 402.3,292.625 L403.7219,291.0625 C403.05,290.3125 402.0813,289.6719 400.8,289.6719 C398.3781,289.6719 396.2375,291.6406 396.2375,296.2656 C396.2375,300.9063 398.3781,302.7031 400.7844,302.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="420.45" y="301.232">m_sendReq</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="360" x2="516" y1="312" y2="312"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="365" y="328.7599">向InstrUncache模块发送请求</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="360" x2="516" y1="335.9279" y2="335.9279"/><!--MD5=[42c4daa414fa00af102e459c67e720cc]
class m_waitResp--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_waitResp" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="386.5" y="424"/><ellipse cx="401.5" cy="440" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M401.7344,446.7031 C402.8906,446.7031 403.9844,446.2188 404.8125,445.1875 L403.3906,443.6719 C403,444.2188 402.5313,444.5313 401.9688,444.5313 C400.7813,444.5313 399.7656,443.3906 399.7656,440.1563 C399.7656,437 400.8281,435.8281 401.8594,435.8281 C402.4531,435.8281 402.8281,436.125 403.25,436.625 L404.6719,435.0625 C404,434.3125 403.0313,433.6719 401.75,433.6719 C399.3281,433.6719 397.1875,435.6406 397.1875,440.2656 C397.1875,444.9063 399.3281,446.7031 401.7344,446.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="415.5" y="445.232">m_waitResp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="387.5" x2="488.5" y1="456" y2="456"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="387.5" x2="488.5" y1="464" y2="464"/><!--MD5=[68ec1ac181d7df65be30f080f03b85b8]
class m_sendTLB--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_sendTLB" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="126.5" y="552"/><ellipse cx="141.5" cy="568" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M141.7344,574.7031 C142.8906,574.7031 143.9844,574.2188 144.8125,573.1875 L143.3906,571.6719 C143,572.2188 142.5313,572.5313 141.9688,572.5313 C140.7813,572.5313 139.7656,571.3906 139.7656,568.1563 C139.7656,565 140.8281,563.8281 141.8594,563.8281 C142.4531,563.8281 142.8281,564.125 143.25,564.625 L144.6719,563.0625 C144,562.3125 143.0313,561.6719 141.75,561.6719 C139.3281,561.6719 137.1875,563.6406 137.1875,568.2656 C137.1875,572.9063 139.3281,574.7031 141.7344,574.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="155.5" y="573.232">m_sendTLB</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="224.5" y1="584" y2="584"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="224.5" y1="592" y2="592"/><!--MD5=[b9a6e8b8bbb6a02eba7c3c9ab21ec793]
class m_waitCommit--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="63.9279" id="m_waitCommit" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="196.5" y="1192"/><ellipse cx="246.75" cy="1208" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M246.9844,1214.7031 C248.1406,1214.7031 249.2344,1214.2188 250.0625,1213.1875 L248.6406,1211.6719 C248.25,1212.2188 247.7813,1212.5313 247.2188,1212.5313 C246.0313,1212.5313 245.0156,1211.3906 245.0156,1208.1563 C245.0156,1205 246.0781,1203.8281 247.1094,1203.8281 C247.7031,1203.8281 248.0781,1204.125 248.5,1204.625 L249.9219,1203.0625 C249.25,1202.3125 248.2813,1201.6719 247,1201.6719 C244.5781,1201.6719 242.4375,1203.6406 242.4375,1208.2656 C242.4375,1212.9063 244.5781,1214.7031 246.9844,1214.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="267.25" y="1213.232">m_waitCommit</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="197.5" x2="392.5" y1="1224" y2="1224"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="185" x="202.5" y="1240.7599">向Ibuffer发送错误信息后等待commit</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="197.5" x2="392.5" y1="1247.9279" y2="1247.9279"/><!--MD5=[5d8e6b6f531bc8d1ccd6a7af4c914f4d]
class m_tlbResp--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_tlbResp" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="129.5" y="680"/><ellipse cx="144.5" cy="696" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M144.7344,702.7031 C145.8906,702.7031 146.9844,702.2188 147.8125,701.1875 L146.3906,699.6719 C146,700.2188 145.5313,700.5313 144.9688,700.5313 C143.7813,700.5313 142.7656,699.3906 142.7656,696.1563 C142.7656,693 143.8281,691.8281 144.8594,691.8281 C145.4531,691.8281 145.8281,692.125 146.25,692.625 L147.6719,691.0625 C147,690.3125 146.0313,689.6719 144.75,689.6719 C142.3281,689.6719 140.1875,691.6406 140.1875,696.2656 C140.1875,700.9063 142.3281,702.7031 144.7344,702.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="158.5" y="701.232">m_tlbResp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="221.5" y1="712" y2="712"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="221.5" y1="720" y2="720"/><!--MD5=[0233749cb0e17d1d676924861a58b885]
class m_sendPMP--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_sendPMP" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="126.5" y="808"/><ellipse cx="141.5" cy="824" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M141.7344,830.7031 C142.8906,830.7031 143.9844,830.2188 144.8125,829.1875 L143.3906,827.6719 C143,828.2188 142.5313,828.5313 141.9688,828.5313 C140.7813,828.5313 139.7656,827.3906 139.7656,824.1563 C139.7656,821 140.8281,819.8281 141.8594,819.8281 C142.4531,819.8281 142.8281,820.125 143.25,820.625 L144.6719,819.0625 C144,818.3125 143.0313,817.6719 141.75,817.6719 C139.3281,817.6719 137.1875,819.6406 137.1875,824.2656 C137.1875,828.9063 139.3281,830.7031 141.7344,830.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="155.5" y="829.232">m_sendPMP</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="228.5" y1="840" y2="840"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127.5" x2="228.5" y1="848" y2="848"/><!--MD5=[8595a7fd827af60c054f7482a952b881]
class m_resendReq--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_resendReq" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="275.5" y="936"/><ellipse cx="290.5" cy="952" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M290.7344,958.7031 C291.8906,958.7031 292.9844,958.2188 293.8125,957.1875 L292.3906,955.6719 C292,956.2188 291.5313,956.5313 290.9688,956.5313 C289.7813,956.5313 288.7656,955.3906 288.7656,952.1563 C288.7656,949 289.8281,947.8281 290.8594,947.8281 C291.4531,947.8281 291.8281,948.125 292.25,948.625 L293.6719,947.0625 C293,946.3125 292.0313,945.6719 290.75,945.6719 C288.3281,945.6719 286.1875,947.6406 286.1875,952.2656 C286.1875,956.9063 288.3281,958.7031 290.7344,958.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="304.5" y="957.232">m_resendReq</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="276.5" x2="385.5" y1="968" y2="968"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="276.5" x2="385.5" y1="976" y2="976"/><!--MD5=[3ea4ab0f13eb7300a246f149f576c444]
class m_waitResendResp--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_waitResendResp" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="259.5" y="1064"/><ellipse cx="274.5" cy="1080" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M274.7344,1086.7031 C275.8906,1086.7031 276.9844,1086.2188 277.8125,1085.1875 L276.3906,1083.6719 C276,1084.2188 275.5313,1084.5313 274.9688,1084.5313 C273.7813,1084.5313 272.7656,1083.3906 272.7656,1080.1563 C272.7656,1077 273.8281,1075.8281 274.8594,1075.8281 C275.4531,1075.8281 275.8281,1076.125 276.25,1076.625 L277.6719,1075.0625 C277,1074.3125 276.0313,1073.6719 274.75,1073.6719 C272.3281,1073.6719 270.1875,1075.6406 270.1875,1080.2656 C270.1875,1084.9063 272.3281,1086.7031 274.7344,1086.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="288.5" y="1085.232">m_waitResendResp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="260.5" x2="403.5" y1="1096" y2="1096"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="260.5" x2="403.5" y1="1104" y2="1104"/><!--MD5=[140c30b3ba6435887a6c3138589dcee3]
class m_commited--><rect fill="#FEFECE" filter="url(#fe2ez5ji93v3c)" height="48" id="m_commited" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="506.5" y="1336"/><ellipse cx="521.5" cy="1352" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M521.7344,1358.7031 C522.8906,1358.7031 523.9844,1358.2188 524.8125,1357.1875 L523.3906,1355.6719 C523,1356.2188 522.5313,1356.5313 521.9688,1356.5313 C520.7813,1356.5313 519.7656,1355.3906 519.7656,1352.1563 C519.7656,1349 520.8281,1347.8281 521.8594,1347.8281 C522.4531,1347.8281 522.8281,1348.125 523.25,1348.625 L524.6719,1347.0625 C524,1346.3125 523.0313,1345.6719 521.75,1345.6719 C519.3281,1345.6719 517.1875,1347.6406 517.1875,1352.2656 C517.1875,1356.9063 519.3281,1358.7031 521.7344,1358.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="535.5" y="1357.232">m_commited</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="612.5" y1="1368" y2="1368"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="612.5" y1="1376" y2="1376"/><!--MD5=[fc16584d737d31e3d6484f81183267f9]
link m_idle to m_waitLastCmt--><path d="M597.82,56.04 C567.27,77.25 521.56,108.99 486.84,133.09 " fill="none" id="m_idle-&gt;m_waitLastCmt" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="482.66,135.99,492.3382,134.1646,486.7735,133.1477,487.7905,127.583,482.66,135.99" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="552" y="102.08">f3_req_is_mmio</text><!--MD5=[f151b91ad6a6ee2063f43b43b48921b7]
link m_waitLastCmt to m_sendReq--><path d="M438,200.16 C438,222.17 438,251.74 438,274.8 " fill="none" id="m_waitLastCmt-&gt;m_sendReq" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="438,279.91,442,270.91,438,274.91,434,270.91,438,279.91" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="439" y="246.08">is_first_instr or mmioLastCommit</text><!--MD5=[6f46dbe781340edeaad7a6148051b38c]
link m_waitLastCmt to m_waitLastCmt--><path d="M504.87,154.54 C524.38,155.01 539.5,159.49 539.5,168 C539.5,175.71 527.08,180.12 510.23,181.22 " fill="none" id="m_waitLastCmt-&gt;m_waitLastCmt" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="504.87,181.46,514.0433,185.0448,509.8648,181.2317,513.6779,177.0532,504.87,181.46" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="545.5" y="174.08">not first instr and no mmioLastCommit</text><!--MD5=[c2681d72219ac9b05abdd05268d88107]
link m_sendReq to m_waitResp--><path d="M438,344.08 C438,366.55 438,396.69 438,418.53 " fill="none" id="m_sendReq-&gt;m_waitResp" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="438,423.62,442,414.62,438,418.62,434,414.62,438,423.62" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="439" y="390.08">send finished</text><!--MD5=[fe7d550242f24cc14aa4791e279edaf9]
link m_waitResp to m_sendTLB--><path d="M386.27,451.79 C316.92,456.73 199.44,469.75 173,502 C162.96,514.25 163.43,531.92 166.54,546.81 " fill="none" id="m_waitResp-&gt;m_sendTLB" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="167.69,551.74,169.5555,542.0694,166.5615,546.869,161.762,543.875,167.69,551.74" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="174" y="518.08">receive reply from uncache and need to resend</text><!--MD5=[24e4ecac1630e0944508fe9daff5ea12]
link m_waitResp to m_waitCommit--><path d="M452.36,472.19 C466.18,496.77 485,537.18 485,575 C485,575 485,575 485,1089 C485,1122.89 486.29,1137.38 463,1162 C445.61,1180.39 422.25,1193.25 398.48,1202.24 " fill="none" id="m_waitResp-&gt;m_waitCommit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="393.72,1203.99,403.5475,1204.6376,398.4127,1202.2641,400.7861,1197.1293,393.72,1203.99" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="486" y="838.08">receive reply from uncache and needn't resend</text><!--MD5=[9fa35b25bb049df1feb36e1caf873ddd]
link m_sendTLB to m_tlbResp--><path d="M176,600.11 C176,621.03 176,651.91 176,674.38 " fill="none" id="m_sendTLB-&gt;m_tlbResp" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="176,679.61,180,670.61,176,674.61,172,670.61,176,679.61" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="177" y="646.08">send finished</text><!--MD5=[1df14f234d36f98d2fbf601038e542f4]
link m_tlbResp to m_sendPMP--><path d="M176.37,728.11 C176.7,749.03 177.19,779.91 177.55,802.38 " fill="none" id="m_tlbResp-&gt;m_sendPMP" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="177.63,807.61,181.4751,798.5428,177.5443,802.6107,173.4763,798.6799,177.63,807.61" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="178" y="774.08">no exception detected</text><!--MD5=[e4c41cd2f724d6a2bfaffe513e09167e]
link m_tlbResp to m_waitCommit--><path d="M129.1,717.7 C78.78,734.51 6,769.47 6,831 C6,831 6,831 6,1089 C6,1173.15 108.1,1204.61 190.92,1216.28 " fill="none" id="m_tlbResp-&gt;m_waitCommit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="196.35,1217.02,187.9683,1211.8482,191.3952,1216.3489,186.8946,1219.7758,196.35,1217.02" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="7" y="966.08">exception detected</text><!--MD5=[cd25f20058c1e67aaa3bc0cf228924b6]
link m_sendPMP to m_resendReq--><path d="M206.06,856.11 C232.29,877.71 271.43,909.94 298.89,932.56 " fill="none" id="m_sendPMP-&gt;m_resendReq" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="302.86,935.82,298.452,927.0126,298.9991,932.643,293.3688,933.19,302.86,935.82" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="264" y="902.08">no PMP exception</text><!--MD5=[a2759e5b6fd58ff6b694f04bc1721ba4]
link m_sendPMP to m_waitCommit--><path d="M173.12,856.2 C166.08,894.24 155.81,971.86 174,1034 C191.35,1093.29 233.63,1151.64 263.29,1187.46 " fill="none" id="m_sendPMP-&gt;m_waitCommit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="266.85,1191.72,264.1647,1182.2443,263.6505,1187.8777,258.017,1187.3635,266.85,1191.72" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="175" y="1030.08">PMP exception detected</text><!--MD5=[31890782e496498cd75d5dbf3d1dcee8]
link m_resendReq to m_waitResendResp--><path d="M331.18,984.11 C331.35,1005.03 331.59,1035.91 331.77,1058.38 " fill="none" id="m_resendReq-&gt;m_waitResendResp" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.81,1063.61,335.7585,1054.5873,331.7814,1058.6101,327.7586,1054.633,331.81,1063.61" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="332" y="1030.08">resend finished</text><!--MD5=[fccced1a468cf946923149aabc5cd413]
link m_waitResendResp to m_waitCommit--><path d="M309.41,1112.14 C302.43,1120.8 295.63,1131.18 292,1142 C287.26,1156.14 286.96,1172.46 288.24,1186.72 " fill="none" id="m_waitResendResp-&gt;m_waitCommit" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="288.77,1191.88,291.7989,1182.5085,288.2429,1186.9079,283.8435,1183.3519,288.77,1191.88" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="293" y="1158.08">receive reply from uncache</text><!--MD5=[7cf4b50239ad3d36b0610121c84506a2]
link m_waitCommit to m_commited--><path d="M356.46,1256.08 C402.93,1279.58 465.95,1311.44 509.5,1333.46 " fill="none" id="m_waitCommit-&gt;m_commited" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="514.18,1335.83,507.9481,1328.2035,509.7165,1333.5768,504.3431,1335.3451,514.18,1335.83" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="452" y="1302.08">mmio_commited</text><!--MD5=[bfd3d9fc06e6eb8242906de825b76c56]
link m_commited to m_idle--><path d="M613.63,1355.4 C691.06,1346.97 825,1318.83 825,1225 C825,167 825,167 825,167 C825,92.89 727.98,56.59 671.16,41.68 " fill="none" id="m_commited-&gt;m_idle" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="666.13,40.39,673.8532,46.5017,670.9731,41.6329,675.8418,38.7528,666.13,40.39" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[1d64871447aeaac18b5c92699962d997]
@startuml mmio_stmt
hide empty description

m_idle - -> m_waitLastCmt : f3_req_is_mmio

m_waitLastCmt : 等待之前的指令提交完成
m_waitLastCmt - -> m_sendReq: is_first_instr or mmioLastCommit
m_waitLastCmt - -> m_waitLastCmt: not first instr and no mmioLastCommit

m_sendReq : 向InstrUncache模块发送请求
m_sendReq - -> m_waitResp : send finished

m_waitResp - -> m_sendTLB : receive reply from uncache and need to resend
m_waitResp - -> m_waitCommit : receive reply from uncache and needn't resend

m_sendTLB - -> m_tlbResp : send finished

m_tlbResp - -> m_sendPMP: no exception detected
m_tlbResp - -> m_waitCommit : exception detected

m_waitCommit : 向Ibuffer发送错误信息后等待commit

m_sendPMP - -> m_resendReq : no PMP exception
m_sendPMP - -> m_waitCommit : PMP exception detected

m_resendReq - -> m_waitResendResp : resend finished

m_waitResendResp - -> m_waitCommit : receive reply from uncache

m_waitCommit - -> m_commited : mmio_commited

m_commited - -> m_idle

@enduml

PlantUML version 1.2020.02(Sun Mar 01 18:22:07 CST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.25+9
Operating System: Linux
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>