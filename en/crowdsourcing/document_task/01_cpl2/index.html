<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z2ZY6ZE84")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=/css/bootstrap.min.css><link rel=stylesheet type=text/css href=/css/all.min.css><link disabled id=dark-mode-theme rel=stylesheet href=/css/dark.css><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/my_style.css><title>UnityChip Verification | Verification Documentation Crowdsourcing Phase 1: Third Generation Xiangshan (Kunming Lake) Architecture CPL2 Module Documentation Crowdsourcing</title>
<meta name=description content="Understand Xiangshan CPL2 microarchitecture design and deliver specification documents"></head><body style=width:100%;max-width:100%;margin:0;padding:0><nav class="navbar navbar-expand-lg navbar-light bg-light"><div class=container><a class=navbar-brand href=https://open-verify.cc/en><b style=font-weight:800>Home</b>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavDropdown aria-controls=navbarNavDropdown aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNavDropdown><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class=nav-item><a class=nav-link href=/en/crowdsourcing/>Verification Tasks</a></li><li class=nav-item><a class=nav-link href=/en/learningresource/>Learning Resources</a></li><li class=nav-item><a class=nav-link href=/en/about/>About Us</a></li><li class=nav-item><a class=nav-link href=https://open-verify.cc/crowdsourcing/document_task/01_cpl2/>中文</a></li><li class="nav-item px-2 pt-1"><a class="btn fas fa-moon" id=dark-mode-toggle></a></li></ul></div></div></nav><div id=content><div class=container><div class="py-4 rounded-3"><div class="container-fluid py-2"><h1 class="display-2 mb-4 text-center">Verification Documentation Crowdsourcing Phase 1: Third Generation Xiangshan (Kunming Lake) Architecture CPL2 Module Documentation Crowdsourcing</h1></div><p class="text-center fs-4 fst-italic serif">Understand Xiangshan CPL2 microarchitecture design and deliver specification documents</p><div class="text-center pt-4"></div></div><div class="row justify-content-center mb-5"><div class=col-12><p class="card-date m-0">Created Dec 11, 2024 -
Last updated: Dec 11, 2024</p><hr class=dropdown-divider><div class="row justify-content-between"><div class=col-sm-4></div><div class=col-sm-8 style=text-align:right></div></div></div></div><div class="container-fluid py-2"><div class="serif main-content"><p>In this verification documentation crowdsourcing task, you will:</p><ol><li>Approach the CPL2 module of Xiangshan Kunming Lake architecture</li><li>Understand the design methodology of Xiangshan L2Cache</li><li>Deepen your knowledge of RISC-V instruction set architecture
We welcome your participation! (Register <a href=https://www.wjx.top/vm/hh9x0mE.aspx>here</a>, QQ group: <strong>1038700912</strong>)</li></ol><p>CPL2 (CHI-CoupledL2) is a non-blocking level-2 cache memory. Its main functions include: receiving prefetch requests from L1, supporting BOP prefetching, supporting Temporal prefetching, and supporting the merging of memory access requests and prefetch requests.</p><p>In this phase of the task, a total of 14 subtasks were released, covering 20 submodules of CPL2.</p><h2 id=specification-drafting>Specification Drafting</h2><p>For this verification documentation crowdsourcing task, please:</p><ol><li>Read and understand the corresponding Xiangshan module <a href=https://github.com/OpenXiangShan/XiangShan>code</a></li><li>Complete the documentation work based on our provided <a href=https://open-verify.cc/UnityChipForXiangShan/docs/98_ut/00_standard/>template</a></li><li>Submit a PR to the repository</li></ol><h3 id=contribution-submission>Contribution Submission</h3><p>Please fork the <a href=https://github.com/XS-MLVP/XiangShan-Design-Doc>XiangShan-Design-Doc</a> repository, complete the documentation work, and initiate a PR for submission when all deliverables are ready.</p><h2 id=task-difficulty>Task Difficulty</h2><p>Task difficulty is comprehensively determined by factors including comprehension complexity and workload. Generally:</p><ul><li>Difficulty 1-3: Simple tasks</li><li>Difficulty 4-7: Moderate tasks<br>(May involve heavier workload or require time to understand hidden requirements)</li><li>Difficulty 8-10: Challenging tasks<br>(Typically combine significant workload with high comprehension complexity)</li></ul><h2 id=reward-information>Reward Information</h2><p>Participants will receive varying monetary awards based on:</p><ul><li>Task difficulty level (1-10 scale)</li><li>Completion quality assessment</li></ul><h2 id=task-details>Task Details</h2><p>The CPL2 design documentation is available for download <a href=https://github.com/cyn1456492382/document_task/releases/download/document/Kunminghu-CHI-CoupledL2-.-v1.2-20240528.zip>here</a>. Below are detailed descriptions of each subtask in this phase:</p><h3 id=task-11-sinka--requestbuffer-submodules>Task 1.1: SinkA & RequestBuffer Submodules</h3><p>SinkA processes requests from Bus Channel A and the prefetcher, converts them into internal task format, and then sends them to RequestBuffer. Request Buffer is used to buffer temporarily blocked Channel A requests, while allowing Channel A requests that meet release conditions/do not need blocking to enter the main pipeline first.</p><p>Expected Task Difficulty：4/10</p><h3 id=task-12-sinkc--releasebuf-submodules>Task 1.2: SinkC & ReleaseBuf Submodules</h3><p>SinkC receives requests from Bus Channel C. ReleaseBuf is used to temporarily store data released by the upstream Cache or data to be released by L2.</p><p>Expected Task Difficulty：4/10</p><h3 id=task-13-grantbuffer-submodule>Task 1.3: GrantBuffer Submodule</h3><p>GrantBuffer receives tasks from MainPipe and forwards them based on task type.</p><p>Expected Task Difficulty：4/10</p><h3 id=task-14-txreq-txrsp--txdat-submodules>Task 1.4: TXREQ, TXRSP & TXDAT Submodules</h3><p>The TXREQ module receives requests destined for the REQ channel from both the MainPipe and MSHR modules, arbitrates between them, buffers them in a queue, and finally transmits them to the CHI TXREQ bus channel.</p><p>The TXRSP module receives requests destined for the SRSP channel from both the MainPipe and MSHR modules, arbitrates between them, buffers them in a queue, and finally transmits them to the CHI TXRSP bus channel.</p><p>The TXDAT module unconditionally receives requests destined for the WDAT channel from the MainPipe module, buffers them in a queue, and finally transmits them to the CHI TXDAT bus channel.</p><p>Expected Task Difficulty：3/10</p><h3 id=task-15-rxsnp-rxrsp--rxdat-submodules>Task 1.5: RXSNP, RXRSP & RXDAT Submodules</h3><p>RXSNP processes requests from Bus Channel B, converts them into internal task format, and sends them to ReqArb.</p><p>The RXRSP module accepts data-less response messages from the RXRSP channel and directly delivers the responses to MSHRCtl, using the txnID in the message to identify the mshrID.</p><p>The RXDAT module accepts data-bearing response messages from the RXDAT channel, stores the data in RefillBuffer while simultaneously sending the responses to MSHRCtl, using the txnID to identify the mshrID.</p><p>Expected Task Difficulty：4/10</p><h3 id=task-16-mshrctl-submodule>Task 1.6: MSHRCtl Submodule</h3><p>The MSHRCtl module is primarily responsible for allocating MSHRs to requests, delivering information from RXRSP/RXDAT/SourceC channel controllers to target MSHRs, and arbitrating MSHR requests to dispatch them to corresponding TXREQ/TXDAT channel controllers or MainPipe (RequestArb).</p><p>The internal MSHR submodule allocates an MSHR entry when either:</p><ul><li>An L2 cache miss occurs,</li><li>A cache hit requires meta permission changes</li></ul><p>Each allocated MSHR:</p><ol><li>Records the request state</li><li>Receives responses from channel controllers and directories</li><li>Issues control requests based on current state</li><li>Releases the MSHR after all control requests complete</li></ol><p>Expected Task Difficulty：6/10</p><h3 id=task-17-refillbuf-submodule>Task 1.7: RefillBuf Submodule</h3><p>RefillBuf temporarily stores data returned from downstream caches.</p><p>Expected Task Difficulty：4/10</p><h3 id=task-18-requestarb-submodule>Task 1.8: RequestArb Submodule</h3><p>RequestArb arbitrates which request may proceed to the main pipeline, permitting only one request per clock cycle.</p><p>Expected Task Difficulty：5/10</p><h3 id=task-19-mainpipe-submodule>Task 1.9: MainPipe Submodule</h3><p>The non-blocking main pipeline is responsible for receiving and processing all channel requests and MSHR requests related to read/write operations with the Directory, DataStorage, RefillBuf, and ReleaseBuf, while generating responses and allocating MSHRs.</p><p>Expected Task Difficulty：9/10</p><h3 id=task-110-directory-submodule>Task 1.10: Directory Submodule</h3><p>The Directory checks whether the requested data block is stored in L2 (hit/miss) based on read requests. If a hit occurs, it returns the metadata information of that data block. If a miss occurs, it selects an invalid way or a way to be replaced, and returns the metadata information of that way&rsquo;s data. After completing the request processing, it writes the new directory information into the Directory for updating.</p><p>Expected Task Difficulty：3/10</p><h3 id=task-111-datastorage-submodule>Task 1.11: DataStorage Submodule</h3><p>The DataStorage module is responsible for the storage and read/write operations of cache data, implemented using single-port SRAM.</p><p>Expected Task Difficulty：3/10</p><h3 id=task-112-prefetcher-submodule>Task 1.12: Prefetcher Submodule</h3><p>The Prefetcher module receives prefetch training data from the L2 Cache and sends the training data to the BOP module for prefetch training. It contains three submodules: PrefetchReceiver, PrefetchQueue, and BOP (BestOffsetPrefetch).</p><p>The PrefetchReceiver module only regenerates signals that conform to the L2 Cache prefetch request format based on input L1 DCache prefetch requests (converting recv_addr to L2 prefetch request format), with no other functionality. The PrefetchQueue module instantiates a 16-entry (inflightEntries) register-based circular queue for buffering prefetch requests. The BOP module receives training data from the Prefetcher module to perform best-offset prefetching. The BOP module contains two submodules: RecentRequestTable (used to record recent memory access requests related to BOP prefetching) and OffsetScoreTable (used to train and record scores for various offsets to obtain the current best offset).</p><p>Expected Task Difficulty：8/10</p><h3 id=task-113-mmiobridge-submodule>Task 1.13: MMIOBridge Submodule</h3><p>The MMIOBridge module receives MMIO requests from the core-side TileLink bus, converts them into ReadNoSnp/WriteNoSnp requests in CHI protocol, and returns responses via the TileLink bus Channel D upon completion of MMIO transactions.</p><p>Expected Task Difficulty：6/10</p><h3 id=task-114-linkmonitor-submodule>Task 1.14: LinkMonitor Submodule</h3><p>The LinkMonitor module converts messages based on the Valid-Ready handshake protocol to the L-Credit based handshake protocol, while simultaneously maintaining the power states of both TX and RX directional links.</p><p>Expected Task Difficulty：5/10</p></div></div></div></div><div class=container><div class="row justify-content-between"><div class=col-sm-4><p class=footer>MLVP Group © 2025</p></div><div class="col-sm-6 d-flex flex-row-reverse"><a class="footer-social px-2" href=# target=_blank><i class="fab fa-weixin"></i></a>
<a class="footer-social px-2" href=# target=_blank><i class="fab fa-weibo"></i></a></div></div></div><script src=/js/bootstrap.min.js></script><script src=/js/jquery.min.js></script><script src=/js/isotope.pkgd.min.js></script><script src=/js/masonry.pkgd.min.js async></script><script src=/js/dark.js></script><script>var savedTheme=localStorage.getItem("dark-mode-storage")||"light";setTheme(savedTheme)</script><script src=/js/isotope.js></script><script src=/js/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0,securityLevel:"loose"})</script></body></html>