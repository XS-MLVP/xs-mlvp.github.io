<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/xs-bpu/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/xs-bpu/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-192x192.png" sizes="192x192">

<title>TAGE-SC Branch Predictor | OpenVerify Courses</title>
<meta name="description" content="Introduction TAGE-SC is the primary predictor for conditional branches in the Kunming Lake architecture, classified as an Accurate Predictor (APD). TAGE-SC can be seen as two relatively independent components: the prediction part TAGE and the verification part SC.
The Tagged Geometric History Length Predictor (TAGE) utilizes multiple prediction tables with different history lengths to exploit extensive branch history information. TAGE predicts whether a branch instruction will be taken or not taken. It consists of a base prediction table and multiple history tables. It first predicts using multiple history tables. If there is no prediction, it uses the prediction from the base table. The Statistical Corrector (SC) is a statistical corrector. SC references the prediction results of TAGE and statistical bias results. Based on these two results, it corrects the final prediction result.">
<meta property="og:url" content="https://open-verify.cc/xs-bpu/en/docs/modules/02_tage_sc/">
  <meta property="og:site_name" content="OpenVerify Courses">
  <meta property="og:title" content="TAGE-SC Branch Predictor">
  <meta property="og:description" content="Introduction TAGE-SC is the primary predictor for conditional branches in the Kunming Lake architecture, classified as an Accurate Predictor (APD). TAGE-SC can be seen as two relatively independent components: the prediction part TAGE and the verification part SC.
The Tagged Geometric History Length Predictor (TAGE) utilizes multiple prediction tables with different history lengths to exploit extensive branch history information. TAGE predicts whether a branch instruction will be taken or not taken. It consists of a base prediction table and multiple history tables. It first predicts using multiple history tables. If there is no prediction, it uses the prediction from the base table. The Statistical Corrector (SC) is a statistical corrector. SC references the prediction results of TAGE and statistical bias results. Based on these two results, it corrects the final prediction result.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2025-05-06T12:03:58+08:00">
    <meta property="article:tag" content="Subpredictor">
    <meta property="article:tag" content="TAGE-SC">

  <meta itemprop="name" content="TAGE-SC Branch Predictor">
  <meta itemprop="description" content="Introduction TAGE-SC is the primary predictor for conditional branches in the Kunming Lake architecture, classified as an Accurate Predictor (APD). TAGE-SC can be seen as two relatively independent components: the prediction part TAGE and the verification part SC.
The Tagged Geometric History Length Predictor (TAGE) utilizes multiple prediction tables with different history lengths to exploit extensive branch history information. TAGE predicts whether a branch instruction will be taken or not taken. It consists of a base prediction table and multiple history tables. It first predicts using multiple history tables. If there is no prediction, it uses the prediction from the base table. The Statistical Corrector (SC) is a statistical corrector. SC references the prediction results of TAGE and statistical bias results. Based on these two results, it corrects the final prediction result.">
  <meta itemprop="dateModified" content="2025-05-06T12:03:58+08:00">
  <meta itemprop="wordCount" content="3763">
  <meta itemprop="keywords" content="Subpredictor,TAGE-SC">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="TAGE-SC Branch Predictor">
  <meta name="twitter:description" content="Introduction TAGE-SC is the primary predictor for conditional branches in the Kunming Lake architecture, classified as an Accurate Predictor (APD). TAGE-SC can be seen as two relatively independent components: the prediction part TAGE and the verification part SC.
The Tagged Geometric History Length Predictor (TAGE) utilizes multiple prediction tables with different history lengths to exploit extensive branch history information. TAGE predicts whether a branch instruction will be taken or not taken. It consists of a base prediction table and multiple history tables. It first predicts using multiple history tables. If there is no prediction, it uses the prediction from the base table. The Statistical Corrector (SC) is a statistical corrector. SC references the prediction results of TAGE and statistical bias results. Based on these two results, it corrects the final prediction result.">
<link rel="preload" href="/xs-bpu/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css" as="style" integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin="anonymous">
<link href="/xs-bpu/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css" rel="stylesheet" integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-4Z2ZY6ZE84');
    </script>


  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/xs-bpu/en/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">OpenVerify Courses</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/xs-bpu/docs/modules/02_tage_sc/">中文</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/xs-bpu/offline-search-index.cae33942e63f62947f4246798e40a87d.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/xs-bpu/offline-search-index.cae33942e63f62947f4246798e40a87d.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/xs-bpu/docs/modules/02_tage_sc/">中文</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-xs-bpuendocs-li">
  <a href="/xs-bpu/en/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-xs-bpuendocs"><span class="">Branch Predictor and Kunming Lake Microarchitecture Implementation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpuendocsbasic-li">
  <a href="/xs-bpu/en/docs/basic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpuendocsbasic"><span class="">Basic Design of Shanshan Branch Prediction Unit (BPU)</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsbasic00_bp-li">
  <a href="/xs-bpu/en/docs/basic/00_bp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsbasic00_bp"><span class="">What is Branch Prediction</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsbasic01_xsbpu_basic-li">
  <a href="/xs-bpu/en/docs/basic/01_xsbpu_basic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsbasic01_xsbpu_basic"><span class="">Basic of the Xiangshan Branch Prediction Unit (BPU)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsbasic02_xsbpu_structure-li">
  <a href="/xs-bpu/en/docs/basic/02_xsbpu_structure/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsbasic02_xsbpu_structure"><span class="">Introduction to the Xiangshan Branch Prediction Unit Structure</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsbasic03_xsbpu_timing-li">
  <a href="/xs-bpu/en/docs/basic/03_xsbpu_timing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsbasic03_xsbpu_timing"><span class="">Introduction to the Timing of Xiangshan Branch Prediction Unit</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpuendocsports-li">
  <a href="/xs-bpu/en/docs/ports/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpuendocsports"><span class="">Important Structures and Interface Documentation</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsports00_ftb-li">
  <a href="/xs-bpu/en/docs/ports/00_ftb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsports00_ftb"><span class="">FTB Item and Complete Prediction Result Interface</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsports01_redirect_and_update-li">
  <a href="/xs-bpu/en/docs/ports/01_redirect_and_update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsports01_redirect_and_update"><span class="">Redirection and Update Interfaces</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsports02_global_ports-li">
  <a href="/xs-bpu/en/docs/ports/02_global_ports/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsports02_global_ports"><span class="">BPU Global Interface</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsports03_subpredictor-li">
  <a href="/xs-bpu/en/docs/ports/03_subpredictor/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsports03_subpredictor"><span class="">Base Predictor Class and Sub Predictor Interface</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-xs-bpuendocsmodules-li">
  <a href="/xs-bpu/en/docs/modules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpuendocsmodules"><span class="">Submodule Documentation</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsmodules00_bpu_top-li">
  <a href="/xs-bpu/en/docs/modules/00_bpu_top/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules00_bpu_top"><span class="">BPU Top Module</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsmodules01_uftb-li">
  <a href="/xs-bpu/en/docs/modules/01_uftb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules01_uftb"><span class="">uFTB Branch Predictor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-xs-bpuendocsmodules02_tage_sc-li">
  <a href="/xs-bpu/en/docs/modules/02_tage_sc/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules02_tage_sc"><span class="td-sidebar-nav-active-item">TAGE-SC Branch Predictor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsmodules03_ftb-li">
  <a href="/xs-bpu/en/docs/modules/03_ftb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules03_ftb"><span class="">FTB Branch Predictor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsmodules04_ittage-li">
  <a href="/xs-bpu/en/docs/modules/04_ittage/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules04_ittage"><span class="">ITTAGE Branch Predictor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsmodules05_ras-li">
  <a href="/xs-bpu/en/docs/modules/05_ras/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsmodules05_ras"><span class="">RAS Branch Predictor</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpuendocsfeature-li">
  <a href="/xs-bpu/en/docs/feature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpuendocsfeature"><span class="">Feature List</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature00_bpufeature-li">
  <a href="/xs-bpu/en/docs/feature/00_bpufeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature00_bpufeature"><span class="">BPU Top Feature List</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature01_uftbfeature-li">
  <a href="/xs-bpu/en/docs/feature/01_uftbfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature01_uftbfeature"><span class="">uFTB Feature List</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature02_ftbfeature-li">
  <a href="/xs-bpu/en/docs/feature/02_ftbfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature02_ftbfeature"><span class="">FTB Feature List</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature03_tagescfeature-li">
  <a href="/xs-bpu/en/docs/feature/03_tagescfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature03_tagescfeature"><span class="">TAGE-SC Feature List</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature04_ittagefeature-li">
  <a href="/xs-bpu/en/docs/feature/04_ittagefeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature04_ittagefeature"><span class="">ITTAGE Feature List</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpuendocsfeature05_rasfeature-li">
  <a href="/xs-bpu/en/docs/feature/05_rasfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpuendocsfeature05_rasfeature"><span class="">RAS Feature List</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/XS-MLVP/course/tree/main/content/en/docs/modules/02_tage_sc.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/XS-MLVP/course/edit/main/content/en/docs/modules/02_tage_sc.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/XS-MLVP/course/new/main/content/en/docs/modules?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/XS-MLVP/course/issues/new?title=TAGE-SC%20Branch%20Predictor" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/XS-MLVP/course/mlvp-portal/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/xs-bpu/en/docs/modules/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#tage-branch-predictor-in-kunming-lake">TAGE Branch Predictor in Kunming Lake</a>
      <ul>
        <li><a href="#basic-functionality">Basic Functionality</a></li>
        <li><a href="#pipeline">Pipeline</a></li>
        <li><a href="#data-structures">Data Structures</a></li>
        <li><a href="#retrieval-method-for-t0-and-tn-tables">Retrieval Method for T0 and Tn Tables</a></li>
        <li><a href="#alternative-predictor">Alternative Predictor</a></li>
        <li><a href="#prediction-process">Prediction Process</a></li>
        <li><a href="#training-process">Training Process</a></li>
      </ul>
    </li>
    <li><a href="#kunming-lake-sc-branch-predictor">Kunming Lake SC Branch Predictor</a>
      <ul>
        <li><a href="#basic-function-introduction">Basic Function Introduction</a></li>
        <li><a href="#prediction-process-1">Prediction Process</a></li>
        <li><a href="#training-process-1">Training Process</a></li>
      </ul>
    </li>
    <li><a href="#kunming-lake-tage-sc-branch-predictor">Kunming Lake TAGE-SC Branch Predictor</a>
      <ul>
        <li><a href="#why-sc-is-needed-with-tage">Why SC is Needed with TAGE</a></li>
        <li><a href="#tage-sc-functionality">TAGE-SC Functionality</a></li>
        <li><a href="#pipeline-1">Pipeline</a></li>
        <li><a href="#prediction-process-2">Prediction Process</a></li>
        <li><a href="#training-process-2">Training Process</a></li>
      </ul>
    </li>
    <li><a href="#interface-list">Interface List</a>
      <ul>
        <li><a href="#tagesc">TageSC</a></li>
        <li><a href="#io_out_last_stage_meta">io_out_last_stage_meta</a></li>
        <li><a href="#io_update_bits_meta">io_update_bits_meta</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/bpu/" data-taxonomy-term="bpu"><span class="taxonomy-label">BPU</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/bpu-top-level/" data-taxonomy-term="bpu-top-level"><span class="taxonomy-label">BPU Top Level</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/branch-folding-history/" data-taxonomy-term="branch-folding-history"><span class="taxonomy-label">Branch Folding History</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/branch-prediction/" data-taxonomy-term="branch-prediction"><span class="taxonomy-label">Branch Prediction</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/branch-prediction-block/" data-taxonomy-term="branch-prediction-block"><span class="taxonomy-label">Branch Prediction Block</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/docs/" data-taxonomy-term="docs"><span class="taxonomy-label">Docs</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/examples/" data-taxonomy-term="examples"><span class="taxonomy-label">Examples</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/feature-list/" data-taxonomy-term="feature-list"><span class="taxonomy-label">Feature List</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/fetch-target-queue-ftq/" data-taxonomy-term="fetch-target-queue-ftq"><span class="taxonomy-label">Fetch Target Queue (FTQ)</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/ftb/" data-taxonomy-term="ftb"><span class="taxonomy-label">FTB</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/global-branch-history/" data-taxonomy-term="global-branch-history"><span class="taxonomy-label">Global Branch History</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/ittage/" data-taxonomy-term="ittage"><span class="taxonomy-label">ITTAGE</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/pipeline-control/" data-taxonomy-term="pipeline-control"><span class="taxonomy-label">Pipeline Control</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/prediction-result-redirection/" data-taxonomy-term="prediction-result-redirection"><span class="taxonomy-label">Prediction Result Redirection</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/ras/" data-taxonomy-term="ras"><span class="taxonomy-label">RAS</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/redirect-request/" data-taxonomy-term="redirect-request"><span class="taxonomy-label">Redirect Request</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/redirection-request/" data-taxonomy-term="redirection-request"><span class="taxonomy-label">Redirection Request</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/shanshan/" data-taxonomy-term="shanshan"><span class="taxonomy-label">Shanshan</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/sub-predictor/" data-taxonomy-term="sub-predictor"><span class="taxonomy-label">Sub-Predictor</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/sub-predictors/" data-taxonomy-term="sub-predictors"><span class="taxonomy-label">Sub-Predictors</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/subpredictor/" data-taxonomy-term="subpredictor"><span class="taxonomy-label">Subpredictor</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/tage-sc/" data-taxonomy-term="tage-sc"><span class="taxonomy-label">TAGE-SC</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/uftb/" data-taxonomy-term="uftb"><span class="taxonomy-label">UFTB</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/update-request/" data-taxonomy-term="update-request"><span class="taxonomy-label">Update Request</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/xiangshan/" data-taxonomy-term="xiangshan"><span class="taxonomy-label">Xiangshan</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/xiangshan-bpu-structure/" data-taxonomy-term="xiangshan-bpu-structure"><span class="taxonomy-label">Xiangshan BPU Structure</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/xiangshan-bpu-timing/" data-taxonomy-term="xiangshan-bpu-timing"><span class="taxonomy-label">Xiangshan BPU Timing</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">Categories</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/branch-prediction-unit-bpu/" data-taxonomy-term="branch-prediction-unit-bpu"><span class="taxonomy-label">Branch Prediction Unit (BPU)</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/example/" data-taxonomy-term="example"><span class="taxonomy-label">Example</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/feature-list/" data-taxonomy-term="feature-list"><span class="taxonomy-label">Feature List</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/shanshan-bpu-basic-design/" data-taxonomy-term="shanshan-bpu-basic-design"><span class="taxonomy-label">Shanshan BPU Basic Design</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/tutorial/" data-taxonomy-term="tutorial"><span class="taxonomy-label">Tutorial</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/xiangshan-bpu-basic-design/" data-taxonomy-term="xiangshan-bpu-basic-design"><span class="taxonomy-label">Xiangshan BPU Basic Design</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/xiangshan-bpu-interface/" data-taxonomy-term="xiangshan-bpu-interface"><span class="taxonomy-label">Xiangshan BPU Interface</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/xiangshan-bpu-interfaces/" data-taxonomy-term="xiangshan-bpu-interfaces"><span class="taxonomy-label">Xiangshan BPU Interfaces</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/xiangshan-bpu-submodule/" data-taxonomy-term="xiangshan-bpu-submodule"><span class="taxonomy-label">Xiangshan BPU Submodule</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/xiangshan-bpu-submodules/" data-taxonomy-term="xiangshan-bpu-submodules"><span class="taxonomy-label">Xiangshan BPU Submodules</span><span class="taxonomy-count">2</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/xs-bpu/en/docs/">Branch Predictor and Kunming Lake Microarchitecture Implementation</a></li>
  <li class="breadcrumb-item">
    <a href="/xs-bpu/en/docs/modules/">Submodule Documentation</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    TAGE-SC Branch Predictor</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>TAGE-SC Branch Predictor</h1>
	
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/subpredictor/" data-taxonomy-term="subpredictor"><span class="taxonomy-label">Subpredictor</span></a></li>
    <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/tags/tage-sc/" data-taxonomy-term="tage-sc"><span class="taxonomy-label">TAGE-SC</span></a></li>
    </ul>
</div>
<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://open-verify.cc/xs-bpu/en/categories/branch-prediction-unit-bpu/" data-taxonomy-term="branch-prediction-unit-bpu"><span class="taxonomy-label">Branch Prediction Unit (BPU)</span></a></li>
    </ul>
</div>

  </header>
	<h2 id="introduction">Introduction</h2>
<p>TAGE-SC is the <strong>primary predictor</strong> for conditional branches in the Kunming Lake architecture, classified as an Accurate Predictor (APD). TAGE-SC can be seen as two relatively independent components: the prediction part TAGE and the verification part SC.</p>
<p>The Tagged Geometric History Length Predictor (TAGE) utilizes <strong>multiple prediction tables with different history lengths</strong> to exploit <strong>extensive branch history information</strong>. TAGE predicts whether a branch instruction will be taken or not taken. It consists of a base prediction table and multiple history tables. It first predicts using multiple history tables. If there is no prediction, it uses the prediction from the base table.
The Statistical Corrector (SC) is a statistical corrector. SC references the prediction results of TAGE and <strong>statistical bias results</strong>. Based on these two results, it <strong>corrects</strong> the final prediction result.</p>
<p>In Kunming Lake, each prediction block can have up to 2 branch instructions, so TAGE can predict <strong>up to 2 conditional branch instructions simultaneously</strong>. When accessing the various history tables in TAGE, the starting address of the prediction block is used as the PC, and two prediction results are retrieved based on the <strong>same global history</strong>.</p>
<h2 id="tage-branch-predictor-in-kunming-lake">TAGE Branch Predictor in Kunming Lake</h2>
<h3 id="basic-functionality">Basic Functionality</h3>
<p><img src="tage.PNG" alt="img"></p>
<p>The core idea of the TAGE predictor is to provide prediction results with different history lengths and select the most appropriate result for feedback. In the TAGE predictor, there are a total of <strong>1+N</strong> history record tables, where N is a configurable option. In Kunming Lake, N=4.</p>
<p>The base predictor based on the T0 table is the <strong>baseline predictor</strong>. During prediction, it directly looks up the &ldquo;2-bit saturated counter representing the jump history information&rdquo; corresponding to the address in the T0 table, and then makes a prediction based on the history information. The T0 table has only 2 bits per entry, so the history states it can record are limited.</p>
<p>For tables other than T0, we use <strong>Tn</strong> to represent them. During table lookup, in addition to the PC, it is also necessary to use the <strong>global jump history information H</strong> for the lookup. When a match is found, the prediction is made based on the &ldquo;3-bit saturated predictor&rdquo; to jump or not to jump. The higher the value of n for the Tn table, the longer the history information it uses, i.e., x&lt;y.</p>
<p>For each prediction, TAGE selects the table entry with the <strong>longest global jump history</strong> among all the hit Tn entries.</p>
<ol>
<li>If the table entry exists and the prediction result confidence is high, it is used as the final prediction result.</li>
<li>If the confidence is low, another internal counter is used to determine whether to select that entry or T0 as the final prediction.</li>
</ol>
<p>To save space, when retrieving the Tn table, the input jump history information H needs to be <strong>compressed</strong>, a process also known as <strong>history folding</strong>.</p>
<p>The table entries of each prediction table include the following elements:</p>
<ol>
<li>T0 table indexed directly by PC
<ol>
<li>2-bit pred <strong>unsigned</strong> saturated counter (indicating prediction direction and confidence level)</li>
</ol>
</li>
<li>Tn table indexed by XOR of PC and folded global history
<ol>
<li>1-bit valid bit</li>
<li>3-bit pred <strong>unsigned</strong> saturated counter</li>
<li>8-bit tag (used for verifying whether the hit is intentional, not coincidental)</li>
<li>1-bit useful bit for controlling expiration
For a prediction block, all tables may generate prediction results, requiring a selection process. Typically, the higher the Tn table number, the higher its priority.</li>
</ol>
</li>
</ol>
<h3 id="pipeline">Pipeline</h3>
<p>TAGE contains two pipeline stages: the first stage calculates the index, and the second stage reads the results from the SRAM table.</p>
<ol>
<li>Stage 0 (s0): Input to the first pipeline stage, usually the pc and folded history.
<strong>First pipeline stage operation</strong>: Calculate the index. Output to s1 via registers.</li>
<li>Stage 1 (s1): Input to the second pipeline stage, consisting of the index and other calculated data from the first stage.
<strong>Second pipeline stage operation</strong>: Memory access to SRAM, reading the prediction result. Output to s2 via registers.</li>
<li>Stage 2 (s2): Actual prediction result. TAGE uses 2 stages for prediction, with the prediction result ready for use in the third stage after 2 stages.</li>
</ol>
<h3 id="data-structures">Data Structures</h3>
<ol>
<li>
<p>In Kunming Lake&rsquo;s implementation, the T0 and Tn table structures are as follows:</p>
<ol>
<li>
<table>
  <thead>
      <tr>
          <th><strong>预测器</strong></th>
          <th><strong>作用</strong></th>
          <th><strong>表项构成</strong></th>
          <th><strong>项数</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>基准预测器T0</td>
          <td>用于在其他预测器的预测结果都无效时输出预测结果</td>
          <td>2 bit ctr 饱和计数器最高位决定跳转方向</td>
          <td>2路各2048项，每路对于一条分支指令</td>
      </tr>
      <tr>
          <td>预测表T1-T4</td>
          <td>对每个预测块的输入，所有Tn表都进行预测，在所有预测有效的结果中，选择历史记录最长的结果作为最后预测结果。历史记录长度由输入的H决定</td>
          <td>1 bit valid 有效位 3 bit ctr 饱和计数器8 bit tag 校验命中1 bit us 作为usefulness计数器</td>
          <td>4096项、奇数项对应第一条分支指令，偶数项对应第二条分支指令</td>
      </tr>
  </tbody>
</table>
</li>
</ol>
</li>
</ol>
<p>For each table Tn, the length of its input &ldquo;global branch history data H&rdquo; varies during querying. Assuming the total prediction history length is S, Tn and Tn+1 may use the low x, low y bits of S (<strong>the lower bits are the newer history</strong>) as query inputs. Generally, the larger the n of table Tn, the longer the history information used, i.e., x&lt;y.</p>
<p>During the query of table Tn, since the historical data H is &ldquo;compressed,&rdquo; it may lead to a situation where the result of one PC1^H1 matches another PC2^H2 (similar to a Hash collision), resulting in indexing into invalid data (predicting PC1 indexes to predicted PC2&rsquo;s data). Therefore, TAGE provides a tag identifier for each table, using an 8-bit tag in the Kunming Lake implementation to reduce the probability of collisions. The calculation method and index method for tags are different; <strong>only when the tag calculation is the same, the query result is valid</strong>.</p>
<p>In the Tn table entry, in addition to the saturation counter ctr and tag, there is also a 1-bit <strong>usefulness counter</strong>. When this counter is 0, it is a weak entry, indicating that the entry can be reallocated for other uses; when it is not 0, it is a strong entry, indicating that the entry cannot be reallocated for other uses.</p>
<p>To <strong>try to avoid</strong> the situation where all table entries are 1 and no new table entries can be allocated, TAGE expects to use the counter bankTickCtrs to clear all usefulness to 0.</p>
<h3 id="retrieval-method-for-t0-and-tn-tables">Retrieval Method for T0 and Tn Tables</h3>
<ul>
<li>For table T0, indexing is done using the PC[11:1] bits to index 2048 table entries, so for T0, there is no possibility of not finding a match.</li>
<li>For table Tn, in addition to PC[11:1], retrieval also requires searching based on the global branch history. In Kunming Lake, the top-level branch predictor maintains a 256-bit global history record GH, which can fold the GH&rsquo;s most recent n bits of history information based on the required number of bits x for the sub-predictor. That is, n is divided into ceil(x/n) units of length x, and then XOR is performed bitwise. This folded history is denoted as FH (Folded History), and the specific process can be found in the [Branch Folding History section](../00_bpu_top/#Branch Folding History). When the TAGE predictor searches for a table entry in Tn, it uses the index and tag, calculated as follows:</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Calculation Formula</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>index = FH ^ ((pc&raquo;1)低位)</td>
      </tr>
      <tr>
          <td>tag = FH1 ^ FH2 ^ ((pc&raquo;1)低位)</td>
      </tr>
  </tbody>
</table>
<p>Where FH, FH1, FH2 represent the folded global branch history according to certain rules. For Tn, FH, FH1, and FH2 each have their own folding bit numbers, which may not be the same. In the Kunming Lake implementation, the configurations of the T0 and Tn tables are as follows:</p>
<table>
  <thead>
      <tr>
          <th><strong>表名称</strong></th>
          <th><strong>FH长度</strong></th>
          <th><strong>FH1长度</strong></th>
          <th><strong>FH2长度</strong></th>
          <th><strong>最近历史长度（用到GH中的位数）</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>T1</td>
          <td>8比特</td>
          <td>8比特</td>
          <td>7比特</td>
          <td>低8位，即把最新8位历史，折叠成FH、FH1、FH2</td>
      </tr>
      <tr>
          <td>T2</td>
          <td>11比特</td>
          <td>8比特</td>
          <td>7比特</td>
          <td>低13位，即把最新13位历史，折叠成FH、FH1、FH2</td>
      </tr>
      <tr>
          <td>T3</td>
          <td>11比特</td>
          <td>8比特</td>
          <td>7比特</td>
          <td>低32位，即把最新32位历史，折叠成FH、FH1、FH2</td>
      </tr>
      <tr>
          <td>T4</td>
          <td>11比特</td>
          <td>8比特</td>
          <td>7比特</td>
          <td>低119位，即把最新119位历史，折叠成FH、FH1、FH2</td>
      </tr>
  </tbody>
</table>
<p>Note: pc&raquo;1 is used because RISC-C extension is used, with 2-byte alignment, and PC itself is already aligned to 1 byte, so only 1 bit is used.</p>
<h3 id="alternative-predictor">Alternative Predictor</h3>
<p>Since the Tn table uses saturation counters for prediction, there may be situations where the output result is &ldquo;not confident.&rdquo; For example, in Kunming Lake, for a 3-bit saturation counter, both 100 and 011 indicate a <strong>weak prediction</strong>. To provide more choices as references for this state, the TAGE predictor also provides an &ldquo;alternative predictor&rdquo; mechanism, which determines whether to select the prediction result of Tn or T0 when the Tn table predicts with low confidence.</p>
<p>In the Kunming Lake implementation, the &ldquo;alternative predictor&rdquo; is implemented based on the register group <strong>useAltOnNaCtrs</strong>. It consists of two paths of 128 <strong>4-bit saturation counters</strong> each, initialized to <strong>0b1000</strong>. When TAGE makes a prediction, it uses <strong>PC(7,1)</strong> to index the corresponding saturation counter. If the value of this counter is greater than or equal to the preset value and the prediction result of Tn is not confident, it selects the result of T0; otherwise, it selects the result of Tn.</p>
<h3 id="prediction-process">Prediction Process</h3>
<p>In summary, the prediction steps of the TAGE predictor in Kunming Lake are as follows:</p>
<ol>
<li><strong>Parallel</strong> indexing of T0 and Tn tables, selecting which table to use based on the hit result:
<ol>
<li>If a match to the tag of a Tn table is found, the potential prediction result is given by the saturation counter of the longest history Tn table.</li>
<li>If no match to a Tn table is found, the final prediction result is given by the saturation counter of the T0 table.</li>
</ol>
</li>
<li>If the potential prediction result of the matched Tn table is a weak prediction (100,011), and the value of the corresponding 4-bit counter in the alternative prediction for PC is greater than or equal to a threshold, the result of the T0 table is used as the final result; otherwise, the prediction result of the Tn table is used as the final prediction result.</li>
</ol>
<h3 id="training-process">Training Process</h3>
<p>Since the prediction process of TAGE involves many counters and tags, they need to be updated according to certain rules, a process known as training. This training process occurs in the BPU&rsquo;s update stage, where the PC, branch history, and prediction correctness information are input. The training process for branch prediction in Kunming Lake is divided into several steps based on different conditions:</p>
<ol>
<li>Update when <strong>T0</strong> is the final prediction result: If a jump occurs (i.e., taken), increment the ctr saturation counter indexed by the pc; otherwise, decrement it.</li>
<li>When <strong>only T0</strong> is hit, the following operations are performed:
<ol>
<li>If T0 is <strong>predicted correctly</strong>, no additional update is performed.</li>
<li>If T0 is <strong>predicted incorrectly</strong>, attempt to randomly allocate a new table entry in a Tn table. To allocate a new table entry, the original entry&rsquo;s usefulness at the corresponding index must be 0. The new entry is initialized as a weak prediction with usefulness 0, and its tag is set to the newly calculated tag.</li>
</ol>
</li>
<li>When <strong>both T0 and Tn are hit</strong>, the following operations are performed:
<ol>
<li><strong>Tn</strong> is always updated: If a jump occurs, increment the ctr saturation counter indexed by the pc; otherwise, decrement it. It is important to note that &ldquo;hit&rdquo; means that the tag of the indexed entry matches the calculated tag.</li>
<li>If <strong>T0 and Tn produce the same result</strong>:
<ol>
<li>If <strong>predicted correctly</strong>, no additional update is performed.</li>
<li>If <strong>predicted incorrectly</strong>, attempt to allocate a new table entry in a table with a longer history than Tn. To allocate a new entry, the usefulness of the original entry at the corresponding index must be 0. The new entry is initialized as a weak prediction with usefulness 0, and its tag is set to the tag calculated using the new history information.</li>
</ol>
</li>
<li>If <strong>T0 and Tn produce different results</strong>:
<ol>
<li>If <strong>Tn is correct</strong>, the entry&rsquo;s usefulness is incremented.
<ol>
<li>If the result is still a <strong>weak prediction</strong>, the counter in the alternative prediction for T0 is decremented.</li>
</ol>
</li>
<li>If <strong>Tn is incorrect</strong>, the entry&rsquo;s usefulness is decremented, and a new entry is allocated in a table with a longer history than Tn, as in 3.2.2.
<ol>
<li>If the result is still a <strong>weak prediction</strong>, the counter in the alternative prediction for T0 is incremented.</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>When a new table <strong>needs to be allocated</strong>, dynamic reset of the usefulness flag is performed.
<ol>
<li>Using a 7-bit bankTickCtrs register and calculating:
<ol>
<li>The number of allocatable tables <strong>a</strong> (with a longer history length than the current and corresponding index usefulness is 0)</li>
<li>The number of unallocatable tables <strong>b</strong> (with a longer history length than the current and corresponding index usefulness is not 0)</li>
</ol>
</li>
<li><strong>Update</strong> bankTickCtrs += Δ (saturated counter), Δ = b - a,</li>
<li>When bankTickCtrs reaches its <strong>maximum</strong> value, <strong>reset all usefulness to 0</strong>.</li>
</ol>
</li>
</ol>
<h2 id="kunming-lake-sc-branch-predictor">Kunming Lake SC Branch Predictor</h2>
<h3 id="basic-function-introduction">Basic Function Introduction</h3>
<p>The SC (Statistics counter) branch predictor is a branch predictor based on historical statistical information. Similar to TAGE, SC typically has multiple tables Tn, each corresponding to different lengths of historical jump statistics. The difference is that in SC, when predicting based on the PC, each table Tn is accessed, and then SC adds up each hit table entry to calculate the total &ldquo;saturated counter&rdquo; jump information, and finally determines whether to jump based on the total jump information. Generally, SC uses &ldquo;signed saturated counters&rdquo;, where a counter value greater than 0 indicates a jump, and less than 0 indicates no jump. The larger the absolute value of the counter, the higher the prediction confidence.</p>
<p>In the SC predictor, SC is also composed of multiple tables (e.g., T1, T2, T3, T4), but with fewer basic prediction tables T0 compared to the TAGE predictor. The Tn tables in SC have 6-bit signed saturated counters. The indexing method for SC tables is as follows:</p>
<table>
  <thead>
      <tr>
          <th><strong>Calculation Method</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Index = (FH) ^ ((pc&raquo;1)低位)</td>
      </tr>
  </tbody>
</table>
<p>For each table, the number of entries and the folded history length used are as follows:</p>
<table>
  <thead>
      <tr>
          <th>Table</th>
          <th>Number of Entries</th>
          <th>FH Length</th>
          <th>Folded History Range</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>T1</td>
          <td>512</td>
          <td>0</td>
          <td>不折叠</td>
      </tr>
      <tr>
          <td>T2</td>
          <td>512</td>
          <td>4</td>
          <td>把历史信息的低4位，折叠成FH</td>
      </tr>
      <tr>
          <td>T3</td>
          <td>512</td>
          <td>8</td>
          <td>把历史信息的低10位，折叠成FH</td>
      </tr>
      <tr>
          <td>T4</td>
          <td>512</td>
          <td>8</td>
          <td>把历史信息的低16位，折叠成FH</td>
      </tr>
  </tbody>
</table>
<p>The formula for calculating the total statistical prediction result is as follows:</p>

<div class="math">$$scCtrSum=\sum_{i=0}^{i<4}( (ctr_{sc} << 1) +1)$$</div><p>Where ctr_sc represents the signed saturated counter for each table. Left-shifting and adding one is for weight adjustment. The accumulated scCtrSum is the final prediction result of SC. If this value is greater than zero, the prediction is a jump; if it is less than zero, the prediction is no jump. The larger the absolute value, the higher the prediction confidence.</p>
<p>Typical data conversion results are as follows (extended to 9 bits to prevent overflow during calculation):</p>
<ol>
<li>All are 6b100000 (strong no-jump), resulting in 9b100000100, with a value of -252.</li>
<li>All are 6b011111 (strong jump), resulting in 9b011111100, with a value of 252.</li>
<li>All are 6b000000 (weak jump), resulting in 9b000000100, with a value of 4.</li>
<li>All are 6b111111 (weak no-jump), resulting in 9b111111100, with a value of -4.</li>
</ol>
<h3 id="prediction-process-1">Prediction Process</h3>
<ol>
<li>Calculate the index of table Tn using the PC and historical information.</li>
<li>Query the index to obtain the saturation counters for all tables.</li>
<li>Sum up all the saturation counters obtained from all tables to get the final prediction result (take a jump for values greater than 0, no jump for values less than 0).</li>
</ol>
<h3 id="training-process-1">Training Process</h3>
<p>Update the saturation counters during the update phase.</p>
<ol>
<li>If the real instruction corresponding to PC jumps, increment the saturation counters corresponding to all tables.</li>
<li>If the real instruction corresponding to PC does not jump, decrement the saturation counters corresponding to all tables.</li>
</ol>
<h2 id="kunming-lake-tage-sc-branch-predictor">Kunming Lake TAGE-SC Branch Predictor</h2>
<h3 id="why-sc-is-needed-with-tage">Why SC is Needed with TAGE</h3>
<p>In some applications, some branch behaviors have a weak correlation with branch history or paths, showing a statistical prediction bias. For these branches, using counters to capture statistical biases is more effective than history-based branch prediction.</p>
<p>TAGE is very effective in predicting branches that are highly correlated with history, but it performs poorly for branches with statistical biases. For example, branches that have a small bias in one direction but are not strongly correlated with historical paths. To avoid this problem, an SC predictor can be added to the traditional TAGE predictor.</p>
<h3 id="tage-sc-functionality">TAGE-SC Functionality</h3>
<p>In the Kunming Lake TAGE-SC predictor, both the TAGE and SC prediction results P1 and P2 are obtained simultaneously, and then their results are accumulated P = P1 + P2. If the absolute value of P is greater than the 8-bit threshold sc_bank_thres, the predictor result P is used; otherwise, P1 is used as the final prediction result.</p>
<p>For dynamic adaptation, the threshold sc_thres needs to be dynamically changed. Therefore, in the implementation, TAGE-SC uses a 5-bit sc_bank_ctr counter to adjust the threshold sc_bank_thres. Additionally, since Kunming Lake supports the simultaneous prediction of 2 branch instructions, the threshold register and corresponding control counter are also duplicated.</p>
<h3 id="pipeline-1">Pipeline</h3>
<p>The TAGE-SC predictor contains 3 pipeline stages, where the 2-stage pipeline of TAGE has been introduced, and the pipeline of the SC part is as follows:</p>
<ol>
<li>
<p>Stage 0: Read PC and folded history into s0.
<strong>First Stage</strong>: Calculate the index from pc and FH to obtain s0_idx.</p>
</li>
<li>
<p>Stage 1: Read s0_idx from s0.
<strong>Second Stage</strong>: Find the counter data corresponding to s1_idx in SCTable and output to s1_scResps.</p>
</li>
<li>
<p>Stage 2: Read s1_scResps from s1.
<strong>Third Stage</strong>: Select whether to invert the prediction result based on s2_scResps and output to s2_disagree.</p>
</li>
<li>
<p>Stage 3: Read the result from s2_disagree as s3_disagree.</p>
</li>
</ol>
<h3 id="prediction-process-2">Prediction Process</h3>
<p>In TAGE-SC prediction, the prediction result P1 of TAGE is represented by tage_ctr, and the prediction result P2 of SC is represented by scCtrSum. The prediction is divided into four steps:</p>
<ol>
<li>
<p>Execute the SC predictor to get the prediction result scCtrSum.</p>
</li>
<li>
<p>Simultaneously obtain the prediction result tage_ctr of the TAGE predictor.</p>
<ol>
<li>
<p>Since the prediction result of TAGE is an unsigned saturation counter, and the prediction result of SC is a signed saturation counter, if they are added together, data conversion is required.</p>
</li>
<li>
<p>Kunming Lake adopts a conversion for the result of TAGE. The converted result is represented by tageCtrCentered, and the specific conversion process is as follows:</p>

<div class="math">$$tageCtrCentered=((((ctr_{tage} -4)<<1)+1)<<3) $$</div></li>
<li>
<p>Conversion of a 3-bit unsigned saturation counter to an 8-bit signed saturation counter result is illustrated as follows:</p>
<ul>
<li>
<p>3b100 Weak jump =&gt; 8b00001000 = 8</p>
</li>
<li>
<p>3b011 Weak non-jump =&gt; 8b11111000 = -8</p>
</li>
<li>
<p>3b111 Strong jump =&gt; 8b00111000 = 56</p>
</li>
<li>
<p>3b000 Strong non-jump =&gt; 8b11001000 = -56</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Add the prediction results of TAGE and SC to get the final prediction result P, represented by totalSum.</p>
</li>
</ol>

<div class="math">$$totalSum = scCtrSum + tageCtrCentered$$</div><ol start="4">
<li>
<p>Determine the final prediction direction based on <code>totalSum</code> and <code>sc_bank_thres</code></p>
<ol>
<li>Jump if totalSum &gt; 0 and its absolute value exceeds the threshold: If scCtrSum &gt; sc_bank_thres - tageCtrCentered, it can also be understood as totalSum &gt; sc_bank_thres. The above expression can reduce the maximum bit width (ensuring no overflow requires 10 bits to become 9 bits).</li>
<li>No jump if totalSum &lt; 0 and its absolute value exceeds the threshold: If scCtrSum &lt; -sc_bank_thres - tageCtrCentered, it can also be understood as |totalSum| &gt; sc_bank_thres.</li>
</ol>
</li>
</ol>
<h3 id="training-process-2">Training Process</h3>
<p>After combining TAGE and SC, TAGE-SC adds an sc_bank_ctr counter to control the threshold sc_bank_thres. Therefore, during training, in addition to the training of TAGE and SC themselves, the newly added counter needs to be updated.</p>
<p>During the update phase, the specific update process is as follows:</p>
<ol>
<li>TAGE-SC uses the prediction result P (i.e., the prediction result after TAGE + SC). If |totalSum| is in the range [sc_bank_thres -4, sc_bank_thres -2], update the threshold-related register group.
<ol>
<li>Update sc_bank_ctr, the saturation counter: If the prediction is correct, sc_bank_ctr +=1; if the prediction is incorrect, sc_bank_ctr -=1.</li>
<li>Update sc_bank_thres, limited saturation operation: If the updated value of sc_bank_ctr reaches 0b11111 and sc_bank_thres &lt;= 31, then sc_bank_thres +=2; if the updated value of sc_bank_ctr is 0 and sc_bank_thres &gt;=6, then sc_bank_thres -=2. For all other cases, thres remains unchanged.</li>
<li>After the update judgment of sc_bank_thres is completed, another judgment is made on sc_bank_ctr. If the updated sc_bank_ctr is 0b11111 or 0, thres_ctr is reset to the initial value 0b10000.</li>
</ol>
</li>
<li>TAGE-SC uses the prediction result P1 (i.e., the prediction result of TAGE) and does not perform any operations.</li>
</ol>
<h2 id="interface-list">Interface List</h2>
<h3 id="tagesc">TageSC</h3>
<table>
  <thead>
      <tr>
          <th>信号类型</th>
          <th>信号宽度</th>
          <th>信号名</th>
          <th>信号描述</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>clock</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>reset</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[35:0]</td>
          <td>io_reset_vector</td>
          <td>用于reset时，reset s1_pc_dup_0 提供的值</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[40:0]</td>
          <td>io_in_bits_s0_pc_0</td>
          <td>复制的s0_pc的dup数组的第1个，给顶层BPU的PC</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[40:0]</td>
          <td>io_in_bits_s0_pc_1</td>
          <td>复制的s0_pc第2个，给Tage的PC</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[40:0]</td>
          <td>io_in_bits_s0_pc_3</td>
          <td>复制的s0_pc的第4个，给SC的PC</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_in_bits_folded_hist_1_hist_17_folded_hist</td>
          <td>TageTable 2 用到的11bits 折叠历史 从多长历史范围折叠到11bit见前文所述的表 注意TageTable下标+1，此处 T2 是前文 T3</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_in_bits_folded_hist_1_hist_16_folded_hist</td>
          <td>TageTable 3 用到的11bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_in_bits_folded_hist_1_hist_15_folded_hist</td>
          <td>TageTable 1 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_1_hist_14_folded_hist</td>
          <td>TageTable 0 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_in_bits_folded_hist_1_hist_9_folded_hist</td>
          <td>TageTable 2 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_1_hist_8_folded_hist</td>
          <td>TageTable 3 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_in_bits_folded_hist_1_hist_7_folded_hist</td>
          <td>TageTable 0 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_in_bits_folded_hist_1_hist_5_folded_hist</td>
          <td>TageTable 3 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_1_hist_4_folded_hist</td>
          <td>TageTable 1 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_1_hist_3_folded_hist</td>
          <td>TageTable 2 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_in_bits_folded_hist_1_hist_1_folded_hist</td>
          <td>TageTable 1 用到的11bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[3:0]</td>
          <td>io_in_bits_folded_hist_3_hist_12_folded_hist</td>
          <td>SCTable 1 用到的 4bit 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_3_hist_11_folded_hist</td>
          <td>SCTable 2 用到的 8bit 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_in_bits_folded_hist_3_hist_2_folded_hist</td>
          <td>SCTable 3 用到的 8bit 折叠历史</td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_0_br_taken_mask_0</td>
          <td>io_out_s2_full_pred_{i}<em>br_taken_mask</em>{j} Tage 在 s2流水级输出的，复制4份 预测块中第 j 条分支指令TAGE预测结果  这里不该叫mask吧</td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_0_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_1_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_1_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_2_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_2_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_3_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s2_full_pred_3_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_0_br_taken_mask_0</td>
          <td>io_out_s3_full_pred_{i}<em>br_taken_mask</em>{j} Tage 在 s3流水级输出的，复制4份 预测块中第 j 条分支指令SC预测结果</td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_0_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_1_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_1_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_2_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_2_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_3_br_taken_mask_0</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_out_s3_full_pred_3_br_taken_mask_1</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*[222:0]</td>
          <td>io_out_last_stage_meta</td>
          <td>见附表</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_ctrl_tage_enable</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_ctrl_sc_enable</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s0_fire_0</td>
          <td>s0 阶段流水线控制 相同信号复制多份，0给BPU，1给Tage，3给SC</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s0_fire_1</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s0_fire_3</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s1_fire_0</td>
          <td>s1 阶段流水线控制</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s1_fire_1</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s1_fire_2</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s1_fire_3</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s2_fire_0</td>
          <td>s2 阶段流水线控制</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s2_fire_1</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s2_fire_2</td>
          <td></td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_s2_fire_3</td>
          <td></td>
      </tr>
      <tr>
          <td>output</td>
          <td>*</td>
          <td>io_s1_ready</td>
          <td>tage的所有表，可以执行读取结果的操作</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_valid</td>
          <td>从FTQ发向BPU的后端执行结果（更新信号）是否有效</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[40:0]</td>
          <td>io_update_bits_pc</td>
          <td>（后端执行过的）预测块的PC</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_17_folded_hist</td>
          <td>TageTable 2 用到的11bits 折叠历史 预测时使用的分支历史结果，没有更新，转了一圈回来了</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_16_folded_hist</td>
          <td>TageTable 3 用到的11bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_15_folded_hist</td>
          <td>TageTable 1 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_14_folded_hist</td>
          <td>TageTable 0 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[3:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_12_folded_hist</td>
          <td>SCTable 1 用到的 4bit 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_11_folded_hist</td>
          <td>SCTable 2 用到的 8bit 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_9_folded_hist</td>
          <td>TageTable 2 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_8_folded_hist</td>
          <td>TageTable 3 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_7_folded_hist</td>
          <td>TageTable 0 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[6:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_5_folded_hist</td>
          <td>TageTable 3 用到的7bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_4_folded_hist</td>
          <td>TageTable 1 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_3_folded_hist</td>
          <td>TageTable 2 用到的8bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[7:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_2_folded_hist</td>
          <td>SCTable 3 用到的 8bit 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[10:0]</td>
          <td>io_update_bits_spec_info_folded_hist_hist_1_folded_hist</td>
          <td>TageTable 1 用到的11bits 折叠历史</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_ftb_entry_brSlots_0_valid</td>
          <td>FTB 表项的第一个slot是否有效（存储了跳转指令）</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_ftb_entry_tailSlot_sharing</td>
          <td>FTB 表项的最后一个slot是否存储了条件分支而非无条件跳转</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_ftb_entry_tailSlot_valid</td>
          <td>FTB 表项的最后一个slot是否有效</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_ftb_entry_always_taken_0</td>
          <td>历史上slot 0 指令总是跳转</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_ftb_entry_always_taken_1</td>
          <td>历史上slot 1 指令总是跳转</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_br_taken_mask_0</td>
          <td>solt 0 是否 taken</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_br_taken_mask_1</td>
          <td>solt 1 是否 taken</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_mispred_mask_0</td>
          <td>solt 0 是否预测正确</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*</td>
          <td>io_update_bits_mispred_mask_1</td>
          <td>solt 1 是否预测正确</td>
      </tr>
      <tr>
          <td>input</td>
          <td>*[222:0]</td>
          <td>io_update_bits_meta</td>
          <td>见附表</td>
      </tr>
  </tbody>
</table>
<h3 id="io_out_last_stage_meta">io_out_last_stage_meta</h3>
<p>需要设计参与优化！</p>
<table>
  <thead>
      <tr>
          <th>信号类型</th>
          <th>信号位</th>
          <th>信号名</th>
          <th>信号描述</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>output</td>
          <td>[218:88]</td>
          <td>0</td>
          <td>占位，全为0，传递到composer时会忽略</td>
      </tr>
      <tr>
          <td></td>
          <td>87</td>
          <td>resp_meta_providers_1_valid_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[86:85]</td>
          <td>resp_meta_providers_1_bits_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>84</td>
          <td>resp_meta_providers_0_valid_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[83:82]</td>
          <td>resp_meta_providers_0_bits_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[81:79]</td>
          <td>resp_meta_providerResps_1_r_ctr</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>78</td>
          <td>resp_meta_providerResps_1_r_u</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>77</td>
          <td>resp_meta_providerResps_1_r_unconf</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[76:74]</td>
          <td>resp_meta_providerResps_0_r_ctr</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>73</td>
          <td>resp_meta_providerResps_0_r_u</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>72</td>
          <td>resp_meta_providerResps_0_r_unconf</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>71</td>
          <td>resp_meta_altUsed_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>70</td>
          <td>resp_meta_altUsed_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>69</td>
          <td>resp_meta_altDiffers_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>68</td>
          <td>resp_meta_altDiffers_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[67:66]</td>
          <td>resp_meta_basecnts_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[65:64]</td>
          <td>resp_meta_basecnts_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[63:60]</td>
          <td>resp_meta_allocates_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[59:56]</td>
          <td>resp_meta_allocates_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>55</td>
          <td>resp_meta_takens_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>54</td>
          <td>resp_meta_takens_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>53</td>
          <td>resp_meta_scMeta_tageTakens_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>52</td>
          <td>resp_meta_scMeta_tageTakens_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>51</td>
          <td>resp_meta_scMeta_scUsed_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>50</td>
          <td>resp_meta_scMeta_scUsed_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>49</td>
          <td>resp_meta_scMeta_scPreds_1_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>48</td>
          <td>resp_meta_scMeta_scPreds_0_r</td>
          <td></td>
      </tr>
      <tr>
          <td></td>
          <td>[47:42]</td>
          <td>r_1_3</td>
          <td>scMeta(预测时的状态)中第2路的第4个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[41:36]</td>
          <td>r_1_2</td>
          <td>scMeta中第2路的第3个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[35:30]</td>
          <td>r_1_1</td>
          <td>scMeta中第2路的第2个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[29:24]</td>
          <td>r_1_0</td>
          <td>scMeta中第2路的第1个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[23:18]</td>
          <td>r_3</td>
          <td>scMeta中第1路的第4个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[17:12]</td>
          <td>r_2</td>
          <td>scMeta中第1路的第3个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[11:6]</td>
          <td>r_1</td>
          <td>scMeta中第1路的第2个sc_ctr的值</td>
      </tr>
      <tr>
          <td></td>
          <td>[5:0]</td>
          <td>r_0</td>
          <td>scMeta中第1路的第1个sc_ctr的值</td>
      </tr>
  </tbody>
</table>
<h3 id="io_update_bits_meta">io_update_bits_meta</h3>
<table>
  <thead>
      <tr>
          <th>信号类型</th>
          <th>信号位</th>
          <th>信号名</th>
          <th>信号描述</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>input</td>
          <td>[218:94]</td>
          <td></td>
          <td>FTB, ITAGE, RAS 模块传给 FTQ 的 META 信息，忽略</td>
      </tr>
      <tr>
          <td></td>
          <td>[93:6]</td>
          <td>io_out_last_stage_meta[87:0] 偏移 6bit 后的结果</td>
          <td>TAGE 输出给 FTQ 的 META</td>
      </tr>
      <tr>
          <td></td>
          <td>[5:0]</td>
          <td></td>
          <td>uFTB 输出给 FTQ 的 META</td>
      </tr>
  </tbody>
</table>

	<div class="td-page-meta__lastmod">
  Last modified May 6, 2025: <a href="https://github.com/XS-MLVP/course/commit/b8f13473fae2aceb4a5cf1e90132706ddc329aa9">Change version of hugo to 0.145.0 (b8f1347)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">BOSC</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css"
      integrity="sha512-r2+FkHzf1u0+SQbZOoIz2RxWOIWfdEzRuYybGjzKq18jG9zaSfEy9s3+jMqG/zPtRor/q4qaUCYQpmSjTw8M+g==" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"
        integrity="sha512-INps9zQ2GUEMCQD7xiZQbGUVnqnzEvlynVy6eqcTcHN4+aQiLo9/uaQqckDpdJ8Zm3M0QBs+Pktg4pz0kEklUg=="
        crossorigin="anonymous">
</script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js"
       integrity="sha512-YJVxTjqttjsU3cSvaTRqsSl0wbRgZUNF+NGGCgto/MUbIvaLdXQzGTCQu4CvyJZbZctgflVB0PXw9LLmTWm5/w==" crossorigin="anonymous"
       onload='renderMathInElement(document.body, null);'>
</script>
<script src="/xs-bpu/js/main.min.8bdc707530d61dee3a6fd659f8a422c05d2e2319377a8710175451ca21fa83b0.js" integrity="sha256-i9xwdTDWHe46b9ZZ&#43;KQiwF0uIxk3eocQF1RRyiH6g7A=" crossorigin="anonymous"></script>
<script defer src="/xs-bpu/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/xs-bpu/js/tabpane-persist.js'></script>

  </body>
</html>