<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/xs-bpu/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/xs-bpu/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/xs-bpu/favicons/android-192x192.png" sizes="192x192">

<title>uFTB 分支预测器 | 香山微架构开放验证第一期：昆明湖BPU模块UT验证实战</title>
<meta name="description" content="uFTB 简介 uFTB 是香山所有预测器中第一个预测器，也是其他预测器产生预测结果的基石。uFTB 工作在 s1 阶段，它获取到 s1_pc 后能在本周期内产生预测结果，并在 s1 通道输出，其他通道不予更改。分支指令的位置、指令的跳转目标都是由它来提供，后续预测器也将会根据这一预测结果进行进一步的预测。
而其本质则是一个 FTB 项缓存，其中存储了 FTB 项，基础的预测结果将直接由读出的 FTB 项生成。
因此，在你开始文档的阅读之前，请确保你理解了 FTB 项和含义以及预测结果接口的具体细节。
uFTB 功能简介 缓存FTB项，生成一周期预测结果 uFTB 中维护了一个小型的 FTB 项缓存，拿到 PC 之后，会在一周期之内读出 PC 所对应的 FTB 项，并从 FTB 项生成 s1 阶段预测结果。 维护两比特饱和计数器，提供基础条件分支结果 uFTB 中为 FTB项缓存的每一行都维护了对应的两比特饱和计数器，其方向预测结果会反映在 uFTB 的预测结果输出中。 根据更新请求更新 FTB 缓存和两比特饱和计数器 uFTB 缓存结构 如上所述，uFTB 本质上是一个存储了 FTB 项的小型缓存，其大致结构如下图所示。
在当前版本的香山中，uFTB 共有 32 个缓存行，每个缓存行被称作 FauFTBWay，一个缓存行中可以存储一个 FTB 项。
当 s1 流水有效时，uFTB 会使用 s1_pc 来决定读出 uFTB 缓存的哪一项。缓存是根据 PC 中的 tag 字段来索引，tag 字段被定义为 pc[16: 1]，即在 PC 中截取了 16 比特作为标识来匹配缓存中的某一行。">
<meta property="og:title" content="uFTB 分支预测器" />
<meta property="og:description" content="uFTB 简介 uFTB 是香山所有预测器中第一个预测器，也是其他预测器产生预测结果的基石。uFTB 工作在 s1 阶段，它获取到 s1_pc 后能在本周期内产生预测结果，并在 s1 通道输出，其他通道不予更改。分支指令的位置、指令的跳转目标都是由它来提供，后续预测器也将会根据这一预测结果进行进一步的预测。
而其本质则是一个 FTB 项缓存，其中存储了 FTB 项，基础的预测结果将直接由读出的 FTB 项生成。
因此，在你开始文档的阅读之前，请确保你理解了 FTB 项和含义以及预测结果接口的具体细节。
uFTB 功能简介 缓存FTB项，生成一周期预测结果 uFTB 中维护了一个小型的 FTB 项缓存，拿到 PC 之后，会在一周期之内读出 PC 所对应的 FTB 项，并从 FTB 项生成 s1 阶段预测结果。 维护两比特饱和计数器，提供基础条件分支结果 uFTB 中为 FTB项缓存的每一行都维护了对应的两比特饱和计数器，其方向预测结果会反映在 uFTB 的预测结果输出中。 根据更新请求更新 FTB 缓存和两比特饱和计数器 uFTB 缓存结构 如上所述，uFTB 本质上是一个存储了 FTB 项的小型缓存，其大致结构如下图所示。
在当前版本的香山中，uFTB 共有 32 个缓存行，每个缓存行被称作 FauFTBWay，一个缓存行中可以存储一个 FTB 项。
当 s1 流水有效时，uFTB 会使用 s1_pc 来决定读出 uFTB 缓存的哪一项。缓存是根据 PC 中的 tag 字段来索引，tag 字段被定义为 pc[16: 1]，即在 PC 中截取了 16 比特作为标识来匹配缓存中的某一行。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xs-mlvp.github.io/xs-bpu/docs/modules/01_uftb/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-21T19:30:08+08:00" />
<meta itemprop="name" content="uFTB 分支预测器">
<meta itemprop="description" content="uFTB 简介 uFTB 是香山所有预测器中第一个预测器，也是其他预测器产生预测结果的基石。uFTB 工作在 s1 阶段，它获取到 s1_pc 后能在本周期内产生预测结果，并在 s1 通道输出，其他通道不予更改。分支指令的位置、指令的跳转目标都是由它来提供，后续预测器也将会根据这一预测结果进行进一步的预测。
而其本质则是一个 FTB 项缓存，其中存储了 FTB 项，基础的预测结果将直接由读出的 FTB 项生成。
因此，在你开始文档的阅读之前，请确保你理解了 FTB 项和含义以及预测结果接口的具体细节。
uFTB 功能简介 缓存FTB项，生成一周期预测结果 uFTB 中维护了一个小型的 FTB 项缓存，拿到 PC 之后，会在一周期之内读出 PC 所对应的 FTB 项，并从 FTB 项生成 s1 阶段预测结果。 维护两比特饱和计数器，提供基础条件分支结果 uFTB 中为 FTB项缓存的每一行都维护了对应的两比特饱和计数器，其方向预测结果会反映在 uFTB 的预测结果输出中。 根据更新请求更新 FTB 缓存和两比特饱和计数器 uFTB 缓存结构 如上所述，uFTB 本质上是一个存储了 FTB 项的小型缓存，其大致结构如下图所示。
在当前版本的香山中，uFTB 共有 32 个缓存行，每个缓存行被称作 FauFTBWay，一个缓存行中可以存储一个 FTB 项。
当 s1 流水有效时，uFTB 会使用 s1_pc 来决定读出 uFTB 缓存的哪一项。缓存是根据 PC 中的 tag 字段来索引，tag 字段被定义为 pc[16: 1]，即在 PC 中截取了 16 比特作为标识来匹配缓存中的某一行。">
<meta itemprop="dateModified" content="2024-06-21T19:30:08+08:00" />
<meta itemprop="wordCount" content="582">
<meta itemprop="keywords" content="子预测器,uFTB," /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="uFTB 分支预测器"/>
<meta name="twitter:description" content="uFTB 简介 uFTB 是香山所有预测器中第一个预测器，也是其他预测器产生预测结果的基石。uFTB 工作在 s1 阶段，它获取到 s1_pc 后能在本周期内产生预测结果，并在 s1 通道输出，其他通道不予更改。分支指令的位置、指令的跳转目标都是由它来提供，后续预测器也将会根据这一预测结果进行进一步的预测。
而其本质则是一个 FTB 项缓存，其中存储了 FTB 项，基础的预测结果将直接由读出的 FTB 项生成。
因此，在你开始文档的阅读之前，请确保你理解了 FTB 项和含义以及预测结果接口的具体细节。
uFTB 功能简介 缓存FTB项，生成一周期预测结果 uFTB 中维护了一个小型的 FTB 项缓存，拿到 PC 之后，会在一周期之内读出 PC 所对应的 FTB 项，并从 FTB 项生成 s1 阶段预测结果。 维护两比特饱和计数器，提供基础条件分支结果 uFTB 中为 FTB项缓存的每一行都维护了对应的两比特饱和计数器，其方向预测结果会反映在 uFTB 的预测结果输出中。 根据更新请求更新 FTB 缓存和两比特饱和计数器 uFTB 缓存结构 如上所述，uFTB 本质上是一个存储了 FTB 项的小型缓存，其大致结构如下图所示。
在当前版本的香山中，uFTB 共有 32 个缓存行，每个缓存行被称作 FauFTBWay，一个缓存行中可以存储一个 FTB 项。
当 s1 流水有效时，uFTB 会使用 s1_pc 来决定读出 uFTB 缓存的哪一项。缓存是根据 PC 中的 tag 字段来索引，tag 字段被定义为 pc[16: 1]，即在 PC 中截取了 16 比特作为标识来匹配缓存中的某一行。"/>




<link rel="preload" href="/xs-bpu/scss/main.min.5081230fda7a265fa5fc10130b5bca4f0868fd0e77a3fa6ae4f2d28669ce5899.css" as="style">
<link href="/xs-bpu/scss/main.min.5081230fda7a265fa5fc10130b5bca4f0868fd0e77a3fa6ae4f2d28669ce5899.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?6aacb1c7ca0a3ef4e3aa84c1eaa237dd";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z2ZY6ZE84"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-4Z2ZY6ZE84');
    </script>


  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/xs-bpu/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">香山微架构开放验证第一期：昆明湖BPU模块UT验证实战</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/xs-bpu/en/docs/modules/01_uftb/">English</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/xs-bpu/offline-search-index.4071d1bf65bfd8de150895f1ebea33ea.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="站内搜索…"
    aria-label="站内搜索…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/xs-bpu/offline-search-index.4071d1bf65bfd8de150895f1ebea33ea.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/xs-bpu/en/docs/modules/01_uftb/">English</a></li>
    </ul>
</div>
    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-xs-bpudocs-li">
  <a href="/xs-bpu/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-xs-bpudocs"><span class="">分支预测器与昆明湖微架构实现</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpudocsbasic-li">
  <a href="/xs-bpu/docs/basic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpudocsbasic"><span class="">香山分支预测单元（BPU）基础设计</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsbasic00_bp-li">
  <a href="/xs-bpu/docs/basic/00_bp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsbasic00_bp"><span class="">何为分支预测</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsbasic01_xsbpu_basic-li">
  <a href="/xs-bpu/docs/basic/01_xsbpu_basic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsbasic01_xsbpu_basic"><span class="">香山分支预测单元基础</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsbasic02_xsbpu_structure-li">
  <a href="/xs-bpu/docs/basic/02_xsbpu_structure/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsbasic02_xsbpu_structure"><span class="">香山分支预测单元结构介绍</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsbasic03_xsbpu_timing-li">
  <a href="/xs-bpu/docs/basic/03_xsbpu_timing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsbasic03_xsbpu_timing"><span class="">香山分支预测单元时序介绍</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpudocsports-li">
  <a href="/xs-bpu/docs/ports/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpudocsports"><span class="">重要结构及接口文档</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsports00_ftb-li">
  <a href="/xs-bpu/docs/ports/00_ftb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsports00_ftb"><span class="">FTB项与完整预测结果接口</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsports01_redirect_and_update-li">
  <a href="/xs-bpu/docs/ports/01_redirect_and_update/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsports01_redirect_and_update"><span class="">重定向与更新接口</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsports02_global_ports-li">
  <a href="/xs-bpu/docs/ports/02_global_ports/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsports02_global_ports"><span class="">BPU 全局接口</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsports03_subpredictor-li">
  <a href="/xs-bpu/docs/ports/03_subpredictor/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsports03_subpredictor"><span class="">子预测器基类与子预测器接口</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-xs-bpudocsmodules-li">
  <a href="/xs-bpu/docs/modules/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpudocsmodules"><span class="">子模块文档</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsmodules00_bpu_top-li">
  <a href="/xs-bpu/docs/modules/00_bpu_top/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules00_bpu_top"><span class="">BPU 顶层模块</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-xs-bpudocsmodules01_uftb-li">
  <a href="/xs-bpu/docs/modules/01_uftb/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules01_uftb"><span class="td-sidebar-nav-active-item">uFTB 分支预测器</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsmodules02_tage_sc-li">
  <a href="/xs-bpu/docs/modules/02_tage_sc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules02_tage_sc"><span class="">TAGE-SC 分支预测器</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsmodules03_ftb-li">
  <a href="/xs-bpu/docs/modules/03_ftb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules03_ftb"><span class="">FTB 分支预测器</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsmodules04_ittage-li">
  <a href="/xs-bpu/docs/modules/04_ittage/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules04_ittage"><span class="">ITTAGE 分支预测器</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsmodules05_ras-li">
  <a href="/xs-bpu/docs/modules/05_ras/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsmodules05_ras"><span class="">RAS 分支预测器</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-xs-bpudocsfeature-li">
  <a href="/xs-bpu/docs/feature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-xs-bpudocsfeature"><span class="">功能列表</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature00_bpufeature-li">
  <a href="/xs-bpu/docs/feature/00_bpufeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature00_bpufeature"><span class="">BPU Top 功能列表</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature01_uftbfeature-li">
  <a href="/xs-bpu/docs/feature/01_uftbfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature01_uftbfeature"><span class="">uFTB 功能列表</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature02_ftbfeature-li">
  <a href="/xs-bpu/docs/feature/02_ftbfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature02_ftbfeature"><span class="">FTB 功能列表</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature03_tagescfeature-li">
  <a href="/xs-bpu/docs/feature/03_tagescfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature03_tagescfeature"><span class="">TAGE-SC 功能列表</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature04_ittagefeature-li">
  <a href="/xs-bpu/docs/feature/04_ittagefeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature04_ittagefeature"><span class="">ITTAGE 功能列表</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-xs-bpudocsfeature05_rasfeature-li">
  <a href="/xs-bpu/docs/feature/05_rasfeature/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-xs-bpudocsfeature05_rasfeature"><span class="">RAS 功能列表</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/XS-MLVP/course/tree/main/content/zh-cn/docs/modules/01_uftb.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
  <a href="https://github.com/XS-MLVP/course/edit/main/content/zh-cn/docs/modules/01_uftb.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
  <a href="https://github.com/XS-MLVP/course/new/main/content/zh-cn/docs/modules?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
  <a href="https://github.com/XS-MLVP/course/issues/new?title=uFTB%20%e5%88%86%e6%94%af%e9%a2%84%e6%b5%8b%e5%99%a8" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
  <a href="https://github.com/XS-MLVP/course/mlvp-portal/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> 提交项目问题</a>
  <a id="print" href="/xs-bpu/docs/modules/_print/"><i class="fa-solid fa-print fa-fw"></i> 整节打印</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#uftb-简介">uFTB 简介</a></li>
    <li><a href="#uftb-功能简介">uFTB 功能简介</a></li>
    <li><a href="#uftb-缓存结构">uFTB 缓存结构</a></li>
    <li><a href="#两比特饱和计数器">两比特饱和计数器</a></li>
    <li><a href="#预测结果生成">预测结果生成</a></li>
    <li><a href="#uftb-更新">uFTB 更新</a>
      <ul>
        <li><a href="#ftb-缓存更新">FTB 缓存更新</a></li>
        <li><a href="#两位饱和计数器更新">两位饱和计数器更新</a></li>
      </ul>
    </li>
    <li><a href="#接口列表">接口列表</a></li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/bpu/" data-taxonomy-term="bpu"><span class="taxonomy-label">BPU</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/bpu-%E9%A1%B6%E5%B1%82/" data-taxonomy-term="bpu-%E9%A1%B6%E5%B1%82"><span class="taxonomy-label">BPU 顶层</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/docs/" data-taxonomy-term="docs"><span class="taxonomy-label">Docs</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/examples/" data-taxonomy-term="examples"><span class="taxonomy-label">Examples</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/feature-list/" data-taxonomy-term="feature-list"><span class="taxonomy-label">Feature List</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/ftb/" data-taxonomy-term="ftb"><span class="taxonomy-label">FTB</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/ftb-%E9%A1%B9/" data-taxonomy-term="ftb-%E9%A1%B9"><span class="taxonomy-label">FTB 项</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/ittage/" data-taxonomy-term="ittage"><span class="taxonomy-label">ITTAGE</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/ras/" data-taxonomy-term="ras"><span class="taxonomy-label">RAS</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/tage-sc/" data-taxonomy-term="tage-sc"><span class="taxonomy-label">TAGE-SC</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/uftb/" data-taxonomy-term="uftb"><span class="taxonomy-label">UFTB</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%85%A8%E5%B1%80%E5%88%86%E6%94%AF%E5%8E%86%E5%8F%B2/" data-taxonomy-term="%E5%85%A8%E5%B1%80%E5%88%86%E6%94%AF%E5%8E%86%E5%8F%B2"><span class="taxonomy-label">全局分支历史</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%88%86%E6%94%AF%E6%8A%98%E5%8F%A0%E5%8E%86%E5%8F%B2/" data-taxonomy-term="%E5%88%86%E6%94%AF%E6%8A%98%E5%8F%A0%E5%8E%86%E5%8F%B2"><span class="taxonomy-label">分支折叠历史</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/" data-taxonomy-term="%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B"><span class="taxonomy-label">分支预测</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%9D%97/" data-taxonomy-term="%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%9D%97"><span class="taxonomy-label">分支预测块</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%8F%96%E5%80%BC%E7%9B%AE%E6%A0%87%E9%98%9F%E5%88%97ftq/" data-taxonomy-term="%E5%8F%96%E5%80%BC%E7%9B%AE%E6%A0%87%E9%98%9F%E5%88%97ftq"><span class="taxonomy-label">取值目标队列（FTQ）</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%AD%90%E9%A2%84%E6%B5%8B%E5%99%A8/" data-taxonomy-term="%E5%AD%90%E9%A2%84%E6%B5%8B%E5%99%A8"><span class="taxonomy-label">子预测器</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E6%9B%B4%E6%96%B0%E8%AF%B7%E6%B1%82/" data-taxonomy-term="%E6%9B%B4%E6%96%B0%E8%AF%B7%E6%B1%82"><span class="taxonomy-label">更新请求</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%8E%A7%E5%88%B6/" data-taxonomy-term="%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%8E%A7%E5%88%B6"><span class="taxonomy-label">流水线控制</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E9%87%8D%E5%AE%9A%E5%90%91%E8%AF%B7%E6%B1%82/" data-taxonomy-term="%E9%87%8D%E5%AE%9A%E5%90%91%E8%AF%B7%E6%B1%82"><span class="taxonomy-label">重定向请求</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%9C%E9%87%8D%E5%AE%9A%E5%90%91/" data-taxonomy-term="%E9%A2%84%E6%B5%8B%E7%BB%93%E6%9E%9C%E9%87%8D%E5%AE%9A%E5%90%91"><span class="taxonomy-label">预测结果重定向</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E9%A6%99%E5%B1%B1/" data-taxonomy-term="%E9%A6%99%E5%B1%B1"><span class="taxonomy-label">香山</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E9%A6%99%E5%B1%B1-bpu-%E6%97%B6%E5%BA%8F/" data-taxonomy-term="%E9%A6%99%E5%B1%B1-bpu-%E6%97%B6%E5%BA%8F"><span class="taxonomy-label">香山 BPU 时序</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E9%A6%99%E5%B1%B1-bpu-%E7%BB%93%E6%9E%84/" data-taxonomy-term="%E9%A6%99%E5%B1%B1-bpu-%E7%BB%93%E6%9E%84"><span class="taxonomy-label">香山 BPU 结构</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">Categories</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/feature-list/" data-taxonomy-term="feature-list"><span class="taxonomy-label">Feature List</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%8D%95%E5%85%83bpu/" data-taxonomy-term="%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%8D%95%E5%85%83bpu"><span class="taxonomy-label">分支预测单元（BPU）</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E6%95%99%E7%A8%8B/" data-taxonomy-term="%E6%95%99%E7%A8%8B"><span class="taxonomy-label">教程</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E7%A4%BA%E4%BE%8B/" data-taxonomy-term="%E7%A4%BA%E4%BE%8B"><span class="taxonomy-label">示例</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E9%A6%99%E5%B1%B1-bpu-%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1/" data-taxonomy-term="%E9%A6%99%E5%B1%B1-bpu-%E5%9F%BA%E7%A1%80%E8%AE%BE%E8%AE%A1"><span class="taxonomy-label">香山 BPU 基础设计</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E9%A6%99%E5%B1%B1-bpu-%E5%AD%90%E6%A8%A1%E5%9D%97/" data-taxonomy-term="%E9%A6%99%E5%B1%B1-bpu-%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="taxonomy-label">香山 BPU 子模块</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E9%A6%99%E5%B1%B1-bpu-%E6%8E%A5%E5%8F%A3/" data-taxonomy-term="%E9%A6%99%E5%B1%B1-bpu-%E6%8E%A5%E5%8F%A3"><span class="taxonomy-label">香山 BPU 接口</span><span class="taxonomy-count">5</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/xs-bpu/docs/">分支预测器与昆明湖微架构实现</a></li>
  <li class="breadcrumb-item">
    <a href="/xs-bpu/docs/modules/">子模块文档</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    uFTB 分支预测器</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>uFTB 分支预测器</h1>
	
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/%E5%AD%90%E9%A2%84%E6%B5%8B%E5%99%A8/" data-taxonomy-term="%E5%AD%90%E9%A2%84%E6%B5%8B%E5%99%A8"><span class="taxonomy-label">子预测器</span></a></li>
    <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/tags/uftb/" data-taxonomy-term="uftb"><span class="taxonomy-label">UFTB</span></a></li>
    </ul>
</div>
<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://xs-mlvp.github.io/xs-bpu/categories/%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%8D%95%E5%85%83bpu/" data-taxonomy-term="%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B%E5%8D%95%E5%85%83bpu"><span class="taxonomy-label">分支预测单元（BPU）</span></a></li>
    </ul>
</div>

  </header>
	<h2 id="uftb-简介">uFTB 简介</h2>
<p>uFTB 是香山所有预测器中第一个预测器，也是其他预测器产生预测结果的基石。uFTB 工作在 s1 阶段，它获取到 s1_pc 后能在本周期内产生预测结果，并在 s1 通道输出，其他通道不予更改。分支指令的位置、指令的跳转目标都是由它来提供，后续预测器也将会根据这一预测结果进行进一步的预测。</p>
<p>而其本质则是一个 FTB 项缓存，其中存储了 FTB 项，基础的预测结果将直接由读出的 FTB 项生成。</p>
<p>因此，在你开始文档的阅读之前，请确保你理解了 FTB 项和含义以及预测结果接口的具体细节。</p>
<h2 id="uftb-功能简介">uFTB 功能简介</h2>
<ul>
<li><strong>缓存FTB项，生成一周期预测结果</strong>    uFTB 中维护了一个小型的 FTB 项缓存，拿到 PC 之后，会在一周期之内读出 PC 所对应的 FTB 项，并从 FTB 项生成 s1 阶段预测结果。</li>
<li><strong>维护两比特饱和计数器，提供基础条件分支结果</strong>   uFTB 中为 FTB项缓存的每一行都维护了对应的两比特饱和计数器，其方向预测结果会反映在 uFTB 的预测结果输出中。</li>
<li><strong>根据更新请求更新 FTB 缓存和两比特饱和计数器</strong></li>
</ul>
<h2 id="uftb-缓存结构">uFTB 缓存结构</h2>
<p>如上所述，uFTB 本质上是一个存储了 FTB 项的小型缓存，其大致结构如下图所示。</p>

<figure>
    <img src="1.png" width="400px"/> 
</figure>

<p>在当前版本的香山中，uFTB 共有 32 个缓存行，每个缓存行被称作 <code>FauFTBWay</code>，一个缓存行中可以存储一个 FTB 项。</p>
<p><strong>当 s1 流水有效时</strong>，uFTB 会使用 <strong>s1_pc</strong> 来决定读出 uFTB 缓存的哪一项。缓存是根据 PC 中的 tag 字段来索引，tag 字段被定义为 pc[16: 1]，即在 PC 中截取了 16 比特作为标识来匹配缓存中的某一行。</p>
<p>缓存中的每一行，即 <code>FauFTBWay</code> 中的数据请求接口有三项：</p>
<ul>
<li><strong>req_tag</strong>   输入 pc 中截取的 tag 标识</li>
<li><strong>resp</strong>          输出本行所存储的 FTB 项</li>
<li><strong>resp_hit</strong>  输出指示本行的 FTB 项是否与 req_tag 匹配</li>
</ul>
<p>uFTB 会将 tag 连接到缓存的每一行的数据请求接口，并根据 <code>resp_hit</code> 信号，选出命中的那一个 FTB 项。后续将会根据这一 FTB 项生成完整预测结果。</p>
<h2 id="两比特饱和计数器">两比特饱和计数器</h2>
<p>uFTB 中为 FTB 项缓存的每一行都维护了对应的两比特饱和计数器。我们知道，在一个 FTB 项最多可以存储两个条件分支指令，因此每一行对应的两比特饱和计数器也有两个，负责为其中的条件分支指令提供粗略的预测结果。</p>
<p>uFTB 在索引到 FTB 项时，也会索引到对应的两比特饱和计数器。</p>
<p>当预测结果生成时，会根据 FTB 项与其对应的两个两比特饱和计数器中的内容来产生。</p>
<h2 id="预测结果生成">预测结果生成</h2>
<p>uFTB 通过 s1_pc 索引到对应的 FTB 项以及两个两比饱和计数器之后，需要根据他们产生预测结果。uFTB 产生的预测结果，将在 s1 流水有效时，通过 s1 通道进行输出，对于 s2 以及 s3 通道，uFTB 不予更改。</p>
<p><strong>s1 预测结果中的信号产生方式可参考以下列表：</strong></p>
<ul>
<li>
<p><strong>hit</strong> FTB表项是否命中</p>
<ul>
<li>生成方式：<code>FauFTBWay</code> 中的 <code>resp_hit</code> 信号，存在一个有效</li>
</ul>
</li>
<li>
<p><strong>slot_valids</strong> slot有效位，表示 ftb 项中的每个 slot 是否有效</p>
</li>
<li>
<p><strong>targets</strong> 每个slot对应的跳转目标地址</p>
</li>
<li>
<p><strong>offsets</strong> 每个slot中的指令相对于预测块起始地址的偏移</p>
</li>
<li>
<p><strong>is_jal</strong> 预测块内包含jal指令</p>
</li>
<li>
<p><strong>is_jalr</strong> 预测块内包含jalr指令</p>
</li>
<li>
<p><strong>is_call</strong> 预测块内包含call指令</p>
</li>
<li>
<p><strong>is_ret</strong> 预测块内包含ret指令</p>
</li>
<li>
<p><strong>last_may_be_rvi_call</strong> 预测结果预测块末尾可能为一个RVI类型的call指令信号</p>
</li>
<li>
<p><strong>is_br_sharing</strong> 最后一个slot (tailSlot) 中存储的是条件分支指令信号</p>
<ul>
<li>生成方式： FTB 项中对应字段导出</li>
</ul>
</li>
<li>
<p><strong>fallThroughErr</strong> FTB项中记录的 <code>pftAddr</code> 有误</p>
<ul>
<li>生成方式：比较 <code>pftAddr</code> 代表的预测块结束地址是否大于预测块的起始地址，如果小于，则代表出现错误，此信号置为有效。这种情况可能会发生在 pc 索引到错误的 FTB 项的情况。</li>
</ul>
</li>
<li>
<p><strong>fallThroughAddr</strong> 预测块的结束地址</p>
<ul>
<li>生成方式：如果 <code>fallThroughErr</code> 无效，则根据 <code>pftAddr</code> 生成，否则将其设置为起始地址 + 预测宽度。</li>
</ul>
</li>
<li>
<p><strong>br_taken_mask</strong> 分支预测结果，每个分支(slot)对应一个 bit，表示该分支是否被预测为 taken</p>
<ul>
<li>生成方式：根据 FTB 项中的 <code>always_taken</code> 字段和两比特饱和计数器指示结果生成。</li>
</ul>
</li>
<li>
<p><strong>jalr_target</strong> 本预测块中的 jalr 的跳转目标</p>
<ul>
<li>生成方式：FTB 项中 tailSlot 中的跳转目标。</li>
</ul>
</li>
</ul>
<h2 id="uftb-更新">uFTB 更新</h2>
<p>uFTB 的更新涉及 FTB 项缓存的更新，以及两比特饱和计数器的更新，而更新的内容都是通过更新接口来获取的。</p>
<p>在 uFTB 预测器中，缓存和两比特饱和计数器的读与写并不冲突，因此我们无需考虑读和更新之间的时序冲突问题，可以将他们看做是独立的两部分。</p>
<h3 id="ftb-缓存更新">FTB 缓存更新</h3>
<p>FTB 缓存的更新过程很简单，更新通道中已经为我们指定好了 pc 以及新生成的 FTB 项，只需将其写入到缓存的指定位置即可。</p>
<p>FTB 缓存的更新需要两个周期：</p>
<ul>
<li>在第一周期，通过 update 中的信号计算出如下内容：
<ul>
<li><strong>更新请求对应的预测块在缓存的哪一行</strong> 更新请求中的 pc 截取 tag 后被发送到 <code>FauFTBWay</code> 的更新请求通道，根据每一行所返回的 hit 信号计算</li>
</ul>
</li>
<li>在第二周期，根据第一周期求出的需要更新的位置进行更新，如果无任何一行命中，则 uFTB 会使用 <strong>伪 LRU 替换算法</strong> 选出需要写入的行。
<ul>
<li>具体的，更新通道中的 <code>ftb_entry</code> 信号组包含了新 FTB 项的完整信息，将该信息发送到需要更新的某一个缓存行即可。</li>
</ul>
</li>
</ul>
<h3 id="两位饱和计数器更新">两位饱和计数器更新</h3>
<p>两位饱和计数器的更新则需要结合后续程序的真实执行情况，以及 FTB 项中记录的分支指令信息来进行更新了，而这些信息都可以从更新通道中进行获取。</p>
<p>两位饱和计数器的更新也需要两个周期：</p>
<ul>
<li>在第一周期，计算出槽中哪些条件分支指令 对应的两位饱和计数器 需要被更新，这需要满足以下条件：
<ul>
<li>当前分支指令槽有效，并且存放了一条条件分支指令</li>
<li>当前分支指令槽并没有被标识为 always_taken。（因为被标识为 always_taken 后不会采用两位饱和计数器的结果）</li>
<li>当前分支指令槽不在实际发生了跳转的分支指令槽之后。</li>
</ul>
</li>
<li>在第二周期，更新饱和计数器
<ul>
<li>根据第一周期生成的需要更新的掩码，以及更新通道中的 <code>br_taken_mask</code> 信息进行更新。</li>
</ul>
</li>
</ul>
<h2 id="接口列表">接口列表</h2>
<table>
<thead>
<tr>
<th>信号类型</th>
<th>信号位</th>
<th>信号名</th>
<th>信号描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td></td>
<td>clock</td>
<td>输入时钟</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>reset</td>
<td>复位信号</td>
</tr>
<tr>
<td>input</td>
<td>[35:0]</td>
<td>io_reset_vector</td>
<td>用于reset时，reset s1_pc_dup_0 提供的值</td>
</tr>
<tr>
<td>input</td>
<td>[40:0]</td>
<td>io_in_bits_s0_pc_0</td>
<td>输入位s0_pc 的 第0个复制</td>
</tr>
<tr>
<td>input</td>
<td>[40:0]</td>
<td>io_in_bits_s0_pc_1</td>
<td>同上 第1个</td>
</tr>
<tr>
<td>input</td>
<td>[40:0]</td>
<td>io_in_bits_s0_pc_2</td>
<td>同上 第2个</td>
</tr>
<tr>
<td>input</td>
<td>[40:0]</td>
<td>io_in_bits_s0_pc_3</td>
<td>同上 第3个</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_pc_0</td>
<td>输出s1_pc 的 第0个复制</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_pc_1</td>
<td>同上 第1个</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_pc_2</td>
<td>同上 第2个</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_pc_3</td>
<td>同上 第3个</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_br_taken_mask_0</td>
<td>solt 0 是否被预测为 always taken</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_br_taken_mask_1</td>
<td>solt 1 是否被预测为 always taken</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_slot_valids_0</td>
<td>solt 0 是否启用</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_slot_valids_1</td>
<td>solt 1 是否启用</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_0_targets_0</td>
<td>solt 0 对应的跳转目标地址</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_0_targets_1</td>
<td>solt 1 对应的跳转目标地址</td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_0_offsets_0</td>
<td>solt 0 中分支指令相对于地址块起始pc的偏移</td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_0_offsets_1</td>
<td>solt 1 中分支指令相对于地址块起始pc的偏移</td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_0_fallThroughAddr</td>
<td>预测块的结束地址</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_is_br_sharing</td>
<td>solt 1（无条件跳转）是否被共享为有条件跳转指令</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_0_hit</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_br_taken_mask_0</td>
<td>类似 io_out_s1_pc_1 io_out_s1_full_pred_0的复制</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_br_taken_mask_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_slot_valids_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_slot_valids_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_1_targets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_1_targets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_1_offsets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_1_offsets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_1_fallThroughAddr</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_is_br_sharing</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_1_hit</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_br_taken_mask_0</td>
<td>同上</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_br_taken_mask_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_slot_valids_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_slot_valids_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_2_targets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_2_targets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_2_offsets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_2_offsets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_2_fallThroughAddr</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_is_br_sharing</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_2_hit</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_br_taken_mask_0</td>
<td>同上</td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_br_taken_mask_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_slot_valids_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_slot_valids_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_3_targets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_3_targets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_3_offsets_0</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[3:0]</td>
<td>io_out_s1_full_pred_3_offsets_1</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[40:0]</td>
<td>io_out_s1_full_pred_3_fallThroughAddr</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_fallThroughErr</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_is_br_sharing</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td></td>
<td>io_out_s1_full_pred_3_hit</td>
<td></td>
</tr>
<tr>
<td>output</td>
<td>[222:0]</td>
<td>io_out_last_stage_meta</td>
<td>输出最后阶段的元信息 io_out_last_stage_meta = {213&rsquo;h0, resp_meta_pred_way_r_1, resp_meta_hit_r_1}</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_ctrl_ubtb_enable</td>
<td>控制ubtb是否启用</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s0_fire_0</td>
<td>输入s0_fire_0，与 io_out_s1_pc_0 &lt;= io_in_bits_s0_pc_0 的时钟门控相关</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s0_fire_1</td>
<td>输入s0_fire_1</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s0_fire_2</td>
<td>输入s0_fire_2</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s0_fire_3</td>
<td>输入s0_fire_3</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s1_fire_0</td>
<td>输入s1_fire_0</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_s2_fire_0</td>
<td>输入s2_fire_0</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_valid</td>
<td>更新有效性</td>
</tr>
<tr>
<td>input</td>
<td>[40:0]</td>
<td>io_update_bits_pc</td>
<td>传回的预测块pc（用于指示更新的预测块）</td>
</tr>
<tr>
<td>input</td>
<td>[3:0]</td>
<td>io_update_bits_ftb_entry_brSlots_0_offset</td>
<td>solt 0 中分支指令相对于地址块起始pc的偏移</td>
</tr>
<tr>
<td>input</td>
<td>[11:0]</td>
<td>io_update_bits_ftb_entry_brSlots_0_lower</td>
<td>跳转目标地址的低位</td>
</tr>
<tr>
<td>input</td>
<td>[1:0]</td>
<td>io_update_bits_ftb_entry_brSlots_0_tarStat</td>
<td>跳转后的 pc 高位是否进退位</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_brSlots_0_valid</td>
<td>是否启用</td>
</tr>
<tr>
<td>input</td>
<td>[3:0]</td>
<td>io_update_bits_ftb_entry_tailSlot_offset</td>
<td>solt 1 中分支指令相对于地址块起始pc的偏移</td>
</tr>
<tr>
<td>input</td>
<td>[19:0]</td>
<td>io_update_bits_ftb_entry_tailSlot_lower</td>
<td>跳转目标地址的低位</td>
</tr>
<tr>
<td>input</td>
<td>[1:0]</td>
<td>io_update_bits_ftb_entry_tailSlot_tarStat</td>
<td>跳转后的 pc 高位是否进退位</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_tailSlot_sharing</td>
<td>无条件跳转指令槽中存储条件分支指令</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_tailSlot_valid</td>
<td>是否启用</td>
</tr>
<tr>
<td>input</td>
<td>[3:0]</td>
<td>io_update_bits_ftb_entry_pftAddr</td>
<td>Partial Fallthrough Addr 如果预测块中没有跳转，那么程序将会顺序执行到达的地址，预测块的结束地址。</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_carry</td>
<td>pc+pft时是否产生进位</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_always_taken_0</td>
<td>是否预测为总是跳转</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_ftb_entry_always_taken_1</td>
<td>是否预测为总是跳转</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_br_taken_mask_0</td>
<td>是否跳转</td>
</tr>
<tr>
<td>input</td>
<td></td>
<td>io_update_bits_br_taken_mask_1</td>
<td>是否跳转</td>
</tr>
</tbody>
</table>

	<div class="td-page-meta__lastmod">
  最后修改 June 21, 2024: <a href="https://github.com/XS-MLVP/course/commit/1d7ab9962422ae3d024682b1e0e5cbb73b70c1ae">add english (1d7ab99)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">BOSC</span></span><span class="td-footer__all_rights_reserved">保留所有权利</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/xs-bpu/js/main.min.fc653db1f3d4f4a8b4eacd389f96d8afe966937ba9dded8b07d3a1b17d967d22.js" integrity="sha256-/GU9sfPU9Ki06s04n5bYr&#43;lmk3up3e2LB9OhsX2WfSI=" crossorigin="anonymous"></script>
<script defer src="/xs-bpu/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/xs-bpu/js/tabpane-persist.js'></script>

  </body>
</html>